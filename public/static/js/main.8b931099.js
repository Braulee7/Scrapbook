/*! For license information please see main.8b931099.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Te(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Pe=!1;function Ne(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==_e||null!==Ee)&&(Ae(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,Tt,St=!1,It=[],Ct=null,At=null,Pt=null,Nt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Pt&&Ut(Pt)&&(Pt=null),Nt.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Pt&&Bt(Pt,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Mt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Tn(){return En}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Pn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Nn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Hn(t,Wn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Tr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Tr("animationend"),Ir=Tr("animationiteration"),Cr=Tr("animationstart"),Ar=Tr("transitionend"),Pr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Or=Nr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Pr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Sr:case Ir:case Cr:s=yn;break;case Ar:s=Pn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Gn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Re(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Hr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Hr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Ti(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ii={},Ci=Ei(Ii),Ai=Ei(!1),Pi=Ii;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ai),Ti(Ci)}function Oi(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Si(Ci,t),Si(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Pi=Ci.current,Si(Ci,e),Si(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(Ci),Si(Ci,e)):Ti(Ai),Si(Ai,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=[],Gi=0,Hi=null,Ki=0,Wi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Gi++]=Ki,qi[Gi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Wi[Qi++]=Xi,Wi[Qi++]=$i,Wi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=qi[--Gi],qi[Gi]=null,Ki=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ti(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ia(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Pa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Ri(t)?Pi:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Ri(t)?Pi:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Za),Si(Za,t)}function io(){Ti(Za),Ti(eo),Ti(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ti(Za),Ti(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Ro(e,t){var n=vo,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ps)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Io().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ta,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ta,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ps)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ps.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ta,useCallback:Xo,useContext:Ta,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Io(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ta,useCallback:Xo,useContext:Ta,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:$o,useReducer:Po,useRef:jo,useState:function(){return Po(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Po(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=To(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Hu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Tu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ri(n)?Pi:Ci.current;return a=Ni(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=To(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Gu(e,t),qa(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Ni(t,c=Ri(n)?Pi:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Pa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Pa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Pa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ta(s):s=Ni(t,s=Ri(n)?Pi:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Pa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Pa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Pa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Hu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Du,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ps)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Xi,Wi[Qi++]=$i,Wi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Di(),Wu(t),null;case 3:return r=t.stateNode,io(),Ti(Ai),Ti(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Du(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ti(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Du(e,t),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ti(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ai),Ti(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Tc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Tc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Tc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Tc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=$e())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Tc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Tc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Xu;var c=$u;if(Xu=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Xu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Tc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Tc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Tc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Tc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Tc(t,o,s)}}}catch(s){Tc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ts=Math.ceil,Ss=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Ps=null,Ns=null,Rs=0,Ds=0,Os=Ei(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,js=null,Bs=null,zs=0,qs=1/0,Gs=null,Hs=!1,Ks=null,Ws=null,Qs=!1,Ys=null,Xs=0,$s=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ps||(e===Ps&&(0===(2&As)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=$e()+500,Vi&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ps?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ps?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ps===e&&Rs===t||(Gs=null,qs=$e()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ss.current=o,As=i,null!==Ns?t=0:(Ps=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Bs,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bs,Gs),t);break}xc(e,Bs,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ts(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bs,Gs),r);break}xc(e,Bs,Gs);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bs,Gs),ic(e,$e()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=$e()+500,Vi&&zi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&As)&&_c();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&zi()}}function hc(){Ds=Os.current,Ti(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ti(Ai),Ti(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ps=e,Ns=e=Oc(e.current,null),Rs=Ds=t,Ls=0,Ms=null,Vs=Us=Fs=0,Bs=js=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ls=1,Ms=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ps||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ps,Rs)}function yc(e,t){var n=As;As|=2;var r=vc();for(Ps===e&&Rs===t||(Gs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Ss.current=r,null!==Ns)throw Error(a(261));return Ps=null,Rs=0,Ls}function gc(){for(;null!==Ns;)bc(Ns)}function kc(){for(;null!==Ns&&!Ye();)bc(Ns)}function bc(e){var t=Es(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Is.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ds)))return void(Ns=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ls=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ys);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ps&&(Ns=Ps=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Pc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Is.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Xe(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Xs=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hs)throw Hs=!1,e=Ks,Ks=null,e;0!==(1&Xs)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?$s++:($s=0,Js=e):$s=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Ys){var e=bt(Xs),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Xs=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Tc(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ps===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>$e()-zs?dc(e,0):Vs|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Pc(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case T:return(e=Rc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case I:u=9;break e;case C:u=11;break e;case N:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Pu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Si(uo,1&uo.current),null!==(e=Hu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Tu(e,t,n)}return Hu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gu(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Pu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Hu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ta(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gu(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ha(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Tu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Hc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Hc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&As)&&(qs=$e()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},Et=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,T=null,S=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function P(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?_():(E=!1,T=null)}}else E=!1}if("function"===typeof k)_=function(){k(P)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=P,_=function(){R.postMessage(null)}}else _=function(){y(P,0)};function D(e){T=e,E||(E=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ru},SDK_VERSION:function(){return js},_DEFAULT_ENTRY_NAME:function(){return Is},_addComponent:function(){return Ns},_addOrOverwriteComponent:function(){return Rs},_apps:function(){return As},_clearComponents:function(){return Ms},_components:function(){return Ps},_getProvider:function(){return Os},_registerComponent:function(){return Ds},_removeServiceInstance:function(){return Ls},deleteApp:function(){return Gs},getApp:function(){return zs},getApps:function(){return qs},initializeApp:function(){return Bs},onLog:function(){return Ws},registerVersion:function(){return Ks},setLogLevel:function(){return Qs}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){return function(e){if(Array.isArray(e))return o(e)}(e)||l(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h="undefined"!==typeof document,d=h?t.useLayoutEffect:t.useEffect;function p(){var e=(0,t.useRef)(!1);return d((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var v=function(e){return e};var m=["prepare","read","update","preRender","render","postRender"];var y=function(e,t){var n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},a=m.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=!1,o=new WeakSet,u={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,u=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===u.indexOf(e)&&(u.push(e),a&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(s){if(i)a=!0;else{i=!0;var c=[n,t];if(t=c[0],(n=c[1]).length=0,r=t.length)for(var l=0;l<r;l++){var f=t[l];f(s),o.has(f)&&(u.schedule(f),e())}i=!1,a&&(a=!1,u.process(s))}}};return u}((function(){return n=!0})),e}),{}),o=function(e){return a[e].process(i)},u=function a(){var u=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(u-i.timestamp,40),1),i.timestamp=u,i.isProcessing=!0,m.forEach(o),i.isProcessing=!1,n&&t&&(r=!1,e(a))},s=m.reduce((function(t,o){var s=a[o];return t[o]=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(u)),s.schedule(t,a,o)},t}),{});return{schedule:s,cancel:function(e){return m.forEach((function(t){return a[t].cancel(e)}))},state:i,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:v,!0),g=y.schedule,k=y.cancel,b=y.state,w=y.steps;function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var _=(0,t.createContext)(null);function E(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function I(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function A(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){var t=D();return function(){var n,r=R(e);if(t){var i=R(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(this,n)}}var M=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"getSnapshotBeforeUpdate",value:function(e){var t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){var n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return this.props.children}}]),n}(t.Component);function F(e){var n=e.children,r=e.isPresent,i=(0,t.useId)(),a=(0,t.useRef)(null),o=(0,t.useRef)({width:0,height:0,top:0,left:0});return(0,t.useInsertionEffect)((function(){var e=o.current,t=e.width,n=e.height,u=e.top,s=e.left;if(!r&&a.current&&t&&n){a.current.dataset.motionPopId=i;var c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(n,"px !important;\n            top: ").concat(u,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),function(){document.head.removeChild(c)}}}),[r]),t.createElement(M,{isPresent:r,childRef:a,sizeRef:o},t.cloneElement(n,{ref:a}))}var U=function(e){var n=e.children,r=e.initial,i=e.isPresent,a=e.onExitComplete,o=e.custom,u=e.presenceAffectsLayout,s=e.mode,c=E(V),l=(0,t.useId)(),f=(0,t.useMemo)((function(){return{id:l,initial:r,isPresent:i,custom:o,onExitComplete:function(e){c.set(e,!0);var t,n=x(c.values());try{for(n.s();!(t=n.n()).done;){if(!t.value)return}}catch(r){n.e(r)}finally{n.f()}a&&a()},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}}),u?void 0:[i]);return(0,t.useMemo)((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[i]),t.useEffect((function(){!i&&!c.size&&a&&a()}),[i]),"popLayout"===s&&(n=t.createElement(F,{isPresent:i},n)),t.createElement(_.Provider,{value:f},n)};function V(){return new Map}var j=(0,t.createContext)({});var B=v,z=v;var q=function(e){return e.key||""};var G=function(e){var n=e.children,r=e.custom,i=e.initial,a=void 0===i||i,o=e.onExitComplete,u=e.exitBeforeEnter,s=e.presenceAffectsLayout,l=void 0===s||s,h=e.mode,v=void 0===h?"sync":h;z(!u,"Replace exitBeforeEnter with mode='wait'");var m,y=(0,t.useContext)(j).forceRender||function(){var e=p(),n=c((0,t.useState)(0),2),r=n[0],i=n[1],a=(0,t.useCallback)((function(){e.current&&i(r+1)}),[r]);return[(0,t.useCallback)((function(){return g.postRender(a)}),[a]),r]}()[0],k=p(),b=function(e){var n=[];return t.Children.forEach(e,(function(e){(0,t.isValidElement)(e)&&n.push(e)})),n}(n),w=b,x=(0,t.useRef)(new Map).current,_=(0,t.useRef)(w),E=(0,t.useRef)(new Map).current,T=(0,t.useRef)(!0);if(d((function(){T.current=!1,function(e,t){e.forEach((function(e){var n=q(e);t.set(n,e)}))}(b,E),_.current=w})),m=function(){T.current=!0,E.clear(),x.clear()},(0,t.useEffect)((function(){return function(){return m()}}),[]),T.current)return t.createElement(t.Fragment,null,w.map((function(e){return t.createElement(U,{key:q(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:l,mode:v},e)})));w=f(w);for(var S=_.current.map(q),I=b.map(q),C=S.length,A=0;A<C;A++){var P=S[A];-1!==I.indexOf(P)||x.has(P)||x.set(P,void 0)}return"wait"===v&&x.size&&(w=[]),x.forEach((function(e,n){if(-1===I.indexOf(n)){var i=E.get(n);if(i){var a=S.indexOf(n),u=e;if(!u){u=t.createElement(U,{key:q(i),isPresent:!1,onExitComplete:function(){E.delete(n),x.delete(n);var e=_.current.findIndex((function(e){return e.key===n}));if(_.current.splice(e,1),!x.size){if(_.current=b,!1===k.current)return;y(),o&&o()}},custom:r,presenceAffectsLayout:l,mode:v},i),x.set(n,u)}w.splice(a,0,u)}}})),w=w.map((function(e){var n=e.key;return x.has(n)?e:t.createElement(U,{key:q(e),isPresent:!0,presenceAffectsLayout:l,mode:v},e)})),t.createElement(t.Fragment,null,x.size?w:w.map((function(e){return(0,t.cloneElement)(e)})))};function H(e,t,n){return(t=I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),Y=(0,t.createContext)({}),X=(0,t.createContext)({strict:!1});function $(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function J(e){return"string"===typeof e||Array.isArray(e)}function Z(e){return"object"===typeof e&&"function"===typeof e.start}var ee=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],te=["initial"].concat(ee);function ne(e){return Z(e.animate)||te.some((function(t){return J(e[t])}))}function re(e){return Boolean(ne(e)||e.variants)}function ie(e){var n=function(e,t){if(ne(e)){var n=e.initial,r=e.animate;return{initial:!1===n||J(n)?n:void 0,animate:J(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Y)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[ae(r),ae(i)])}function ae(e){return Array.isArray(e)?e.join(" "):e}var oe={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ue={},se=function(e){ue[e]={isEnabled:function(t){return oe[e].some((function(e){return!!t[e]}))}}};for(var ce in oe)se(ce);var le=(0,t.createContext)({}),fe=Symbol.for("motionComponentSymbol");function he(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.useRender,a=e.useVisualState,o=e.Component;n&&function(e){for(var t in e)ue[t]=W(W({},ue[t]),e[t])}(n);var u=(0,t.forwardRef)((function(e,u){var s,c=W(W(W({},(0,t.useContext)(Q)),e),{},{layoutId:de(e)}),l=c.isStatic,f=ie(e),p=a(e,l);if(!l&&h){f.visualElement=function(e,n,r,i){var a=(0,t.useContext)(Y).visualElement,o=(0,t.useContext)(X),u=(0,t.useContext)(_),s=(0,t.useContext)(Q).reducedMotion,c=(0,t.useRef)();i=i||o.renderer,!c.current&&i&&(c.current=i(e,{visualState:n,parent:a,props:r,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:s}));var l=c.current;(0,t.useInsertionEffect)((function(){l&&l.update(r,u)}));var f=(0,t.useRef)(Boolean(window.HandoffAppearAnimations));return d((function(){l&&(l.render(),f.current&&l.animationState&&l.animationState.animateChanges())})),(0,t.useEffect)((function(){l&&(l.updateFeatures(),!f.current&&l.animationState&&l.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,f.current=!1)})),l}(o,p,c,r);var v=(0,t.useContext)(le),m=(0,t.useContext)(X).strict;f.visualElement&&(s=f.visualElement.loadFeatures(c,m,n,v))}return t.createElement(Y.Provider,{value:f},s&&f.visualElement?t.createElement(s,W({visualElement:f.visualElement},c)):null,i(o,e,function(e,n,r){return(0,t.useCallback)((function(t){t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):$(r)&&(r.current=t))}),[n])}(p,f.visualElement,u),p,l,f.visualElement))}));return u[fe]=o,u}function de(e){var n=e.layoutId,r=(0,t.useContext)(j).id;return r&&void 0!==n?r+"-"+n:n}function pe(e){function t(t){return he(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var ve=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function me(e){return"string"===typeof e&&!e.includes("-")&&!!(ve.indexOf(e)>-1||/[A-Z]/.test(e))}var ye={};var ge=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ke=new Set(ge);function be(e,t){var n=t.layout,r=t.layoutId;return ke.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!ye[e]||"opacity"===e)}var we=function(e){return Boolean(e&&e.getVelocity)},xe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_e=ge.length;var Ee=function(e){return function(t){return"string"===typeof t&&t.startsWith(e)}},Te=Ee("--"),Se=Ee("var(--"),Ie=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Ce=function(e,t,n){return Math.min(Math.max(n,e),t)},Ae={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},Pe=W(W({},Ae),{},{transform:function(e){return Ce(0,1,e)}}),Ne=W(W({},Ae),{},{default:1}),Re=function(e){return Math.round(1e5*e)/1e5},De=/(-)?([\d]*\.?[\d])+/g,Oe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Le=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Me(e){return"string"===typeof e}var Fe=function(e){return{test:function(t){return Me(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},Ue=Fe("deg"),Ve=Fe("%"),je=Fe("px"),Be=Fe("vh"),ze=Fe("vw"),qe=W(W({},Ve),{},{parse:function(e){return Ve.parse(e)/100},transform:function(e){return Ve.transform(100*e)}}),Ge=W(W({},Ae),{},{transform:Math.round}),He={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,size:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,rotate:Ue,rotateX:Ue,rotateY:Ue,rotateZ:Ue,scale:Ne,scaleX:Ne,scaleY:Ne,scaleZ:Ne,skew:Ue,skewX:Ue,skewY:Ue,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:Pe,originX:qe,originY:qe,originZ:je,zIndex:Ge,fillOpacity:Pe,strokeOpacity:Pe,numOctaves:Ge};function Ke(e,t,n,r){var i=e.style,a=e.vars,o=e.transform,u=e.transformOrigin,s=!1,c=!1,l=!0;for(var f in t){var h=t[f];if(Te(f))a[f]=h;else{var d=He[f],p=Ie(h,d);if(ke.has(f)){if(s=!0,o[f]=p,!l)continue;h!==(d.default||0)&&(l=!1)}else f.startsWith("origin")?(c=!0,u[f]=p):i[f]=p}}if(t.transform||(s||r?i.transform=function(e,t,n,r){for(var i=t.enableHardwareAcceleration,a=void 0===i||i,o=t.allowTransformNone,u=void 0===o||o,s="",c=0;c<_e;c++){var l=ge[c];if(void 0!==e[l]){var f=xe[l]||l;s+="".concat(f,"(").concat(e[l],") ")}}return a&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,n?"":s):u&&n&&(s="none"),s}(e.transform,n,l,r):i.transform&&(i.transform="none")),c){var v=u.originX,m=void 0===v?"50%":v,y=u.originY,g=void 0===y?"50%":y,k=u.originZ,b=void 0===k?0:k;i.transformOrigin="".concat(m," ").concat(g," ").concat(b)}}var We=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function Qe(e,t,n){for(var r in t)we(t[r])||be(r,n)||(e[r]=t[r])}function Ye(e,n,r){var i={};return Qe(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e=We();return Ke(e,n,{enableHardwareAcceleration:!r},i),Object.assign({},e.vars,e.style)}),[n])}(e,n,r)),e.transformValues?e.transformValues(i):i}function Xe(e,t,n){var r={},i=Ye(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}var $e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Je(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||$e.has(e)}var Ze,et=function(e){return!Je(e)};try{(Ze=require("@emotion/is-prop-valid").default)&&(et=function(e){return e.startsWith("on")?!Je(e):Ze(e)})}catch(jV){}function tt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nt(e,t,n){return"string"===typeof e?e:je.transform(t+n*e)}var rt={offset:"stroke-dashoffset",array:"stroke-dasharray"},it={offset:"strokeDashoffset",array:"strokeDasharray"};var at=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function ot(e,t,n,r,i){var a=t.attrX,o=t.attrY,u=t.attrScale,s=t.originX,c=t.originY,l=t.pathLength,f=t.pathSpacing,h=void 0===f?1:f,d=t.pathOffset,p=void 0===d?0:d;if(Ke(e,tt(t,at),n,i),r)e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);else{e.attrs=e.style,e.style={};var v=e.attrs,m=e.style,y=e.dimensions;v.transform&&(y&&(m.transform=v.transform),delete v.transform),y&&(void 0!==s||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){var r=nt(t,e.x,e.width),i=nt(n,e.y,e.height);return"".concat(r," ").concat(i)}(y,void 0!==s?s:.5,void 0!==c?c:.5)),void 0!==a&&(v.x=a),void 0!==o&&(v.y=o),void 0!==u&&(v.scale=u),void 0!==l&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var a=i?rt:it;e[a.offset]=je.transform(-r);var o=je.transform(t),u=je.transform(n);e[a.array]="".concat(o," ").concat(u)}(v,l,h,p,!1)}}var ut=function(){return W(W({},We()),{},{attrs:{}})},st=function(e){return"string"===typeof e&&"svg"===e.toLowerCase()};function ct(e,n,r,i){var a=(0,t.useMemo)((function(){var t=ut();return ot(t,n,{enableHardwareAcceleration:!1},st(i),e.transformTemplate),W(W({},t.attrs),{},{style:W({},t.style)})}),[n]);if(e.style){var o={};Qe(o,e.style,e),a.style=W(W({},o),a.style)}return a}function lt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n,r,i,a,o){var u=a.latestValues,s=(me(n)?ct:Xe)(r,u,o,n),c=function(e,t,n){var r={};for(var i in e)"values"===i&&"object"===typeof e.values||(et(i)||!0===n&&Je(i)||!t&&!Je(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),l=W(W(W({},c),s),{},{ref:i}),f=r.children,h=(0,t.useMemo)((function(){return we(f)?f.get():f}),[f]);return(0,t.createElement)(n,W(W({},l),{},{children:h}))}}var ft=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};function ht(e,t,n,r){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var dt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pt(e,t,n,r){for(var i in ht(e,t,void 0,r),t.attrs)e.setAttribute(dt.has(i)?i:ft(i),t.attrs[i])}function vt(e,t){var n=e.style,r={};for(var i in n)(we(n[i])||t.style&&we(t.style[i])||be(i,e))&&(r[i]=n[i]);return r}function mt(e,t){var n=vt(e,t);for(var r in e){if(we(e[r])||we(t[r]))n[-1!==ge.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function yt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}var gt=function(e){return Array.isArray(e)},kt=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},bt=function(e){return gt(e)?e[e.length-1]||0:e};function wt(e){var t=we(e)?e.get():e;return kt(t)?t.toValue():t}var xt=["transitionEnd","transition"];var _t=function(e){return function(n,r){var i=(0,t.useContext)(Y),a=(0,t.useContext)(_),o=function(){return function(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,u={latestValues:Et(t,n,r,i),renderState:a()};return o&&(u.mount=function(e){return o(t,e,u)}),u}(e,n,i,a)};return r?o():E(o)}};function Et(e,t,n,r){var i={},a=r(e,{});for(var o in a)i[o]=wt(a[o]);var u=e.initial,s=e.animate,c=ne(e),l=re(e);t&&l&&!c&&!1!==e.inherit&&(void 0===u&&(u=t.initial),void 0===s&&(s=t.animate));var f=!!n&&!1===n.initial,h=(f=f||!1===u)?s:u;h&&"boolean"!==typeof h&&!Z(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=yt(e,t);if(n){var r=n.transitionEnd,a=(n.transition,tt(n,xt));for(var o in a){var u=a[o];if(Array.isArray(u))u=u[f?u.length-1:0];null!==u&&(i[o]=u)}for(var s in r)i[s]=r[s]}}));return i}var Tt={useVisualState:_t({scrapeMotionValuesFromProps:mt,createRenderState:ut,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;g.read((function(){try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}})),g.render((function(){ot(r,i,{enableHardwareAcceleration:!1},st(t.tagName),e.transformTemplate),pt(t,r)}))}})},St={useVisualState:_t({scrapeMotionValuesFromProps:vt,createRenderState:We})};function It(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}var Ct=function(e){return"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary};function At(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}var Pt=function(e){return function(t){return Ct(t)&&e(t,At(t))}};function Nt(e,t,n,r){return It(e,t,Pt(n),r)}var Rt=function(e,t){return function(n){return t(e(n))}},Dt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Rt)};function Ot(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Lt=Ot("dragHorizontal"),Mt=Ot("dragVertical");function Ft(e){var t=!1;if("y"===e)t=Mt();else if("x"===e)t=Lt();else{var n=Lt(),r=Mt();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function Ut(){var e=Ft(!0);return!e||(e(),!1)}var Vt=function(){function e(t){T(this,e),this.isMounted=!1,this.node=t}return A(e,[{key:"update",value:function(){}}]),e}();function jt(e,t){var n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Nt(e.current,n,(function(n,i){if("touch"!==n.type&&!Ut()){var a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&g.update((function(){return a[r](n,i)}))}}),{passive:!e.getProps()[r]})}var Bt=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"mount",value:function(){this.unmount=Dt(jt(this.node,!0),jt(this.node,!1))}},{key:"unmount",value:function(){}}]),n}(Vt),zt=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).isActive=!1,e}return A(n,[{key:"onFocus",value:function(){var e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var e=this;this.unmount=Dt(It(this.node.current,"focus",(function(){return e.onFocus()})),It(this.node.current,"blur",(function(){return e.onBlur()})))}},{key:"unmount",value:function(){}}]),n}(Vt),qt=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function Gt(e,t){if(t){var n=new PointerEvent("pointer"+e);t(n,At(n))}}var Ht=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).removeStartListeners=v,e.removeEndListeners=v,e.removeAccessibleListeners=v,e.startPointerPress=function(t,n){if(e.removeEndListeners(),!e.isPressing){var r=e.node.getProps(),i=Nt(window,"pointerup",(function(t,n){if(e.checkPressEnd()){var r=e.node.getProps(),i=r.onTap,a=r.onTapCancel;g.update((function(){qt(e.node.current,t.target)?i&&i(t,n):a&&a(t,n)}))}}),{passive:!(r.onTap||r.onPointerUp)}),a=Nt(window,"pointercancel",(function(t,n){return e.cancelPress(t,n)}),{passive:!(r.onTapCancel||r.onPointerCancel)});e.removeEndListeners=Dt(i,a),e.startPress(t,n)}},e.startAccessiblePress=function(){var t=It(e.node.current,"keydown",(function(t){if("Enter"===t.key&&!e.isPressing){e.removeEndListeners(),e.removeEndListeners=It(e.node.current,"keyup",(function(t){"Enter"===t.key&&e.checkPressEnd()&&Gt("up",(function(t,n){var r=e.node.getProps().onTap;r&&g.update((function(){return r(t,n)}))}))})),Gt("down",(function(t,n){e.startPress(t,n)}))}})),n=It(e.node.current,"blur",(function(){e.isPressing&&Gt("cancel",(function(t,n){return e.cancelPress(t,n)}))}));e.removeAccessibleListeners=Dt(t,n)},e}return A(n,[{key:"startPress",value:function(e,t){this.isPressing=!0;var n=this.node.getProps(),r=n.onTapStart;n.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&g.update((function(){return r(e,t)}))}},{key:"checkPressEnd",value:function(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ut()}},{key:"cancelPress",value:function(e,t){if(this.checkPressEnd()){var n=this.node.getProps().onTapCancel;n&&g.update((function(){return n(e,t)}))}}},{key:"mount",value:function(){var e=this.node.getProps(),t=Nt(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=It(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Dt(t,n)}},{key:"unmount",value:function(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}]),n}(Vt),Kt=["root"],Wt=new WeakMap,Qt=new WeakMap,Yt=function(e){var t=Wt.get(e.target);t&&t(e)},Xt=function(e){e.forEach(Yt)};function $t(e,t,n){var r=function(e){var t=e.root,n=tt(e,Kt),r=t||document;Qt.has(r)||Qt.set(r,{});var i=Qt.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(Xt,W({root:t},n))),i[a]}(t);return Wt.set(e,n),r.observe(e),function(){Wt.delete(e),r.unobserve(e)}}var Jt={some:0,all:1},Zt=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).hasEnteredView=!1,e.isInView=!1,e}return A(n,[{key:"startObserver",value:function(){var e=this;this.unmount();var t=this.node.getProps().viewport,n=void 0===t?{}:t,r=n.root,i=n.margin,a=n.amount,o=void 0===a?"some":a,u=n.once,s={root:r?r.current:void 0,rootMargin:i,threshold:"number"===typeof o?o:Jt[o]};return $t(this.node.current,s,(function(t){var n=t.isIntersecting;if(e.isInView!==n&&(e.isInView=n,!u||n||!e.hasEnteredView)){n&&(e.hasEnteredView=!0),e.node.animationState&&e.node.animationState.setActive("whileInView",n);var r=e.node.getProps(),i=r.onViewportEnter,a=r.onViewportLeave,o=n?i:a;o&&o(t)}}))}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!==typeof IntersectionObserver){var e=this.node,t=e.props,n=e.prevProps,r=["amount","margin","root"].some(function(e){var t=e.viewport,n=void 0===t?{}:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.viewport,a=void 0===i?{}:i;return function(e){return n[e]!==a[e]}}(t,n));r&&this.startObserver()}}},{key:"unmount",value:function(){}}]),n}(Vt);var en={inView:{Feature:Zt},tap:{Feature:Ht},focus:{Feature:zt},hover:{Feature:Bt}};function tn(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function nn(e,t,n){var r=e.getProps();return yt(r,t,void 0!==n?n:r.custom,function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(e))}var rn="data-"+ft("framerAppearId"),an=function(e){return 1e3*e},on=function(e){return e/1e3},un=!1,sn=function(e){return Array.isArray(e)&&"number"===typeof e[0]};function cn(e){return Boolean(!e||"string"===typeof e&&fn[e]||sn(e)||Array.isArray(e)&&e.every(cn))}var ln=function(e){var t=c(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"cubic-bezier(".concat(n,", ").concat(r,", ").concat(i,", ").concat(a,")")},fn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ln([0,.65,.55,1]),circOut:ln([.55,0,1,.45]),backIn:ln([.31,.01,.66,-.59]),backOut:ln([.33,1.53,.69,.99])};function hn(e){if(e)return sn(e)?ln(e):Array.isArray(e)?e.map(hn):fn[e]}var dn=function(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e},pn=1e-7,vn=12;function mn(e,t,n,r){if(e===t&&n===r)return v;var i=function(t){return function(e,t,n,r,i){var a,o,u=0;do{(a=dn(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>pn&&++u<vn);return o}(t,0,1,e,n)};return function(e){return 0===e||1===e?e:dn(i(e),t,r)}}var yn=mn(.42,0,1,1),gn=mn(0,0,.58,1),kn=mn(.42,0,.58,1),bn=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},wn=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},xn=function(e){return function(t){return 1-e(1-t)}},_n=function(e){return 1-Math.sin(Math.acos(e))},En=xn(_n),Tn=wn(En),Sn=mn(.33,1.53,.69,.99),In=xn(Sn),Cn=wn(In),An={linear:v,easeIn:yn,easeInOut:kn,easeOut:gn,circIn:_n,circInOut:Tn,circOut:En,backIn:In,backInOut:Cn,backOut:Sn,anticipate:function(e){return(e*=2)<1?.5*In(e):.5*(2-Math.pow(2,-10*(e-1)))}},Pn=function(e){if(Array.isArray(e)){z(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=c(e,4);return mn(t[0],t[1],t[2],t[3])}return"string"===typeof e?(z(void 0!==An[e],"Invalid easing type '".concat(e,"'")),An[e]):e},Nn=function(e,t){return function(n){return Boolean(Me(n)&&Le.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},Rn=function(e,t,n){return function(r){var i;if(!Me(r))return r;var a=c(r.match(De),4),o=a[0],u=a[1],s=a[2],l=a[3];return H(i={},e,parseFloat(o)),H(i,t,parseFloat(u)),H(i,n,parseFloat(s)),H(i,"alpha",void 0!==l?parseFloat(l):1),i}},Dn=W(W({},Ae),{},{transform:function(e){return Math.round(function(e){return Ce(0,255,e)}(e))}}),On={test:Nn("rgb","red"),parse:Rn("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+Dn.transform(t)+", "+Dn.transform(n)+", "+Dn.transform(r)+", "+Re(Pe.transform(a))+")"}};var Ln={test:Nn("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:On.transform},Mn={test:Nn("hsl","hue"),parse:Rn("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+Ve.transform(Re(n))+", "+Ve.transform(Re(r))+", "+Re(Pe.transform(a))+")"}},Fn={test:function(e){return On.test(e)||Ln.test(e)||Mn.test(e)},parse:function(e){return On.test(e)?On.parse(e):Mn.test(e)?Mn.parse(e):Ln.parse(e)},transform:function(e){return Me(e)?e:e.hasOwnProperty("red")?On.transform(e):Mn.transform(e)}},Un=function(e,t,n){return-n*e+n*t+e};function Vn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var jn=function(e,t,n){var r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Bn=[Ln,On,Mn];function zn(e){var t=function(e){return Bn.find((function(t){return t.test(e)}))}(e);z(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));var n=t.parse(e);return t===Mn&&(n=function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;t/=360,r/=100;var a=0,o=0,u=0;if(n/=100){var s=r<.5?r*(1+n):r+n-r*n,c=2*r-s;a=Vn(c,s,t+1/3),o=Vn(c,s,t),u=Vn(c,s,t-1/3)}else a=o=u=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*u),alpha:i}}(n)),n}var qn=function(e,t){var n=zn(e),r=zn(t),i=W({},n);return function(e){return i.red=jn(n.red,r.red,e),i.green=jn(n.green,r.green,e),i.blue=jn(n.blue,r.blue,e),i.alpha=Un(n.alpha,r.alpha,e),On.transform(i)}};var Gn={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:v},Hn={regex:Oe,countKey:"Colors",token:"${c}",parse:Fn.parse},Kn={regex:De,countKey:"Numbers",token:"${n}",parse:Ae.parse};function Wn(e,t){var n,r=t.regex,i=t.countKey,a=t.token,o=t.parse,u=e.tokenised.match(r);u&&(e["num"+i]=u.length,e.tokenised=e.tokenised.replace(r,a),(n=e.values).push.apply(n,f(u.map(o))))}function Qn(e){var t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Wn(n,Gn),Wn(n,Hn),Wn(n,Kn),n}function Yn(e){return Qn(e).values}function Xn(e){var t=Qn(e),n=t.values,r=t.numColors,i=t.numVars,a=t.tokenised,o=n.length;return function(e){for(var t=a,n=0;n<o;n++)t=n<i?t.replace(Gn.token,e[n]):n<i+r?t.replace(Hn.token,Fn.transform(e[n])):t.replace(Kn.token,Re(e[n]));return t}}var $n=function(e){return"number"===typeof e?0:e};var Jn={test:function(e){var t,n;return isNaN(e)&&Me(e)&&((null===(t=e.match(De))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Oe))||void 0===n?void 0:n.length)||0)>0},parse:Yn,createTransformer:Xn,getAnimatableNone:function(e){var t=Yn(e);return Xn(e)(t.map($n))}},Zn=function(e,t){return function(n){return"".concat(n>0?t:e)}};function er(e,t){return"number"===typeof e?function(n){return Un(e,t,n)}:Fn.test(e)?qn(e,t):e.startsWith("var(")?Zn(e,t):rr(e,t)}var tr=function(e,t){var n=f(e),r=n.length,i=e.map((function(e,n){return er(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},nr=function(e,t){var n=W(W({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=er(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}},rr=function(e,t){var n=Jn.createTransformer(t),r=Qn(e),i=Qn(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Dt(tr(r.values,i.values),n):(B(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Zn(e,t))},ir=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},ar=function(e,t){return function(n){return Un(e,t,n)}};function or(e,t,n){for(var r=[],i=n||function(e){return"number"===typeof e?ar:"string"===typeof e?Fn.test(e)?qn:rr:Array.isArray(e)?tr:"object"===typeof e?nr:ar}(e[0]),a=e.length-1,o=0;o<a;o++){var u=i(e[o],e[o+1]);if(t){var s=Array.isArray(t)?t[o]||v:t;u=Dt(s,u)}r.push(u)}return r}function ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=void 0===r||r,a=n.ease,o=n.mixer,u=e.length;if(z(u===t.length,"Both input and output ranges must be the same length"),1===u)return function(){return t[0]};e[0]>e[u-1]&&(e=f(e).reverse(),t=f(t).reverse());var s=or(t,a,o),c=s.length,l=function(t){var n=0;if(c>1)for(;n<e.length-2&&!(t<e[n+1]);n++);var r=ir(e[n],e[n+1],t);return s[n](r)};return i?function(t){return l(Ce(e[0],e[u-1],t))}:l}function sr(e){var t=[0];return function(e,t){for(var n=e[e.length-1],r=1;r<=t;r++){var i=ir(0,t,r);e.push(Un(n,1,i))}}(t,e.length-1),t}function cr(e){var t,n,r=e.duration,i=void 0===r?300:r,a=e.keyframes,o=e.times,u=e.ease,s=void 0===u?"easeInOut":u,c=bn(s)?s.map(Pn):Pn(s),l={done:!1,value:a[0]},f=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===a.length?o:sr(a),i),h=ur(f,a,{ease:Array.isArray(c)?c:(t=a,n=c,t.map((function(){return n||kn})).splice(0,t.length-1))});return{calculatedDuration:i,next:function(e){return l.value=h(e),l.done=e>=i,l}}}function lr(e,t){return t?e*(1e3/t):0}var fr=5;function hr(e,t,n){var r=Math.max(t-fr,0);return lr(n-e(r),t-r)}var dr=.001,pr=.01,vr=10,mr=.05,yr=1;function gr(e){var t,n,r=e.duration,i=void 0===r?800:r,a=e.bounce,o=void 0===a?.25:a,u=e.velocity,s=void 0===u?0:u,c=e.mass,l=void 0===c?1:c;B(i<=an(vr),"Spring duration must be 10 seconds or less");var f=1-o;f=Ce(mr,yr,f),i=Ce(pr,vr,on(i)),f<1?(t=function(e){var t=e*f,n=t*i,r=t-s,a=br(e,f),o=Math.exp(-n);return dr-r/a*o},n=function(e){var n=e*f*i,r=n*s+s,a=Math.pow(f,2)*Math.pow(e,2)*i,o=Math.exp(-n),u=br(Math.pow(e,2),f);return(-t(e)+dr>0?-1:1)*((r-a)*o)/u}):(t=function(e){return Math.exp(-e*i)*((e-s)*i+1)-dr},n=function(e){return Math.exp(-e*i)*(i*i*(s-e))});var h=function(e,t,n){for(var r=n,i=1;i<kr;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i=an(i),isNaN(h))return{stiffness:100,damping:10,duration:i};var d=Math.pow(h,2)*l;return{stiffness:d,damping:2*f*Math.sqrt(l*d),duration:i}}var kr=12;function br(e,t){return e*Math.sqrt(1-t*t)}var wr=["keyframes","restDelta","restSpeed"],xr=["duration","bounce"],_r=["stiffness","damping","mass"];function Er(e,t){return t.some((function(t){return void 0!==e[t]}))}function Tr(e){var t,n=e.keyframes,r=e.restDelta,i=e.restSpeed,a=tt(e,wr),o=n[0],u=n[n.length-1],s={done:!1,value:o},c=function(e){var t=W({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Er(e,_r)&&Er(e,xr)){var n=gr(e);(t=W(W(W({},t),n),{},{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(a),l=c.stiffness,f=c.damping,h=c.mass,d=c.velocity,p=c.duration,v=c.isResolvedFromDuration,m=d?-on(d):0,y=f/(2*Math.sqrt(l*h)),g=u-o,k=on(Math.sqrt(l/h)),b=Math.abs(g)<5;if(i||(i=b?.01:2),r||(r=b?.005:.5),y<1){var w=br(k,y);t=function(e){var t=Math.exp(-y*k*e);return u-t*((m+y*k*g)/w*Math.sin(w*e)+g*Math.cos(w*e))}}else if(1===y)t=function(e){return u-Math.exp(-k*e)*(g+(m+k*g)*e)};else{var x=k*Math.sqrt(y*y-1);t=function(e){var t=Math.exp(-y*k*e),n=Math.min(x*e,300);return u-t*((m+y*k*g)*Math.sinh(n)+x*g*Math.cosh(n))/x}}return{calculatedDuration:v&&p||null,next:function(e){var n=t(e);if(v)s.done=e>=p;else{var a=m;0!==e&&(a=y<1?hr(t,e,n):0);var o=Math.abs(a)<=i,c=Math.abs(u-n)<=r;s.done=o&&c}return s.value=s.done?u:n,s}}}function Sr(e){var t=e.keyframes,n=e.velocity,r=void 0===n?0:n,i=e.power,a=void 0===i?.8:i,o=e.timeConstant,u=void 0===o?325:o,s=e.bounceDamping,c=void 0===s?10:s,l=e.bounceStiffness,f=void 0===l?500:l,h=e.modifyTarget,d=e.min,p=e.max,v=e.restDelta,m=void 0===v?.5:v,y=e.restSpeed,g=t[0],k={done:!1,value:g},b=function(e){return void 0===d?p:void 0===p||Math.abs(d-e)<Math.abs(p-e)?d:p},w=a*r,x=g+w,_=void 0===h?x:h(x);_!==x&&(w=_-g);var E,T,S=function(e){return-w*Math.exp(-e/u)},I=function(e){return _+S(e)},C=function(e){var t=S(e),n=I(e);k.done=Math.abs(t)<=m,k.value=k.done?_:n},A=function(e){(function(e){return void 0!==d&&e<d||void 0!==p&&e>p})(k.value)&&(E=e,T=Tr({keyframes:[k.value,b(k.value)],velocity:hr(I,e,k.value),damping:c,stiffness:f,restDelta:m,restSpeed:y}))};return A(0),{calculatedDuration:null,next:function(e){var t=!1;return T||void 0!==E||(t=!0,C(e),A(e)),void 0!==E&&e>E?T.next(e-E):(!t&&C(e),k)}}}var Ir=function(e){var t=function(t){var n=t.timestamp;return e(n)};return{start:function(){return g.update(t,!0)},stop:function(){return k(t)},now:function(){return b.isProcessing?b.timestamp:performance.now()}}},Cr=2e4;function Ar(e){for(var t=0,n=e.next(t);!n.done&&t<Cr;)t+=50,n=e.next(t);return t>=Cr?1/0:t}var Pr=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],Nr={decay:Sr,inertia:Sr,tween:cr,keyframes:cr,spring:Tr};function Rr(e){var t,n,r,i=e.autoplay,a=void 0===i||i,o=e.delay,u=void 0===o?0:o,s=e.driver,c=void 0===s?Ir:s,l=e.keyframes,h=e.type,d=void 0===h?"keyframes":h,p=e.repeat,v=void 0===p?0:p,m=e.repeatDelay,y=void 0===m?0:m,g=e.repeatType,k=void 0===g?"loop":g,b=e.onPlay,w=e.onStop,x=e.onComplete,_=e.onUpdate,E=tt(e,Pr),T=1,S=!1,I=function(){n=new Promise((function(e){t=e}))};I();var C,A=Nr[d]||cr;A!==cr&&"number"!==typeof l[0]&&(C=ur([0,100],l,{clamp:!1}),l=[0,100]);var P,N=A(W(W({},E),{},{keyframes:l}));"mirror"===k&&(P=A(W(W({},E),{},{keyframes:f(l).reverse(),velocity:-(E.velocity||0)})));var R="idle",D=null,O=null,L=null;null===N.calculatedDuration&&v&&(N.calculatedDuration=Ar(N));var M=N.calculatedDuration,F=1/0,U=1/0;null!==M&&(U=(F=M+y)*(v+1)-y);var V=0,j=function(e){if(null!==O){T>0&&(O=Math.min(O,e)),T<0&&(O=Math.min(e-U/T,O));var t=(V=null!==D?D:Math.round(e-O)*T)-u*(T>=0?1:-1),n=T>=0?t<0:t>U;V=Math.max(t,0),"finished"===R&&null===D&&(V=U);var r=V,i=N;if(v){var a=V/F,o=Math.floor(a),s=a%1;!s&&a>=1&&(s=1),1===s&&o--,o=Math.min(o,v+1);var c=Boolean(o%2);c&&("reverse"===k?(s=1-s,y&&(s-=y/F)):"mirror"===k&&(i=P));var f=Ce(0,1,s);V>U&&(f="reverse"===k&&c?1:0),r=f*F}var h=n?{done:!1,value:l[0]}:i.next(r);C&&(h.value=C(h.value));var d=h.done;n||null===M||(d=T>=0?V>=U:V<=0);var p=null===D&&("finished"===R||"running"===R&&d);return _&&_(h.value),p&&q(),h}},B=function(){r&&r.stop(),r=void 0},z=function(){R="idle",B(),t(),I(),O=L=null},q=function(){R="finished",x&&x(),B(),t()},G=function(){if(!S){r||(r=c(j));var e=r.now();b&&b(),null!==D?O=e-D:O&&"finished"!==R||(O=e),"finished"===R&&I(),L=O,D=null,R="running",r.start()}};a&&G();var H={then:function(e,t){return n.then(e,t)},get time(){return on(V)},set time(e){e=an(e),V=e,null===D&&r&&0!==T?O=r.now()-e/T:D=e},get duration(){var e=null===N.calculatedDuration?Ar(N):N.calculatedDuration;return on(e)},get speed(){return T},set speed(e){e!==T&&r&&(T=e,H.time=on(V))},get state(){return R},play:G,pause:function(){R="paused",D=V},stop:function(){S=!0,"idle"!==R&&(R="idle",w&&w(),z())},cancel:function(){null!==L&&j(L),z()},complete:function(){R="finished"},sample:function(e){return O=0,j(e)}};return H}var Dr=["onUpdate","onComplete"],Or=function(e){var t;return function(){return void 0===t&&(t=e()),t}}((function(){return Object.hasOwnProperty.call(Element.prototype,"animate")})),Lr=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Mr(e,t,n){n.onUpdate;var r=n.onComplete,i=tt(n,Dr);if(!(Or()&&Lr.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;var a,o,u=!1,s=function(){o=new Promise((function(e){a=e}))};s();var c=i.keyframes,l=i.duration,f=void 0===l?300:l,h=i.ease,d=i.times;if(function(e,t){return"spring"===t.type||"backgroundColor"===e||!cn(t.ease)}(t,i)){for(var p=Rr(W(W({},i),{},{repeat:0,delay:0})),m={done:!1,value:c[0]},y=[],b=0;!m.done&&b<2e4;)m=p.sample(b),y.push(m.value),b+=10;d=void 0,c=y,f=b-10,h="linear"}var w=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.delay,a=void 0===i?0:i,o=r.duration,u=r.repeat,s=void 0===u?0:u,c=r.repeatType,l=void 0===c?"loop":c,f=r.ease,h=r.times,d=H({},t,n);h&&(d.offset=h);var p=hn(f);return Array.isArray(p)&&(d.easing=p),e.animate(d,{delay:a,duration:o,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:"reverse"===l?"alternate":"normal"})}(e.owner.current,t,c,W(W({},i),{},{duration:f,ease:h,times:d})),x=function(){return w.cancel()},_=function(){g.update(x),a(),s()};return w.onfinish=function(){e.set(function(e,t){var n=t.repeat,r=t.repeatType;return e[n&&"loop"!==(void 0===r?"loop":r)&&n%2===1?0:e.length-1]}(c,i)),r&&r(),_()},{then:function(e,t){return o.then(e,t)},attachTimeline:function(e){return w.timeline=e,w.onfinish=null,v},get time(){return on(w.currentTime||0)},set time(e){w.currentTime=an(e)},get speed(){return w.playbackRate},set speed(e){w.playbackRate=e},get duration(){return on(f)},play:function(){u||(w.play(),k(x))},pause:function(){return w.pause()},stop:function(){if(u=!0,"idle"!==w.playState){var t=w.currentTime;if(t){var n=Rr(W(W({},i),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}_()}},complete:function(){return w.finish()},cancel:_}}var Fr={type:"spring",stiffness:500,damping:25,restSpeed:10},Ur={type:"keyframes",duration:.8},Vr={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jr=function(e,t){var n=t.keyframes;return n.length>2?Ur:ke.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Fr:Vr},Br=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Jn.test(t)&&"0"!==t||t.startsWith("url(")))},zr=new Set(["brightness","contrast","saturate","opacity"]);function qr(e){var t=c(e.slice(0,-1).split("("),2),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=c(r.match(De)||[],1)[0];if(!i)return e;var a=r.replace(i,""),o=zr.has(n)?1:0;return i!==r&&(o*=100),n+"("+o+a+")"}var Gr=/([a-z-]*)\(.*?\)/g,Hr=W(W({},Jn),{},{getAnimatableNone:function(e){var t=e.match(Gr);return t?t.map(qr).join(" "):e}}),Kr=W(W({},He),{},{color:Fn,backgroundColor:Fn,outlineColor:Fn,fill:Fn,stroke:Fn,borderColor:Fn,borderTopColor:Fn,borderRightColor:Fn,borderBottomColor:Fn,borderLeftColor:Fn,filter:Hr,WebkitFilter:Hr}),Wr=function(e){return Kr[e]};function Qr(e,t){var n=Wr(e);return n!==Hr&&(n=Jn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var Yr=function(e){return/^0[^.\s]+$/.test(e)};function Xr(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Yr(e):void 0}var $r=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Jr(e,t){return e[t]||e.default||e}var Zr=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){var a=Jr(r,e)||{},o=a.delay||r.delay||0,u=r.elapsed,s=void 0===u?0:u;s-=an(o);var c=function(e,t,n,r){var i,a=Br(t,n);i=Array.isArray(n)?f(n):[null,n];for(var o=void 0!==r.from?r.from:e.get(),u=void 0,s=[],c=0;c<i.length;c++)null===i[c]&&(i[c]=0===c?o:i[c-1]),Xr(i[c])&&s.push(c),"string"===typeof i[c]&&"none"!==i[c]&&"0"!==i[c]&&(u=i[c]);if(a&&s.length&&u)for(var l=0;l<s.length;l++)i[s[l]]=Qr(t,u);return i}(t,e,n,a),l=c[0],h=c[c.length-1],d=Br(e,l),p=Br(e,h);B(d===p,"You are trying to animate ".concat(e,' from "').concat(l,'" to "').concat(h,'". ').concat(l," is not an animatable value - to enable this animation set ").concat(l," to a value animatable to ").concat(h," via the `style` property."));var m=W(W({keyframes:c,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-s,onUpdate:function(e){t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:function(){i(),a.onComplete&&a.onComplete()}});if(function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from,e.elapsed;var t=tt(e,$r);return!!Object.keys(t).length}(a)||(m=W(W({},m),jr(e,m))),m.duration&&(m.duration=an(m.duration)),m.repeatDelay&&(m.repeatDelay=an(m.repeatDelay)),!d||!p||un||!1===a.type)return function(e){var t=e.keyframes,n=e.delay,r=e.onUpdate,i=e.onComplete,a=function(){return r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:v,pause:v,stop:v,then:function(e){return e(),Promise.resolve()},cancel:v,complete:v}};return n?Rr({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(un?W(W({},m),{},{delay:0}):m);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){var y=Mr(t,e,m);if(y)return y}return Rr(m)}};function ei(e){return Boolean(we(e)&&e.add)}var ti=function(e){return/^\-?\d*\.?\d+$/.test(e)};function ni(e,t){-1===e.indexOf(t)&&e.push(t)}function ri(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var ii=function(){function e(){T(this,e),this.subscriptions=[]}return A(e,[{key:"add",value:function(e){var t=this;return ni(this.subscriptions,e),function(){return ri(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}(),ai={current:void 0},oi=function(){function e(t){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(this,e),this.version="10.16.1",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.prev=r.current,r.current=e;var n=b.delta,i=b.timestamp;r.lastUpdated!==i&&(r.timeDelta=n,r.lastUpdated=i,g.postRender(r.scheduleVelocityCheck)),r.prev!==r.current&&r.events.change&&r.events.change.notify(r.current),r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()),t&&r.events.renderRequest&&r.events.renderRequest.notify(r.current)},this.scheduleVelocityCheck=function(){return g.postRender(r.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==r.lastUpdated&&(r.prev=r.current,r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=i.owner}return A(e,[{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){var n=this;this.events[e]||(this.events[e]=new ii);var r=this.events[e].add(t);return"change"===e?function(){r(),g.read((function(){n.events.change.getSize()||n.stop()}))}:r}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"setWithVelocity",value:function(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}},{key:"jump",value:function(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"get",value:function(){return ai.current&&ai.current.push(this),this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?lr(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.animation=e(n),t.events.animationStart&&t.events.animationStart.notify()})).then((function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()}))}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),e}();function ui(e,t){return new oi(e,t)}var si=function(e){return function(t){return t.test(e)}},ci=[Ae,je,Ve,Ue,ze,Be,{test:function(e){return"auto"===e},parse:function(e){return e}}],li=function(e){return ci.find(si(e))},fi=[].concat(f(ci),[Fn,Jn]),hi=function(e){return fi.find(si(e))},di=["transitionEnd","transition"];function pi(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ui(n))}function vi(e,t){var n=nn(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i,o=(r.transition,tt(r,di));for(var u in o=W(W({},o),a)){pi(e,u,bt(o[u]))}}function mi(e,t){if(t)return(t[e]||t.default||t).from}var yi=["transition","transitionEnd"];function gi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.delay,i=void 0===r?0:r,a=n.transitionOverride,o=n.type,u=e.makeTargetAnimatable(t),s=u.transition,c=void 0===s?e.getDefaultTransition():s,l=u.transitionEnd,f=tt(u,yi),h=e.getValue("willChange");a&&(c=a);var d=[],p=o&&e.animationState&&e.animationState.getState()[o],v=function(t){var n=e.getValue(t),r=f[t];if(!n||void 0===r||p&&function(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}(p,t))return 1;var a=W({delay:i,elapsed:0},c);if(window.HandoffAppearAnimations&&!n.hasAnimated){var o=e.getProps()[rn];o&&(a.elapsed=window.HandoffAppearAnimations(o,t,n,g))}n.start(Zr(t,n,r,e.shouldReduceMotion&&ke.has(t)?{type:!1}:a));var u=n.animation;ei(h)&&(h.add(t),u.then((function(){return h.remove(t)}))),d.push(u)};for(var m in f)v(m);return l&&Promise.all(d).then((function(){l&&vi(e,l)})),d}function ki(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=nn(e,t,n.custom),i=(r||{}).transition,a=void 0===i?e.getDefaultTransition()||{}:i;n.transitionOverride&&(a=n.transitionOverride);var o=r?function(){return Promise.all(gi(e,r,n))}:function(){return Promise.resolve()},u=e.variantChildren&&e.variantChildren.size?function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=a,o=i.delayChildren,u=void 0===o?0:o,s=i.staggerChildren,c=i.staggerDirection;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],u=(e.variantChildren.size-1)*r,s=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return u-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(bi).forEach((function(e,r){e.notify("AnimationStart",t),o.push(ki(e,t,W(W({},a),{},{delay:n+s(r)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(o)}(e,t,u+r,s,c,n)}:function(){return Promise.resolve()},s=a.when;if(s){var l=c("beforeChildren"===s?[o,u]:[u,o],2),f=l[0],h=l[1];return f().then((function(){return h()}))}return Promise.all([o(),u(n.delay)])}function bi(e,t){return e.sortNodePosition(t)}var wi=["transition","transitionEnd"],xi=f(ee).reverse(),_i=ee.length;function Ei(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var i=t.map((function(t){return ki(e,t,r)}));n=Promise.all(i)}else if("string"===typeof t)n=ki(e,t,r);else{var a="function"===typeof t?nn(e,t,r.custom):t;n=Promise.all(gi(e,a,r))}return n.then((function(){return e.notify("AnimationComplete",t)}))}(e,n,r)})))}}function Ti(e){var t=Ei(e),n={animate:Si(!0),whileInView:Si(),whileHover:Si(),whileTap:Si(),whileDrag:Si(),whileFocus:Si(),exit:Si()},r=!0,i=function(t,n){var r=nn(e,n);if(r){r.transition;var i=r.transitionEnd,a=tt(r,wi);t=W(W(W({},t),a),i)}return t};function a(a,o){for(var u=e.getProps(),s=e.getVariantContext(!0)||{},c=[],l=new Set,h={},d=1/0,p=function(){var t=xi[v],p=n[t],m=void 0!==u[t]?u[t]:s[t],y=J(m),g=t===o?p.isActive:null;!1===g&&(d=v);var k=m===s[t]&&m!==u[t]&&y;if(k&&r&&e.manuallyAnimateOnMount&&(k=!1),p.protectedKeys=W({},h),!p.isActive&&null===g||!m&&!p.prevProp||Z(m)||"boolean"===typeof m)return 1;var b=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!tn(t,e);return!1}(p.prevProp,m),w=b||t===o&&p.isActive&&!k&&y||v>d&&y,x=Array.isArray(m)?m:[m],_=x.reduce(i,{});!1===g&&(_={});var E=p.prevResolvedValues,T=void 0===E?{}:E,S=W(W({},T),_),I=function(e){w=!0,l.delete(e),p.needsAnimating[e]=!0};for(var C in S){var A=_[C],P=T[C];h.hasOwnProperty(C)||(A!==P?gt(A)&&gt(P)?!tn(A,P)||b?I(C):p.protectedKeys[C]=!0:void 0!==A?I(C):l.add(C):void 0!==A&&l.has(C)?I(C):p.protectedKeys[C]=!0)}p.prevProp=m,p.prevResolvedValues=_,p.isActive&&(h=W(W({},h),_)),r&&e.blockInitialAnimation&&(w=!1),w&&!k&&c.push.apply(c,f(x.map((function(e){return{animation:e,options:W({type:t},a)}}))))},v=0;v<_i;v++)p();if(l.size){var m={};l.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(m[t]=n)})),c.push({animation:m})}var y=Boolean(c.length);return r&&!1===u.initial&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var u=a(i,t);for(var s in n)n[s].protectedKeys={};return u},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function Si(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Ii=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),r=t.call(this,e),e.animationState||(e.animationState=Ti(e)),r}return A(n,[{key:"updateAnimationControlsSubscription",value:function(){var e=this.node.getProps().animate;this.unmount(),Z(e)&&(this.unmount=e.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){}}]),n}(Vt),Ci=0,Ai=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).id=Ci++,e}return A(n,[{key:"update",value:function(){var e=this;if(this.node.presenceContext){var t=this.node.presenceContext,n=t.isPresent,r=t.onExitComplete,i=t.custom,a=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&n!==a){var o=this.node.animationState.setActive("exit",!n,{custom:null!==i&&void 0!==i?i:this.node.getProps().custom});r&&!n&&o.then((function(){return r(e.id)}))}}}},{key:"mount",value:function(){var e=(this.node.presenceContext||{}).register;e&&(this.unmount=e(this.id))}},{key:"unmount",value:function(){}}]),n}(Vt),Pi={animation:{Feature:Ii},exit:{Feature:Ai}},Ni=function(e,t){return Math.abs(e-t)};var Ri=function(){function e(t,n){var r=this,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transformPagePoint;if(T(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=Li(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=function(e,t){var n=Ni(e.x,t.x),r=Ni(e.y,t.y);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=b.timestamp;r.history.push(W(W({},i),{},{timestamp:a}));var o=r.handlers,u=o.onStart,s=o.onMove;t||(u&&u(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),s&&s(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=Di(t,r.transformPagePoint),g.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){if(r.end(),r.lastMoveEvent&&r.lastMoveEventInfo){var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=Li("pointercancel"===e.type?r.lastMoveEventInfo:Di(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),a&&a(e,o)}},Ct(t)){this.handlers=n,this.transformPagePoint=i;var a=Di(At(t),this.transformPagePoint),o=a.point,u=b.timestamp;this.history=[W(W({},o),{},{timestamp:u})];var s=n.onSessionStart;s&&s(t,Li(a,this.history)),this.removeListeners=Dt(Nt(window,"pointermove",this.handlePointerMove),Nt(window,"pointerup",this.handlePointerUp),Nt(window,"pointercancel",this.handlePointerUp))}}return A(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),k(this.updatePoint)}}]),e}();function Di(e,t){return t?{point:t(e.point)}:e}function Oi(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Li(e,t){var n=e.point;return{point:n,delta:Oi(n,Fi(t)),offset:Oi(n,Mi(t)),velocity:Ui(t,.1)}}function Mi(e){return e[0]}function Fi(e){return e[e.length-1]}function Ui(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=Fi(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>an(t)));)n--;if(!r)return{x:0,y:0};var a=on(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Vi(e){return e.max-e.min}function ji(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Bi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Un(t.min,t.max,e.origin),e.scale=Vi(n)/Vi(t),(ji(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Un(n.min,n.max,e.origin)-e.originPoint,(ji(e.translate)||isNaN(e.translate))&&(e.translate=0)}function zi(e,t,n,r){Bi(e.x,t.x,n.x,r?r.originX:void 0),Bi(e.y,t.y,n.y,r?r.originY:void 0)}function qi(e,t,n){e.min=n.min+t.min,e.max=e.min+Vi(t)}function Gi(e,t,n){e.min=t.min-n.min,e.max=e.min+Vi(t)}function Hi(e,t,n){Gi(e.x,t.x,n.x),Gi(e.y,t.y,n.y)}function Ki(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Wi(e,t){var n=t.min-e.min,r=t.max-e.max;if(t.max-t.min<e.max-e.min){var i=[r,n];n=i[0],r=i[1]}return{min:n,max:r}}var Qi=.35;function Yi(e,t,n){return{min:Xi(e,t),max:Xi(e,n)}}function Xi(e,t){return"number"===typeof e?e:e[t]||0}var $i=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},Ji=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function Zi(e){return[e("x"),e("y")]}function ea(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function ta(e){return void 0===e||1===e}function na(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!ta(t)||!ta(n)||!ta(r)}function ra(e){return na(e)||ia(e)||e.z||e.rotate||e.rotateX||e.rotateY}function ia(e){return aa(e.x)||aa(e.y)}function aa(e){return e&&"0%"!==e}function oa(e,t,n){return n+t*(e-n)}function ua(e,t,n,r,i){return void 0!==i&&(e=oa(e,i,r)),oa(e,n,r)+t}function sa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=ua(e.min,t,n,r,i),e.max=ua(e.max,t,n,r,i)}function ca(e,t){var n=t.x,r=t.y;sa(e.x,n.translate,n.scale,n.originPoint),sa(e.y,r.translate,r.scale,r.originPoint)}function la(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function fa(e,t){e.min=e.min+t,e.max=e.max+t}function ha(e,t,n){var r=c(n,3),i=r[0],a=r[1],o=r[2],u=void 0!==t[o]?t[o]:.5,s=Un(e.min,e.max,u);sa(e,t[i],t[a],s,t.scale)}var da=["x","scaleX","originX"],pa=["y","scaleY","originY"];function va(e,t){ha(e.x,t,da),ha(e.y,t,pa)}function ma(e,t){return ea(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var ya=new WeakMap,ga=function(){function e(t){T(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ji(),this.visualElement=t}return A(e,[{key:"start",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).snapToCursor,r=void 0!==n&&n,i=this.visualElement.presenceContext;if(!i||!1!==i.isPresent){this.panSession=new Ri(e,{onSessionStart:function(e){t.stopAnimation(),r&&t.snapToCursor(At(e,"page").point)},onStart:function(e,n){var r=t.getProps(),i=r.drag,a=r.dragPropagation,o=r.onDragStart;if(!i||a||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=Ft(i),t.openGlobalLock)){t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),Zi((function(e){var n=t.getAxisMotionValue(e).get()||0;if(Ve.test(n)){var r=t.visualElement.projection;if(r&&r.layout){var i=r.layout.layoutBox[e];if(i)n=Vi(i)*(parseFloat(n)/100)}}t.originPoint[e]=n})),o&&g.update((function(){return o(e,n)}),!1,!0);var u=t.visualElement.animationState;u&&u.setActive("whileDrag",!0)}},onMove:function(e,n){var r=t.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,u=r.onDrag;if(i||t.openGlobalLock){var s=n.offset;if(a&&null===t.currentDirection)return t.currentDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==t.currentDirection&&o&&o(t.currentDirection));t.updateAxis("x",n.point,s),t.updateAxis("y",n.point,s),t.visualElement.render(),u&&u(e,n)}},onSessionEnd:function(e,n){return t.stop(e,n)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;i&&g.update((function(){return i(e,t)}))}}},{key:"cancel",value:function(){this.isDragging=!1;var e=this.visualElement,t=e.projection,n=e.animationState;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(e,t,n){var r=this.getProps().drag;if(n&&ka(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?Un(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Un(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&$(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:Ki(e.x,r,a),y:Ki(e.y,n,i)}}(i.layoutBox,n),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qi;return!1===e?e=0:!0===e&&(e=Qi),{x:Yi(e,"left","right"),y:Yi(e,"top","bottom")}}(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Zi((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!$(t))return!1;var r=t.current;z(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,n){var r=ma(e,n),i=t.scroll;return i&&(fa(r.x,i.offset.x),fa(r.y,i.offset.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:Wi(e.x,t.x),y:Wi(e.y,t.y)}}(i.layout.layoutBox,a);if(n){var u=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!u,u&&(o=ea(u))}return o}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,u=n.dragSnapToOrigin,s=n.onDragTransitionEnd,c=this.constraints||{},l=Zi((function(n){if(ka(n,r,t.currentDirection)){var s=c&&c[n]||{};u&&(s={min:0,max:0});var l=a?200:1e6,f=a?40:1e7,h=W(W({type:"inertia",velocity:i?e[n]:0,bounceStiffness:l,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10},o),s);return t.startAxisValueAnimation(n,h)}}));return Promise.all(l).then(s)}},{key:"startAxisValueAnimation",value:function(e,t){var n=this.getAxisMotionValue(e);return n.start(Zr(e,n,0,t))}},{key:"stopAnimation",value:function(){var e=this;Zi((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}},{key:"snapToCursor",value:function(e){var t=this;Zi((function(n){if(ka(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.layoutBox[n],o=a.min,u=a.max;i.set(e[n]-Un(o,u,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e=this;if(this.visualElement.current){var t=this.getProps(),n=t.drag,r=t.dragConstraints,i=this.visualElement.projection;if($(r)&&i&&this.constraints){this.stopAnimation();var a={x:0,y:0};Zi((function(t){var n=e.getAxisMotionValue(t);if(n){var r=n.get();a[t]=function(e,t){var n=.5,r=Vi(e),i=Vi(t);return i>r?n=ir(t.min,t.max-r,e.min):r>i&&(n=ir(e.min,e.max-i,t.min)),Ce(0,1,n)}({min:r,max:r},e.constraints[t])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Zi((function(t){if(ka(t,n,null)){var r=e.getAxisMotionValue(t),i=e.constraints[t],o=i.min,u=i.max;r.set(Un(o,u,a[t]))}}))}}}},{key:"addListeners",value:function(){var e=this;if(this.visualElement.current){ya.set(this.visualElement,this);var t=Nt(this.visualElement.current,"pointerdown",(function(t){var n=e.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),n=function(){$(e.getProps().dragConstraints)&&(e.constraints=e.resolveRefConstraints())},r=this.visualElement.projection,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();var a=It(window,"resize",(function(){return e.scalePositionWithinConstraints()})),o=r.addEventListener("didUpdate",(function(t){var n=t.delta,r=t.hasLayoutChanged;e.isDragging&&r&&(Zi((function(t){var r=e.getAxisMotionValue(t);r&&(e.originPoint[t]+=n[t].translate,r.set(r.get()+n[t].translate))})),e.visualElement.render())}));return function(){a(),t(),i(),o&&o()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,u=e.dragConstraints,s=void 0!==u&&u,c=e.dragElastic,l=void 0===c?Qi:c,f=e.dragMomentum,h=void 0===f||f;return W(W({},e),{},{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:s,dragElastic:l,dragMomentum:h})}}]),e}();function ka(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var ba=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this,e)).removeGroupControls=v,r.removeListeners=v,r.controls=new ga(e),r}return A(n,[{key:"mount",value:function(){var e=this.node.getProps().dragControls;e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||v}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),n}(Vt),wa=function(e){return function(t,n){e&&g.update((function(){return e(t,n)}))}},xa=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).removePointerDownListener=v,e}return A(n,[{key:"onPointerDown",value:function(e){this.session=new Ri(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}},{key:"createPanHandlers",value:function(){var e=this,t=this.node.getProps(),n=t.onPanSessionStart,r=t.onPanStart,i=t.onPan,a=t.onPanEnd;return{onSessionStart:wa(n),onStart:wa(r),onMove:i,onEnd:function(t,n){delete e.session,a&&g.update((function(){return a(t,n)}))}}}},{key:"mount",value:function(){var e=this;this.removePointerDownListener=Nt(this.node.current,"pointerdown",(function(t){return e.onPointerDown(t)}))}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),n}(Vt);var _a={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ea(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Ta={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!je.test(e))return e;e=parseFloat(e)}var n=Ea(e,t.target.x),r=Ea(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Sa={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,a=Jn.parse(e);if(a.length>5)return i;var o=Jn.createTransformer(e),u="number"!==typeof a[0]?1:0,s=r.x.scale*n.x,c=r.y.scale*n.y;a[0+u]/=s,a[1+u]/=c;var l=Un(s,c,.5);return"number"===typeof a[2+u]&&(a[2+u]/=l),"number"===typeof a[3+u]&&(a[3+u]/=l),o(a)}},Ia=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,u=r.projection;e=Aa,Object.assign(ye,e),u&&(i.group&&i.group.add(u),a&&a.register&&o&&a.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",(function(){t.safeToRemove()})),u.setOptions(W(W({},u.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),_a.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,u=i.projection;return u?(u.isPresent=o,a||e.layoutDependency!==r||void 0===r?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||g.postRender((function(){var e=u.getStack();e&&e.members.length||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.visualElement.projection;t&&(t.root.didUpdate(),queueMicrotask((function(){!t.currentAnimation&&t.isLead()&&e.safeToRemove()})))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;e&&e()}},{key:"render",value:function(){return null}}]),n}(t.Component);function Ca(e){var n=function(){var e=(0,t.useContext)(_);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=(0,t.useId)();return(0,t.useEffect)((function(){return i(a)}),[]),!n&&r?[!1,function(){return r&&r(a)}]:[!0]}(),r=c(n,2),i=r[0],a=r[1],o=(0,t.useContext)(j);return t.createElement(Ia,W(W({},e),{},{layoutGroup:o,switchLayoutGroup:(0,t.useContext)(le),isPresent:i,safeToRemove:a}))}var Aa={borderRadius:W(W({},Ta),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ta,borderTopRightRadius:Ta,borderBottomLeftRadius:Ta,borderBottomRightRadius:Ta,boxShadow:Sa},Pa=["TopLeft","TopRight","BottomLeft","BottomRight"],Na=Pa.length,Ra=function(e){return"string"===typeof e?parseFloat(e):e},Da=function(e){return"number"===typeof e||je.test(e)};function Oa(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var La=Fa(0,.5,En),Ma=Fa(.5,.95,v);function Fa(e,t,n){return function(r){return r<e?0:r>t?1:n(ir(e,t,r))}}function Ua(e,t){e.min=t.min,e.max=t.max}function Va(e,t){Ua(e.x,t.x),Ua(e.y,t.y)}function ja(e,t,n,r,i){return e=oa(e-=t,1/n,r),void 0!==i&&(e=oa(e,1/i,r)),e}function Ba(e,t,n,r,i){var a=c(n,3),o=a[0],u=a[1],s=a[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(Ve.test(t)&&(t=parseFloat(t),t=Un(o.min,o.max,t/100)-o.min),"number"===typeof t){var u=Un(a.min,a.max,r);e===a&&(u-=t),e.min=ja(e.min,t,n,u,i),e.max=ja(e.max,t,n,u,i)}}(e,t[o],t[u],t[s],t.scale,r,i)}var za=["x","scaleX","originX"],qa=["y","scaleY","originY"];function Ga(e,t,n,r){Ba(e.x,t,za,n?n.x:void 0,r?r.x:void 0),Ba(e.y,t,qa,n?n.y:void 0,r?r.y:void 0)}function Ha(e){return 0===e.translate&&1===e.scale}function Ka(e){return Ha(e.x)&&Ha(e.y)}function Wa(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Qa(e){return Vi(e.x)/Vi(e.y)}var Ya=function(){function e(){T(this,e),this.members=[]}return A(e,[{key:"add",value:function(e){ni(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(ri(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n=this.lead;e!==n&&(this.prevLead=n,this.lead=e,e.show(),n&&(n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&n.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t=e.options,n=e.resumingFrom;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function Xa(e,t,n){var r="",i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(r="translate3d(".concat(i,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){var o=n.rotate,u=n.rotateX,s=n.rotateY;o&&(r+="rotate(".concat(o,"deg) ")),u&&(r+="rotateX(".concat(u,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) "))}var c=e.x.scale*t.x,l=e.y.scale*t.y;return 1===c&&1===l||(r+="scale(".concat(c,", ").concat(l,")")),r||"none"}var $a=function(e,t){return e.depth-t.depth},Ja=function(){function e(){T(this,e),this.children=[],this.isDirty=!1}return A(e,[{key:"add",value:function(e){ni(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){ri(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort($a),this.isDirty=!1,this.children.forEach(e)}}]),e}();var Za=["","X","Y","Z"],eo=0,to={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function no(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();T(this,e),this.id=eo++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=function(){t.isUpdating&&(t.isUpdating=!1,t.clearAllSnapshots())},this.updateProjection=function(){var e;to.totalNodes=to.resolvedTargetDeltas=to.recalculatedProjection=0,t.nodes.forEach(ao),t.nodes.forEach(ho),t.nodes.forEach(po),t.nodes.forEach(oo),e=to,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=i?i.root||i:this,this.path=i?[].concat(f(i.path),[i]):[],this.parent=i,this.depth=i?i.depth+1:0;for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ja)}return A(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new ii),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify.apply(t,r)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"mount",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(!this.instance){var i;this.isSVG=(i=e)instanceof SVGElement&&"svg"!==i.tagName,this.instance=e;var a=this.options,o=a.layoutId,u=a.layout,s=a.visualElement;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(u||o)&&(this.isLayoutDirty=!0),t){var c,l=function(){return n.root.updateBlockedByResize=!1};t(e,(function(){n.root.updateBlockedByResize=!0,c&&c(),c=function(e,t){var n=performance.now(),r=function r(i){var a=i.timestamp-n;a>=t&&(k(r),e(a-t))};return g.read(r,!0),function(){return k(r)}}(l,250),_a.hasAnimatedSinceResize&&(_a.hasAnimatedSinceResize=!1,n.nodes.forEach(fo))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&s&&(o||u)&&this.addEventListener("didUpdate",(function(e){var t=e.delta,r=e.hasLayoutChanged,i=e.hasRelativeTargetChanged,a=e.layout;if(n.isTreeAnimationBlocked())return n.target=void 0,void(n.relativeTarget=void 0);var o=n.options.transition||s.getDefaultTransition()||bo,u=s.getProps(),c=u.onLayoutAnimationStart,l=u.onLayoutAnimationComplete,f=!n.targetLayout||!Wa(n.targetLayout,a)||i,h=!r&&i;if(n.options.layoutRoot||n.resumeFrom&&n.resumeFrom.instance||h||r&&(f||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0),n.setAnimationOrigin(t,h);var d=W(W({},Jr(o,"layout")),{},{onPlay:c,onComplete:l});(s.shouldReduceMotion||n.options.layoutRoot)&&(d.delay=0,d.type=!1),n.startAnimation(d)}else r||fo(n),n.isLead()&&n.options.onExitComplete&&n.options.onExitComplete();n.targetLayout=a}))}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,k(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vo),this.animationId++)}},{key:"getTransformTemplate",value:function(){var e=this.options.visualElement;return e&&e.getProps().transformTemplate}},{key:"willUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())this.options.onExitComplete&&this.options.onExitComplete();else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var t=0;t<this.path.length;t++){var n=this.path[t];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}var r=this.options,i=r.layoutId,a=r.layout;if(void 0!==i||a){var o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}}},{key:"update",value:function(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(so);this.isUpdating||this.nodes.forEach(co),this.isUpdating=!1,this.nodes.forEach(lo),this.nodes.forEach(ro),this.nodes.forEach(io),this.clearAllSnapshots();var e=performance.now();b.delta=Ce(0,1e3/60,e-b.timestamp),b.timestamp=e,b.isProcessing=!0,w.update.process(b),w.preRender.process(b),w.render.process(b),b.isProcessing=!1}},{key:"didUpdate",value:function(){var e=this;this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((function(){return e.update()})))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(uo),this.sharedNodes.forEach(mo)}},{key:"scheduleUpdateProjection",value:function(){g.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;g.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ji(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var n=this.options.visualElement;n&&n.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}},{key:"resetTransform",value:function(){if(a){var e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Ka(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||ra(this.latestValues)||i)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.measurePageBox(),r=this.removeElementScroll(n);return t&&(r=this.removeTransform(r)),_o((e=r).x),_o(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return Ji();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(fa(t.x,n.offset.x),fa(t.y,n.offset.y)),t}},{key:"removeElementScroll",value:function(e){var t=Ji();Va(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){Va(t,e);var o=this.root.scroll;o&&(fa(t.x,-o.offset.x),fa(t.y,-o.offset.y))}fa(t.x,i.offset.x),fa(t.y,i.offset.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ji();Va(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&va(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),ra(i.latestValues)&&va(n,i.latestValues)}return ra(this.latestValues)&&va(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t=Ji();Va(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n];if(r.instance&&ra(r.latestValues)){na(r.latestValues)&&r.updateSnapshot();var i=Ji();Va(i,r.measurePageBox()),Ga(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}}return ra(this.latestValues)&&Ga(t,this.latestValues),t}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(e){this.options=W(W(W({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==b.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);var r=Boolean(this.resumingFrom)||this!==n;if(!!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget)){var i=this.options,a=i.layout,o=i.layoutId;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=b.timestamp,!this.targetDelta&&!this.relativeTarget){var u=this.getClosestProjectingParent();u&&u.layout&&1!==this.animationProgress?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ji(),this.relativeTargetOrigin=Ji(),Hi(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),Va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,c,l;if(this.target||(this.target=Ji(),this.targetWithTransforms=Ji()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,c=this.relativeTarget,l=this.relativeParent.target,qi(s.x,c.x,l.x),qi(s.y,c.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Va(this.target,this.layout.layoutBox),ca(this.target,this.targetDelta)):Va(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var f=this.getClosestProjectingParent();f&&Boolean(f.resumingFrom)===Boolean(this.resumingFrom)&&!f.options.layoutScroll&&f.target&&1!==this.animationProgress?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ji(),this.relativeTargetOrigin=Ji(),Hi(this.relativeTargetOrigin,this.target,f.target),Va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}to.resolvedTargetDeltas++}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!na(this.parent.latestValues)&&!ia(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"calcProjection",value:function(){var e,t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t,r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===b.timestamp&&(r=!1),!r){var i=this.options,a=i.layout,o=i.layoutId;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(a||o)){Va(this.layoutCorrected,this.layout.layoutBox);var u=this.treeScale.x,s=this.treeScale.y;!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.length;if(i){var a,o;t.x=t.y=1;for(var u=0;u<i;u++){o=(a=n[u]).projectionDelta;var s=a.instance;s&&s.style&&"contents"===s.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&va(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,ca(e,o)),r&&ra(a.latestValues)&&va(e,a.latestValues))}t.x=la(t.x),t.y=la(t.y)}}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);var c=t.target;if(c){this.projectionDelta||(this.projectionDelta=$i(),this.projectionDeltaWithTransform=$i());var l=this.projectionTransform;zi(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.projectionTransform=Xa(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===u&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),to.recalculatedProjection++}else this.projectionTransform&&(this.projectionDelta=$i(),this.projectionTransform="none",this.scheduleRender())}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){var t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.snapshot,i=r?r.latestValues:{},a=W({},this.latestValues),o=$i();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;var u,s=Ji(),c=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),f=!l||l.members.length<=1,h=Boolean(c&&!f&&!0===this.options.crossfade&&!this.path.some(ko));this.animationProgress=0,this.mixTargetDelta=function(n){var r=n/1e3;yo(o.x,e.x,r),yo(o.y,e.y,r),t.setTargetDelta(o),t.relativeTarget&&t.relativeTargetOrigin&&t.layout&&t.relativeParent&&t.relativeParent.layout&&(Hi(s,t.layout.layoutBox,t.relativeParent.layout.layoutBox),function(e,t,n,r){go(e.x,t.x,n.x,r),go(e.y,t.y,n.y,r)}(t.relativeTarget,t.relativeTargetOrigin,s,r),u&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(t.relativeTarget,u)&&(t.isProjectionDirty=!1),u||(u=Ji()),Va(u,t.relativeTarget)),c&&(t.animationValues=a,function(e,t,n,r,i,a){i?(e.opacity=Un(0,void 0!==n.opacity?n.opacity:1,La(r)),e.opacityExit=Un(void 0!==t.opacity?t.opacity:1,0,Ma(r))):a&&(e.opacity=Un(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(var o=0;o<Na;o++){var u="border".concat(Pa[o],"Radius"),s=Oa(t,u),c=Oa(n,u);void 0===s&&void 0===c||(s||(s=0),c||(c=0),0===s||0===c||Da(s)===Da(c)?(e[u]=Math.max(Un(Ra(s),Ra(c),r),0),(Ve.test(c)||Ve.test(s))&&(e[u]+="%")):e[u]=c)}(t.rotate||n.rotate)&&(e.rotate=Un(t.rotate||0,n.rotate||0,r))}(a,i,t.latestValues,r,h,f)),t.root.scheduleUpdateProjection(),t.scheduleRender(),t.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}},{key:"startAnimation",value:function(e){var t=this;this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(k(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=g.update((function(){_a.hasAnimatedSinceResize=!0,t.currentAnimation=function(e,t,n){var r=we(e)?e:ui(e);return r.start(Zr("",r,t,n)),r.animation}(0,1e3,W(W({},e),{},{onUpdate:function(n){t.mixTargetDelta(n),e.onUpdate&&e.onUpdate(n)},onComplete:function(){e.onComplete&&e.onComplete(),t.completeAnimation()}})),t.resumingFrom&&(t.resumingFrom.currentAnimation=t.currentAnimation),t.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;if(t&&n&&r){if(this!==e&&this.layout&&r&&Eo(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Ji();var a=Vi(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+a;var o=Vi(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+o}Va(t,n),va(t,i),zi(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}},{key:"registerSharedNode",value:function(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Ya),this.sharedNodes.get(e).add(t);var n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,r=e.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,r),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,n=e.latestValues;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),t){for(var r={},i=0;i<Za.length;i++){var a="rotate"+Za[i];n[a]&&(r[a]=n[a],e.setStaticValue(a,0))}for(var o in e.render(),r)e.setStaticValue(o,r[o]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if(!this.instance||this.isSVG)return r;if(!this.isVisible)return{visibility:"hidden"};r.visibility="";var i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=wt(n.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var o={};return this.options.layoutId&&(o.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,o.pointerEvents=wt(n.pointerEvents)||""),this.hasProjected&&!ra(this.latestValues)&&(o.transform=i?i({},""):"none",this.hasProjected=!1),o}var u=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=Xa(this.projectionDeltaWithTransform,this.treeScale,u),i&&(r.transform=i(u,r.transform));var s=this.projectionDelta,c=s.x,l=s.y;for(var f in r.transformOrigin="".concat(100*c.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?r.opacity=a===this?null!==(t=null!==(e=u.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==t?t:1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:r.opacity=a===this?void 0!==u.opacity?u.opacity:"":void 0!==u.opacityExit?u.opacityExit:0,ye)if(void 0!==u[f]){var h=ye[f],d=h.correct,p=h.applyTo,v="none"===r.transform?u[f]:d(u[f],a);if(p)for(var m=p.length,y=0;y<m;y++)r[p[y]]=v;else r[f]=v}return this.options.layoutId&&(r.pointerEvents=a===this?wt(n.pointerEvents)||"":"none"),r}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(so),this.root.sharedNodes.clear()}}]),e}()}function ro(e){e.updateLayout()}function io(e){var t,n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){var r=e.layout,i=r.layoutBox,a=r.measuredBox,o=e.options.animationType,u=n.source!==e.layout.source;"size"===o?Zi((function(e){var t=u?n.measuredBox[e]:n.layoutBox[e],r=Vi(t);t.min=i[e].min,t.max=t.min+r})):Eo(o,n.layoutBox,i)&&Zi((function(t){var r=u?n.measuredBox[t]:n.layoutBox[t],a=Vi(i[t]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+a)}));var s=$i();zi(s,i,n.layoutBox);var c=$i();u?zi(c,e.applyTransform(a,!0),n.measuredBox):zi(c,i,n.layoutBox);var l=!Ka(s),f=!1;if(!e.resumeFrom){var h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){var d=h.snapshot,p=h.layout;if(d&&p){var v=Ji();Hi(v,n.layoutBox,d.layoutBox);var m=Ji();Hi(m,i,p.layoutBox),Wa(v,m)||(f=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:f})}else if(e.isLead()){var y=e.options.onExitComplete;y&&y()}e.options.transition=void 0}function ao(e){to.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function oo(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function uo(e){e.clearSnapshot()}function so(e){e.clearMeasurements()}function co(e){e.isLayoutDirty=!1}function lo(e){var t=e.options.visualElement;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fo(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ho(e){e.resolveTargetDelta()}function po(e){e.calcProjection()}function vo(e){e.resetRotation()}function mo(e){e.removeLeadSnapshot()}function yo(e,t,n){e.translate=Un(t.translate,0,n),e.scale=Un(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function go(e,t,n,r){e.min=Un(t.min,n.min,r),e.max=Un(t.max,n.max,r)}function ko(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var bo={duration:.45,ease:[.4,0,.1,1]},wo=function(e){return"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e)},xo=wo("applewebkit/")&&!wo("chrome/")?Math.round:v;function _o(e){e.min=xo(e.min),e.max=xo(e.max)}function Eo(e,t,n){return"position"===e||"preserve-aspect"===e&&!ji(Qa(t),Qa(n),.2)}var To=no({attachResizeListener:function(e,t){return It(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),So={current:void 0},Io=no({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!So.current){var e=new To({});e.mount(window),e.setOptions({layoutScroll:!0}),So.current=e}return So.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),Co={pan:{Feature:xa},drag:{Feature:ba,ProjectionNode:Io,MeasureLayout:Ca}};var Ao=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var Po=4;function No(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;z(n<=Po,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var r=function(e){var t=Ao.exec(e);if(!t)return[,];var n=c(t,3);return[n[1],n[2]]}(e),i=c(r,2),a=i[0],o=i[1];if(a){var u=window.getComputedStyle(t).getPropertyValue(a);if(u){var s=u.trim();return ti(s)?parseFloat(s):s}return Se(o)?No(o,t,n+1):o}}function Ro(e,t,n){var r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};for(var a in n&&(n=W({},n)),e.values.forEach((function(e){var t=e.get();if(Se(t)){var n=No(t,i);n&&e.set(n)}})),r){var o=r[a];if(Se(o)){var u=No(o,i);u&&(r[a]=u,n||(n={}),void 0===n[a]&&(n[a]=o))}}return{target:r,transitionEnd:n}}var Do=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Oo=function(e){return Do.has(e)},Lo=function(e){return e===Ae||e===je},Mo=function(e,t){return parseFloat(e.split(", ")[t])},Fo=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return Mo(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?Mo(o[1],e):0}},Uo=new Set(["x","y","z"]),Vo=ge.filter((function(e){return!Uo.has(e)}));var jo={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:Fo(4,13),y:Fo(5,14)};jo.translateX=jo.x,jo.translateY=jo.y;var Bo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=W({},t),r=W({},r);var i=Object.keys(t).filter(Oo),a=[],o=!1,u=[];if(i.forEach((function(i){var s=e.getValue(i);if(e.hasValue(i)){var c,l=n[i],f=li(l),h=t[i];if(gt(h)){var d=h.length,p=null===h[0]?1:0;l=h[p],f=li(l);for(var v=p;v<d&&null!==h[v];v++)c?z(li(h[v])===c,"All keyframes must be of the same type"):(c=li(h[v]),z(c===f||Lo(f)&&Lo(c),"Keyframes must be of the same dimension as the current value"))}else c=li(h);if(f!==c)if(Lo(f)&&Lo(c)){var m=s.get();"string"===typeof m&&s.set(parseFloat(m)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&c===je&&(t[i]=h.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===l||0===h)?0===l?s.set(c.transform(l)):t[i]=f.transform(h):(o||(a=function(e){var t=[];return Vo.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),o=!0),u.push(i),r[i]=void 0!==r[i]?r[i]:t[i],s.jump(h))}})),u.length){var s=u.indexOf("height")>=0?window.pageYOffset:null,l=function(e,t,n){var r=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),o=a.display,u={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){u[e]=jo[e](r,a)})),t.render();var s=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);r&&r.jump(u[n]),e[n]=jo[n](s,a)})),e}(t,e,u);return a.length&&a.forEach((function(t){var n=c(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.render(),h&&null!==s&&window.scrollTo({top:s}),{target:l,transitionEnd:r}}return{target:t,transitionEnd:r}};function zo(e,t,n,r){return function(e){return Object.keys(e).some(Oo)}(t)?Bo(e,t,n,r):{target:t,transitionEnd:r}}var qo={current:null},Go={current:!1};var Ho=new WeakMap,Ko=["willChange"],Wo=["children"],Qo=Object.keys(ue),Yo=Qo.length,Xo=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],$o=te.length,Jo=function(){function e(t){var n=this,r=t.parent,i=t.props,a=t.presenceContext,o=t.reducedMotionConfig,u=t.visualState,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return g.render(n.render,!1,!0)};var c=u.latestValues,l=u.renderState;this.latestValues=c,this.baseTarget=W({},c),this.initialValues=i.initial?W({},c):{},this.renderState=l,this.parent=r,this.props=i,this.presenceContext=a,this.depth=r?r.depth+1:0,this.reducedMotionConfig=o,this.options=s,this.isControllingVariants=ne(i),this.isVariantNode=re(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(r&&r.current);var f=this.scrapeMotionValuesFromProps(i,{}),h=f.willChange,d=tt(f,Ko);for(var p in d){var v=d[p];void 0!==c[p]&&we(v)&&(v.set(c[p],!1),ei(h)&&h.add(p))}}return A(e,[{key:"scrapeMotionValuesFromProps",value:function(e,t){return{}}},{key:"mount",value:function(e){var t=this;this.current=e,Ho.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((function(e,n){return t.bindToMotionValue(n,e)})),Go.current||function(){if(Go.current=!0,h)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return qo.current=e.matches};e.addListener(t),t()}else qo.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||qo.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){for(var e in Ho.delete(this.current),this.projection&&this.projection.unmount(),k(this.notifyUpdate),k(this.render),this.valueSubscriptions.forEach((function(e){return e()})),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(var t in this.features)this.features[t].unmount();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var n=this,r=ke.has(e),i=t.on("change",(function(t){n.latestValues[e]=t,n.props.onUpdate&&g.update(n.notifyUpdate,!1,!0),r&&n.projection&&(n.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(function(){i(),a()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,t,n,r){for(var i,a,o=this,u=(e.children,tt(e,Wo)),s=0;s<Yo;s++){var c=Qo[s],l=ue[c],f=l.isEnabled,h=l.Feature,d=l.ProjectionNode,p=l.MeasureLayout;d&&(i=d),f(u)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),p&&(a=p))}if(!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);var v=u.layoutId,m=u.layout,y=u.drag,g=u.dragConstraints,k=u.layoutScroll,b=u.layoutRoot;this.projection.setOptions({layoutId:v,layout:m,alwaysMeasureLayout:Boolean(y)||g&&$(g),visualElement:this,scheduleRender:function(){return o.scheduleRender()},animationType:"string"===typeof m?m:"both",initialPromotionConfig:r,layoutScroll:k,layoutRoot:b})}return a}},{key:"updateFeatures",value:function(){for(var e in this.features){var t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ji()}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"update",value:function(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(var n=0;n<Xo.length;n++){var r=Xo[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);var i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,n){var r=t.willChange;for(var i in t){var a=t[i],o=n[i];if(we(a))e.addValue(i,a),ei(r)&&r.add(i);else if(we(o))e.addValue(i,ui(a,{owner:e})),ei(r)&&r.remove(i);else if(o!==a)if(e.hasValue(i)){var u=e.getValue(i);!u.hasAnimated&&u.set(a)}else{var s=e.getStaticValue(i);e.addValue(i,ui(void 0!==s?s:a,{owner:e}))}}for(var c in n)void 0===t[c]&&e.removeValue(c);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){return this.props.variants?this.props.variants[e]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"getVariantContext",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){var e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}for(var t={},n=0;n<$o;n++){var r=te[n],i=this.props[r];(J(i)||!1===i)&&(t[r]=i)}return t}},{key:"addVariantChild",value:function(e){var t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),function(){return t.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}},{key:"removeValue",value:function(e){this.values.delete(e);var t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=ui(t,{owner:this}),this.addValue(e,n)),n}},{key:"readValue",value:function(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,n=this.props.initial,r="string"===typeof n||"object"===typeof n?null===(t=yt(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;var i=this.getBaseTargetFromProps(this.props,e);return void 0===i||we(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new ii),this.events[e].add(t)}},{key:"notify",value:function(e){if(this.events[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.events[e]).notify.apply(t,r)}}}]),e}(),Zo=["transition","transitionEnd"],eu=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){return e.style?e.style[t]:void 0}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,n){var r=e.transition,i=e.transitionEnd,a=tt(e,Zo),o=t.transformValues,u=function(e,t,n){var r={};for(var i in e){var a=mi(i,t);if(void 0!==a)r[i]=a;else{var o=n.getValue(i);o&&(r[i]=o.get())}}return r}(a,r||{},this);if(o&&(i&&(i=o(i)),a&&(a=o(a)),u&&(u=o(u))),n){!function(e,t,n){var r,i,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),o=a.length;if(o)for(var u=0;u<o;u++){var s=a[u],c=t[s],l=null;Array.isArray(c)&&(l=c[0]),null===l&&(l=null!==(i=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==i?i:t[s]),void 0!==l&&null!==l&&("string"===typeof l&&(ti(l)||Yr(l))?l=parseFloat(l):!hi(l)&&Jn.test(c)&&(l=Qr(s,c)),e.addValue(s,ui(l,{owner:e})),void 0===n[s]&&(n[s]=l),null!==l&&e.setBaseTarget(s,l))}}(this,a,u);var s=function(e,t,n,r){var i=Ro(e,t,r);return zo(e,t=i.target,n,r=i.transitionEnd)}(this,a,u,i);i=s.transitionEnd,a=s.target}return W({transition:r,transitionEnd:i},a)}}]),n}(Jo);var tu=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"readValueFromInstance",value:function(e,t){if(ke.has(t)){var n=Wr(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r)),a=(Te(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(e,t){return ma(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n,r){Ke(e,t,n,r.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return vt(e,t)}},{key:"handleChildMotionValue",value:function(){var e=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var t=this.props.children;we(t)&&(this.childSubscription=t.on("change",(function(t){e.current&&(e.current.textContent="".concat(t))})))}},{key:"renderInstance",value:function(e,t,n,r){ht(e,t,n,r)}}]),n}(eu);function nu(){return nu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},nu.apply(this,arguments)}var ru=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).isSVGTag=!1,e}return A(n,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){if(ke.has(t)){var n=Wr(t);return n&&n.default||0}return t=dt.has(t)?t:ft(t),e.getAttribute(t)}},{key:"measureInstanceViewportBox",value:function(){return Ji()}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return mt(e,t)}},{key:"build",value:function(e,t,n,r){ot(e,t,n,this.isSVGTag,r.transformTemplate)}},{key:"renderInstance",value:function(e,t,n,r){pt(e,t,0,r)}},{key:"mount",value:function(e){this.isSVGTag=st(e.tagName),nu(R(n.prototype),"mount",this).call(this,e)}}]),n}(eu),iu=function(e,t){return me(e)?new ru(t,{enableHardwareAcceleration:!1}):new tu(t,{enableHardwareAcceleration:!0})},au={layout:{ProjectionNode:Io,MeasureLayout:Ca}},ou=W(W(W(W({},Pi),en),Co),au),uu=pe((function(e,t){return function(e,t,n,r){var i=t.forwardMotionProps,a=void 0!==i&&i;return W(W({},me(e)?Tt:St),{},{preloadedFeatures:n,useRender:lt(a),createVisualElement:r,Component:e})}(e,t,ou,iu)}));function su(){su=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==S(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e||""===e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}throw new TypeError(S(e)+" is not iterable")}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function cu(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function lu(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){cu(a,r,i,o,u,"next",e)}function u(e){cu(a,r,i,o,u,"throw",e)}o(void 0)}))}}var fu=n.p+"static/media/google.b40778ce9db962e9de29649090e3d307.svg";function hu(e,t,n){return hu=D()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&P(i,n.prototype),i},hu.apply(null,arguments)}function du(e){var t="function"===typeof Map?new Map:void 0;return du=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return hu(e,arguments,R(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),P(r,e)},du(e)}var pu=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},vu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pu(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new mu;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},mu=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return A(n)}(du(Error)),yu=function(e){return function(e){var t=pu(e);return vu.encodeByteArray(t,!0)}(e).replace(/\./g,"")},gu=function(e){try{return vu.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ku(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&bu(n)&&(e[n]=ku(e[n],t[n]));return e}function bu(e){return"__proto__"!==e}var wu=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},xu=function(){try{return wu()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&gu(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},_u=function(){var e;return null===(e=xu())||void 0===e?void 0:e.config},Eu=function(){function e(){var t=this;T(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return A(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Tu(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yu(JSON.stringify({alg:"none",type:"JWT"})),yu(JSON.stringify(a)),""].join(".")}function Su(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Iu(){var e,t=null===(e=xu())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Cu(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Au(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Pu(){var e=Su();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Nu(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ru=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(O(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(O(a),Du.prototype.create),a}return A(n)}(du(Error)),Du=function(){function e(t,n,r){T(this,e),this.service=t,this.serviceName=n,this.errors=r}return A(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ou,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ru(n,a,t)}}]),e}();var Ou=/\{\$([^}]+)}/g;function Lu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Mu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Fu(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Uu(u)&&Uu(s)){if(!Fu(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Uu(e){return null!==e&&"object"===typeof e}function Vu(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ju(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Bu(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function zu(e,t){var n=new qu(e,t);return n.subscribe.bind(n)}var qu=function(){function e(t,n){var r=this;T(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return A(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=x(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Gu),void 0===r.error&&(r.error=Gu),void 0===r.complete&&(r.complete=Gu);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Gu(){}function Hu(e){return e&&e._delegate?e._delegate:e}var Ku=function(){function e(t,n,r){T(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return A(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Wu="[DEFAULT]",Qu=function(){function e(t,n){T(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return A(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Eu;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Wu})}catch(s){}var t,n=x(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wu;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(f(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),f(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wu;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wu;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=x(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(jV){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Wu?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(jV){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wu;return this.component?this.component.multipleInstances?e:Wu:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Yu,Xu,$u=function(){function e(t){T(this,e),this.name=t,this.providers=new Map}return A(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Qu(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ju=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Xu||(Xu={}));var Zu={debug:Xu.DEBUG,verbose:Xu.VERBOSE,info:Xu.INFO,warn:Xu.WARN,error:Xu.ERROR,silent:Xu.SILENT},es=Xu.INFO,ts=(H(Yu={},Xu.DEBUG,"log"),H(Yu,Xu.VERBOSE,"log"),H(Yu,Xu.INFO,"info"),H(Yu,Xu.WARN,"warn"),H(Yu,Xu.ERROR,"error"),Yu),ns=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ts[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},rs=function(){function e(t){T(this,e),this.name=t,this._logLevel=es,this._logHandler=ns,this._userLogHandler=null,Ju.push(this)}return A(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Xu))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Zu[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xu.DEBUG].concat(t)),this._logHandler.apply(this,[this,Xu.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xu.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Xu.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xu.INFO].concat(t)),this._logHandler.apply(this,[this,Xu.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xu.WARN].concat(t)),this._logHandler.apply(this,[this,Xu.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Xu.ERROR].concat(t)),this._logHandler.apply(this,[this,Xu.ERROR].concat(t))}}]),e}();var is,as,os=function(e,t){return t.some((function(t){return e instanceof t}))};var us=new WeakMap,ss=new WeakMap,cs=new WeakMap,ls=new WeakMap,fs=new WeakMap;var hs={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ss.get(e);if("objectStoreNames"===t)return e.objectStoreNames||cs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ds(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(as||(as=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ms(this),n),vs(us.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vs(e.apply(ms(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ms(this),t].concat(r));return cs.set(a,t.sort?t.sort():[t]),vs(a)}}function ps(e){return"function"===typeof e?ds(e):(e instanceof IDBTransaction&&function(e){if(!ss.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ss.set(e,t)}}(e),os(e,is||(is=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,hs):e)}function vs(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(vs(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&us.set(t,e)})).catch((function(){})),fs.set(t,e),t}(e);if(ls.has(e))return ls.get(e);var t=ps(e);return t!==e&&(ls.set(e,t),fs.set(t,e)),t}var ms=function(e){return fs.get(e)};var ys,gs,ks=["get","getKey","getAll","getAllKeys","count"],bs=["put","add","delete","clear"],ws=new Map;function xs(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ws.get(t))return ws.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=bs.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ks.includes(n))){var a=function(){var e=lu(su().mark((function e(t){var a,o,u,s,c,l,f=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ws.set(t,a),a}}}hs=function(e){return W(W({},e),{},{get:function(t,n,r){return xs(t,n)||e.get(t,n,r)},has:function(t,n){return!!xs(t,n)||e.has(t,n)}})}(hs);var _s=function(){function e(t){T(this,e),this.container=t}return A(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Es="@firebase/app",Ts="0.9.15",Ss=new rs("@firebase/app"),Is="[DEFAULT]",Cs=(H(ys={},Es,"fire-core"),H(ys,"@firebase/app-compat","fire-core-compat"),H(ys,"@firebase/analytics","fire-analytics"),H(ys,"@firebase/analytics-compat","fire-analytics-compat"),H(ys,"@firebase/app-check","fire-app-check"),H(ys,"@firebase/app-check-compat","fire-app-check-compat"),H(ys,"@firebase/auth","fire-auth"),H(ys,"@firebase/auth-compat","fire-auth-compat"),H(ys,"@firebase/database","fire-rtdb"),H(ys,"@firebase/database-compat","fire-rtdb-compat"),H(ys,"@firebase/functions","fire-fn"),H(ys,"@firebase/functions-compat","fire-fn-compat"),H(ys,"@firebase/installations","fire-iid"),H(ys,"@firebase/installations-compat","fire-iid-compat"),H(ys,"@firebase/messaging","fire-fcm"),H(ys,"@firebase/messaging-compat","fire-fcm-compat"),H(ys,"@firebase/performance","fire-perf"),H(ys,"@firebase/performance-compat","fire-perf-compat"),H(ys,"@firebase/remote-config","fire-rc"),H(ys,"@firebase/remote-config-compat","fire-rc-compat"),H(ys,"@firebase/storage","fire-gcs"),H(ys,"@firebase/storage-compat","fire-gcs-compat"),H(ys,"@firebase/firestore","fire-fst"),H(ys,"@firebase/firestore-compat","fire-fst-compat"),H(ys,"fire-js","fire-js"),H(ys,"firebase","fire-js-all"),ys),As=new Map,Ps=new Map;function Ns(e,t){try{e.container.addComponent(t)}catch(n){Ss.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Rs(e,t){e.container.addOrOverwriteComponent(t)}function Ds(e){var t=e.name;if(Ps.has(t))return Ss.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ps.set(t,e);var n,r=x(As.values());try{for(r.s();!(n=r.n()).done;){Ns(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Os(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ls(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Is;Os(e,t).clearInstance(n)}function Ms(){Ps.clear()}var Fs=(H(gs={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),H(gs,"bad-app-name","Illegal App name: '{$appName}"),H(gs,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),H(gs,"app-deleted","Firebase App named '{$appName}' already deleted"),H(gs,"no-options","Need to provide options, when not being deployed to hosting via source."),H(gs,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),H(gs,"invalid-log-argument","First argument to `onLog` must be null or a function."),H(gs,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),H(gs,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),H(gs,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),H(gs,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),gs),Us=new Du("app","Firebase",Fs),Vs=function(){function e(t,n,r){var i=this;T(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ku("app",(function(){return i}),"PUBLIC"))}return A(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}]),e}(),js="10.1.0";function Bs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Is,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Us.create("bad-app-name",{appName:String(i)});if(n||(n=_u()),!n)throw Us.create("no-options");var a=As.get(i);if(a){if(Fu(n,a.options)&&Fu(r,a.config))return a;throw Us.create("duplicate-app",{appName:i})}var o,u=new $u(i),s=x(Ps.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Vs(n,r,u);return As.set(i,l),l}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Is,t=As.get(e);if(!t&&e===Is&&_u())return Bs();if(!t)throw Us.create("no-app",{appName:e});return t}function qs(){return Array.from(As.values())}function Gs(e){return Hs.apply(this,arguments)}function Hs(){return(Hs=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!As.has(n)){e.next=6;break}return As.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ks(e,t,n){var r,i=null!==(r=Cs[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ss.warn(u.join(" "))}Ds(new Ku("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ws(e,t){if(null!==e&&"function"!==typeof e)throw Us.create("invalid-log-argument");!function(e,t){var n,r=x(Ju);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Zu[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Xu[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Qs(e){var t;t=e,Ju.forEach((function(e){e.setLogLevel(t)}))}var Ys="firebase-heartbeat-database",Xs=1,$s="firebase-heartbeat-store",Js=null;function Zs(){return Js||(Js=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=vs(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(vs(u.result),e.oldVersion,e.newVersion,vs(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Ys,Xs,{upgrade:function(e,t){if(0===t)e.createObjectStore($s)}}).catch((function(e){throw Us.create("idb-open",{originalErrorMessage:e.message})}))),Js}function ec(e){return tc.apply(this,arguments)}function tc(){return tc=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zs();case 3:return n=e.sent,e.next=6,n.transaction($s).objectStore($s).get(ic(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Ru?Ss.warn(e.t0.message):(i=Us.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ss.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),tc.apply(this,arguments)}function nc(e,t){return rc.apply(this,arguments)}function rc(){return rc=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zs();case 3:return r=e.sent,i=r.transaction($s,"readwrite"),a=i.objectStore($s),e.next=8,a.put(n,ic(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Ru?Ss.warn(e.t0.message):(o=Us.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ss.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),rc.apply(this,arguments)}function ic(e){return"".concat(e.name,"!").concat(e.options.appId)}var ac=function(){function e(t){var n=this;T(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new lc(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return A(e,[{key:"triggerHeartbeat",value:function(){var e=lu(su().mark((function e(){var t,n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=oc(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=lu(su().mark((function e(){var t,n,r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=oc(),n=uc(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=yu(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function oc(){return(new Date).toISOString().substring(0,10)}function uc(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=x(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),fc(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),fc(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var sc,cc,lc=function(){function e(t){T(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return A(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nu()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ec(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nc(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nc(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(f(r.heartbeats),f(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function fc(e){return yu(JSON.stringify({version:2,heartbeats:e})).length}sc="",Ds(new Ku("platform-logger",(function(e){return new _s(e)}),"PRIVATE")),Ds(new Ku("heartbeat",(function(e){return new ac(e)}),"PRIVATE")),Ks(Es,Ts,sc),Ks(Es,Ts,"esm2017"),Ks("fire-js","");var hc=function(){function e(t,n){var r=this;T(this,e),this._delegate=t,this.firebase=n,Ns(t,new Ku("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return A(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Gs(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ns(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Rs(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),dc=(H(cc={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),H(cc,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),cc),pc=new Du("app-compat","Firebase",dc);var vc=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Bs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Lu(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ks,setLogLevel:Qs,onLog:Ws,apps:null,SDK_VERSION:js,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ds(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw pc.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ku(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Lu(n,e=e||Is))throw pc.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(hc);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ku(n,e)},createSubscribe:zu,ErrorFactory:Du,deepExtend:ku}),n}(),mc=new rs("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){mc.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var yc=self.firebase.SDK_VERSION;yc&&yc.indexOf("LITE")>=0&&mc.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var gc=vc;!function(e){Ks("@firebase/app-compat","0.2.15",e)}();function kc(e){return a(e)||l(e)||u(e)||s()}gc.registerVersion("firebase","10.1.0","app-compat");function bc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var wc,xc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_c="EMAIL_SIGNIN",Ec="PASSWORD_RESET",Tc="RECOVER_EMAIL",Sc="REVERT_SECOND_FACTOR_ADDITION",Ic="VERIFY_AND_CHANGE_EMAIL",Cc="VERIFY_EMAIL";function Ac(){return H({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Pc=function(){var e;return H(e={},"admin-restricted-operation","This operation is restricted to administrators only."),H(e,"argument-error",""),H(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),H(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),H(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),H(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),H(e,"cordova-not-ready","Cordova framework is not ready."),H(e,"cors-unsupported","This browser is not supported."),H(e,"credential-already-in-use","This credential is already associated with a different user account."),H(e,"custom-token-mismatch","The custom token corresponds to a different audience."),H(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),H(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),H(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),H(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),H(e,"email-already-in-use","The email address is already in use by another account."),H(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),H(e,"expired-action-code","The action code has expired."),H(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),H(e,"internal-error","An internal AuthError has occurred."),H(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),H(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),H(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),H(e,"invalid-auth-event","An internal AuthError has occurred."),H(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),H(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),H(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),H(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),H(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),H(e,"invalid-email","The email address is badly formatted."),H(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),H(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),H(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),H(e,"invalid-credential","The supplied auth credential is malformed or has expired."),H(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),H(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),H(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),H(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),H(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),H(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),H(e,"wrong-password","The password is invalid or the user does not have a password."),H(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),H(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),H(e,"invalid-provider-id","The specified provider ID is invalid."),H(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),H(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),H(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),H(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),H(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),H(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),H(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),H(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),H(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),H(e,"missing-continue-uri","A continue URL must be provided in the request."),H(e,"missing-iframe-start","An internal AuthError has occurred."),H(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),H(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),H(e,"missing-password","A non-empty password must be provided"),H(e,"missing-multi-factor-info","No second factor identifier is provided."),H(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),H(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),H(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),H(e,"app-deleted","This instance of FirebaseApp has been deleted."),H(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),H(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),H(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),H(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),H(e,"no-auth-event","An internal AuthError has occurred."),H(e,"no-such-provider","User was not linked to an account with the given provider."),H(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),H(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),H(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),H(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),H(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),H(e,"provider-already-linked","User can only be linked to one identity for the given provider."),H(e,"quota-exceeded","The project's quota for this operation has been exceeded."),H(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),H(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),H(e,"rejected-credential","The request contains malformed or mismatching credentials."),H(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),H(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),H(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),H(e,"timeout","The operation has timed out."),H(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),H(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),H(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),H(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),H(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),H(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),H(e,"unverified-email","The operation requires a verified email."),H(e,"user-cancelled","The user did not grant your application the permissions it requested."),H(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),H(e,"user-disabled","The user account has been disabled by an administrator."),H(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),H(e,"user-signed-out",""),H(e,"weak-password","The password must be 6 characters long or more."),H(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),H(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),H(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),H(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),H(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),H(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),H(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),H(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),H(e,"invalid-req-type","Invalid request parameters."),H(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},Nc=Ac,Rc=new Du("auth","Firebase",Ac()),Dc=new rs("@firebase/auth");function Oc(e){if(Dc.logLevel<=Xu.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Dc.warn.apply(Dc,["Auth (".concat(js,"): ").concat(e)].concat(n))}}function Lc(e){if(Dc.logLevel<=Xu.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Dc.error.apply(Dc,["Auth (".concat(js,"): ").concat(e)].concat(n))}}function Mc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jc.apply(void 0,[e].concat(n))}function Fc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jc.apply(void 0,[e].concat(n))}function Uc(e,t,n){var r=Object.assign(Object.assign({},Nc()),H({},t,n));return new Du("auth","Firebase",r).create(t,{appName:e.name})}function Vc(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Mc(e,"argument-error"),Uc(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function jc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=f(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(f(o)))}return Rc.create.apply(Rc,[e].concat(n))}function Bc(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jc.apply(void 0,[t].concat(r))}}function zc(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Lc(t),new Error(t)}function qc(e,t){e||zc(t)}function Gc(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hc(){return"http:"===Kc()||"https:"===Kc()}function Kc(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Wc=function(){function e(t,n){T(this,e),this.shortDelay=t,this.longDelay=n,qc(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Su())||Au()}return A(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hc()||Cu()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Qc(e,t){qc(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Yc=function(){function e(){T(this,e)}return A(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void zc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void zc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void zc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Xc=(H(wc={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),H(wc,"MISSING_CUSTOM_TOKEN","internal-error"),H(wc,"INVALID_IDENTIFIER","invalid-email"),H(wc,"MISSING_CONTINUE_URI","internal-error"),H(wc,"INVALID_PASSWORD","wrong-password"),H(wc,"MISSING_PASSWORD","missing-password"),H(wc,"EMAIL_EXISTS","email-already-in-use"),H(wc,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),H(wc,"INVALID_IDP_RESPONSE","invalid-credential"),H(wc,"INVALID_PENDING_TOKEN","invalid-credential"),H(wc,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),H(wc,"MISSING_REQ_TYPE","internal-error"),H(wc,"EMAIL_NOT_FOUND","user-not-found"),H(wc,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),H(wc,"EXPIRED_OOB_CODE","expired-action-code"),H(wc,"INVALID_OOB_CODE","invalid-action-code"),H(wc,"MISSING_OOB_CODE","internal-error"),H(wc,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),H(wc,"INVALID_ID_TOKEN","invalid-user-token"),H(wc,"TOKEN_EXPIRED","user-token-expired"),H(wc,"USER_NOT_FOUND","user-token-expired"),H(wc,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),H(wc,"INVALID_CODE","invalid-verification-code"),H(wc,"INVALID_SESSION_INFO","invalid-verification-id"),H(wc,"INVALID_TEMPORARY_PROOF","invalid-credential"),H(wc,"MISSING_SESSION_INFO","missing-verification-id"),H(wc,"SESSION_EXPIRED","code-expired"),H(wc,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),H(wc,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),H(wc,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),H(wc,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),H(wc,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),H(wc,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),H(wc,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),H(wc,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),H(wc,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),H(wc,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),H(wc,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),H(wc,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),H(wc,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),H(wc,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),H(wc,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),H(wc,"MISSING_CLIENT_TYPE","missing-client-type"),H(wc,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),H(wc,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),H(wc,"INVALID_REQ_TYPE","invalid-req-type"),wc),$c=new Wc(3e4,6e4);function Jc(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Zc(e,t,n,r){return el.apply(this,arguments)}function el(){return el=lu(su().mark((function e(t,n,r,i){var a,o=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",tl(t,a,lu(su().mark((function e(){var a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Vu(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Yc.fetch()(al(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),el.apply(this,arguments)}function tl(e,t,n){return nl.apply(this,arguments)}function nl(){return nl=lu(su().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Xc),n),e.prev=2,a=new ol(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ul(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw ul(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw ul(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw ul(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Uc(t,p,d);case 34:Mc(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ru)){e.next=41;break}throw e.t0;case 41:Mc(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),nl.apply(this,arguments)}function rl(e,t,n,r){return il.apply(this,arguments)}function il(){return il=lu(su().mark((function e(t,n,r,i){var a,o,u=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Zc(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Mc(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),il.apply(this,arguments)}function al(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Qc(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ol=function(){function e(t){var n=this;T(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Fc(n.auth,"network-request-failed"))}),$c.get())}))}return A(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ul(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Fc(e,t,r);return i.customData._tokenResponse=n,i}function sl(e,t){return cl.apply(this,arguments)}function cl(){return(cl=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(e,t){return fl.apply(this,arguments)}function fl(){return(fl=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hl(e,t){return dl.apply(this,arguments)}function dl(){return(dl=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pl(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function vl(){return vl=lu(su().mark((function e(t){var n,r,i,a,o,u,s=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Hu(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Bc((a=yl(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:pl(ml(a.auth_time)),issuedAtTime:pl(ml(a.iat)),expirationTime:pl(ml(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function ml(e){return 1e3*Number(e)}function yl(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Lc("JWT malformed, contained fewer than 3 sections"),null;try{var a=gu(r);return a?JSON.parse(a):(Lc("Failed to decode base64 JWT payload"),null)}catch(o){return Lc("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function gl(e,t){return kl.apply(this,arguments)}function kl(){return kl=lu(su().mark((function e(t,n){var r=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ru&&bl(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),kl.apply(this,arguments)}function bl(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var wl=function(){function e(t){T(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return A(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xl=function(){function e(t,n){T(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return A(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=pl(this.lastLoginAt),this.creationTime=pl(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function _l(e){return El.apply(this,arguments)}function El(){return(El=lu(su().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,gl(t,hl(r,{idToken:i}));case 6:Bc(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=bc(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=Sl(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new xl(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tl(){return(Tl=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Hu(t),e.next=3,_l(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sl(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(f(n),f(t))}function Il(e,t){return Cl.apply(this,arguments)}function Cl(){return(Cl=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tl(t,{},lu(su().mark((function e(){var r,i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=al(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Yc.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Al=function(){function e(){T(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return A(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Bc(e.idToken,"internal-error"),Bc("undefined"!==typeof e.idToken,"internal-error"),Bc("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=yl(e);return Bc(t,"internal-error"),Bc("undefined"!==typeof t.exp,"internal-error"),Bc("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=lu(su().mark((function e(t){var n,r=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Bc(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Il(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return zc("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Bc("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Bc("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Bc("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Pl(e,t){Bc("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Nl=function(){function e(t){T(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=bc(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?f(a.providerData):[],this.metadata=new xl(a.createdAt||void 0,a.lastLoginAt||void 0)}return A(e,[{key:"getIdToken",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gl(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Bc(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return vl.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Tl.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Bc(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Bc(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=lu(su().mark((function e(t){var n,r,i=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,_l(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,gl(this,sl(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Bc(k&&_,t,"internal-error");var E=Al.fromJSON(this.name,_);Bc("string"===typeof k,t,"internal-error"),Pl(f,t.name),Pl(h,t.name),Bc("boolean"===typeof b,t,"internal-error"),Bc("boolean"===typeof w,t,"internal-error"),Pl(d,t.name),Pl(p,t.name),Pl(v,t.name),Pl(m,t.name),Pl(y,t.name),Pl(g,t.name);var T=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(T.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(T._redirectEventId=m),T}},{key:"_fromIdTokenResponse",value:function(){var t=lu(su().mark((function t(n,r){var i,a,o,u=arguments;return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Al).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,_l(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Rl=new Map;function Dl(e){qc(e instanceof Function,"Expected a class definition");var t=Rl.get(e);return t?(qc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Rl.set(e,t),t)}var Ol=function(){function e(){T(this,e),this.type="NONE",this.storage={}}return A(e,[{key:"_isAvailable",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ol.type="NONE";var Ll=Ol;function Ml(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Fl=function(){function e(t,n,r){T(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ml(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ml("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return A(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Nl._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=lu(su().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Dl(Ll),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Dl(Ll),u=Ml(i,n.config.apiKey,n.name),s=null,c=x(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Nl._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ul(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zl(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vl(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gl(t))return"Blackberry";if(Hl(t))return"Webos";if(jl(t))return"Safari";if((t.includes("chrome/")||Bl(t))&&!t.includes("edge/"))return"Chrome";if(ql(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/firefox\//i.test(e)}function jl(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/crios\//i.test(e)}function zl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/iemobile/i.test(e)}function ql(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/android/i.test(e)}function Gl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/blackberry/i.test(e)}function Hl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/webos/i.test(e)}function Kl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Wl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return Kl(e)||ql(e)||Hl(e)||Gl(e)||/windows phone/i.test(e)||zl(e)}function Ql(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ul(Su());break;case"Worker":t="".concat(Ul(Su()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(js,"/").concat(r)}function Yl(e){return Xl.apply(this,arguments)}function Xl(){return(Xl=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zc(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $l(e,t){return Jl.apply(this,arguments)}function Jl(){return(Jl=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"GET","/v2/recaptchaConfig",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zl(e){return void 0!==e&&void 0!==e.getResponse}function ef(e){return void 0!==e&&void 0!==e.enterprise}var tf=A((function e(t){if(T(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function nf(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Fc("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function rf(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var af=function(){function e(t){T(this,e),this.type="recaptcha-enterprise",this.auth=lf(t)}return A(e,[{key:"verify",value:function(){var e=lu(su().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;ef(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=lu(su().mark((function e(n,r){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$l(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new tf(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&ef(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));nf("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function of(e,t,n){return uf.apply(this,arguments)}function uf(){return uf=lu(su().mark((function e(t,n,r){var i,a,o,u,s=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new af(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),uf.apply(this,arguments)}var sf=function(){function e(t){T(this,e),this.auth=t,this.queue=[]}return A(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=lu(su().mark((function e(t){var n,r,i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=x(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=x(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),cf=function(){function e(t,n,r,i){T(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ff(this),this.idTokenSubscription=new ff(this),this.beforeStateQueue=new sf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return A(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Dl(t)),this._initializationPromise=this.queue(lu(su().mark((function r(){var i,a;return su().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Fl.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=lu(su().mark((function e(t){var n,r,i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Bc(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_l(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Hu(t):null)&&Bc(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=lu(su().mark((function e(t){var n,r=this,i=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Bc(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(lu(su().mark((function n(){return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Dl(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=lu(su().mark((function e(){var t,n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$l(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new tf(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new af(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Du("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Bc(n=t&&Dl(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Fl.create(this,[Dl(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=lu(su().mark((function e(t){var n=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Bc(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Bc(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ql(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=lu(su().mark((function e(){var t,n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=lu(su().mark((function e(){var t,n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Oc("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function lf(e){return Hu(e)}var ff=function(){function e(t){var n=this;T(this,e),this.auth=t,this.observer=null,this.addObserver=zu((function(e){return n.observer=e}))}return A(e,[{key:"next",get:function(){return Bc(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function hf(e,t,n){var r=lf(e);Bc(r._canInitEmulator,r,"emulator-config-failed"),Bc(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=df(t),o=function(e){var t=df(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:pf(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:pf(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function df(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pf(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var vf=function(){function e(t,n){T(this,e),this.providerId=t,this.signInMethod=n}return A(e,[{key:"toJSON",value:function(){return zc("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return zc("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return zc("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return zc("not implemented")}}]),e}();function mf(e,t){return yf.apply(this,arguments)}function yf(){return(yf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:resetPassword",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gf(e,t){return kf.apply(this,arguments)}function kf(){return(kf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bf(e,t){return wf.apply(this,arguments)}function wf(){return(wf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:update",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xf(e,t){return _f.apply(this,arguments)}function _f(){return(_f=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t,"POST","/v1/accounts:signInWithPassword",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ef(e,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:sendOobCode",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sf(e,t){return If.apply(this,arguments)}function If(){return(If=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ef(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cf(e,t){return Af.apply(this,arguments)}function Af(){return(Af=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ef(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pf(e,t){return Nf.apply(this,arguments)}function Nf(){return(Nf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ef(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rf(e,t){return Df.apply(this,arguments)}function Df(){return(Df=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ef(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Of(e,t){return Lf.apply(this,arguments)}function Lf(){return(Lf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t,"POST","/v1/accounts:signInWithEmailLink",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mf(e,t){return Ff.apply(this,arguments)}function Ff(){return(Ff=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t,"POST","/v1/accounts:signInWithEmailLink",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uf=function(e){N(n,e);var t=L(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return T(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return A(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,of(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",xf(t,i));case 11:return e.abrupt("return",xf(t,r).catch(function(){var e=lu(su().mark((function e(n){var i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,of(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",xf(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Of(t,{email:this._email,oobCode:this._password}));case 13:Mc(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",gf(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Mf(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Mc(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(vf);function Vf(e,t){return jf.apply(this,arguments)}function jf(){return(jf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t,"POST","/v1/accounts:signInWithIdp",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bf=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return A(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Vf(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vf(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vf(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vu(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mc("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=bc(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(vf);function zf(e,t){return qf.apply(this,arguments)}function qf(){return(qf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:sendVerificationCode",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gf(){return(Gf=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t,"POST","/v1/accounts:signInWithPhoneNumber",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hf(){return(Hf=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rl(t,"POST","/v1/accounts:signInWithPhoneNumber",Jc(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ul(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kf=H({},"USER_NOT_FOUND","user-not-found");function Wf(){return(Wf=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",rl(t,"POST","/v1/accounts:signInWithPhoneNumber",Jc(t,r),Kf));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qf=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this,"phone","phone")).params=e,r}return A(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Gf.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Hf.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Wf.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(vf);var Yf=function(){function e(t){var n,r,i,a,o,u;T(this,e);var s=ju(Bu(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Bc(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return A(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ju(Bu(e)).link,n=t?ju(Bu(t)).deep_link_id:null,r=ju(Bu(e)).deep_link_id;return(r?ju(Bu(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(jV){return null}}}]),e}();var Xf=function(){function e(){T(this,e),this.providerId=e.PROVIDER_ID}return A(e,null,[{key:"credential",value:function(e,t){return Uf._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Yf.parseLink(t);return Bc(n,"argument-error"),Uf._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Xf.PROVIDER_ID="password",Xf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var $f=function(){function e(t){T(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return A(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Jf=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).scopes=[],e}return A(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return f(this.scopes)}}]),n}($f),Zf=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Bc(e.idToken||e.accessToken,"argument-error"),Bf._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Bc("providerId"in t&&"signInMethod"in t,"argument-error"),Bf._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Jf),eh=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.call(this,"facebook.com")}return A(n,null,[{key:"credential",value:function(e){return Bf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(jV){return null}}}]),n}(Jf);eh.FACEBOOK_SIGN_IN_METHOD="facebook.com",eh.PROVIDER_ID="facebook.com";var th=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return A(n,null,[{key:"credential",value:function(e,t){return Bf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(jV){return null}}}]),n}(Jf);th.GOOGLE_SIGN_IN_METHOD="google.com",th.PROVIDER_ID="google.com";var nh=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.call(this,"github.com")}return A(n,null,[{key:"credential",value:function(e){return Bf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(jV){return null}}}]),n}(Jf);nh.GITHUB_SIGN_IN_METHOD="github.com",nh.PROVIDER_ID="github.com";var rh=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return A(n,[{key:"_getIdTokenResponse",value:function(e){return Vf(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vf(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vf(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(vf),ih=function(e){N(n,e);var t=L(n);function n(e){return T(this,n),Bc(e.startsWith("saml."),"argument-error"),t.call(this,e)}return A(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=rh.fromJSON(e);return Bc(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return rh._create(r,n)}catch(i){return null}}}]),n}($f),ah=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.call(this,"twitter.com")}return A(n,null,[{key:"credential",value:function(e,t){return Bf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(jV){return null}}}]),n}(Jf);function oh(e,t){return uh.apply(this,arguments)}function uh(){return(uh=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t,"POST","/v1/accounts:signUp",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ah.TWITTER_SIGN_IN_METHOD="twitter.com",ah.PROVIDER_ID="twitter.com";var sh=function(){function e(t){T(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return A(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=lu(su().mark((function t(n,r,i){var a,o,u,s,c=arguments;return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Nl._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ch(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=lu(su().mark((function t(n,r,i){var a;return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ch(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ch(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function lh(){return(lh=lu(su().mark((function e(t){var n,r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lf(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new sh({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,oh(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,sh._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fh=function(e){N(n,e);var t=L(n);function n(e,r,i,a){var o,u;return T(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(O(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return A(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ru);function hh(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw fh._fromErrorAndOperation(e,n,t,r);throw n}))}function dh(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ph(e,t){return vh.apply(this,arguments)}function vh(){return vh=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hu(t),e.next=3,gh(!0,r,n);case 3:return e.t0=ll,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=dh(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),vh.apply(this,arguments)}function mh(e,t){return yh.apply(this,arguments)}function yh(){return yh=lu(su().mark((function e(t,n){var r,i,a=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=gl,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",sh._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),yh.apply(this,arguments)}function gh(e,t,n){return kh.apply(this,arguments)}function kh(){return(kh=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_l(n);case 2:i=dh(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Bc(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bh(e,t){return wh.apply(this,arguments)}function wh(){return wh=lu(su().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,gl(t,hh(i,a,n,t),r);case 6:return Bc((o=e.sent).idToken,i,"internal-error"),Bc(u=yl(o.idToken),i,"internal-error"),s=u.sub,Bc(t.uid===s,i,"user-mismatch"),e.abrupt("return",sh._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Mc(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),wh.apply(this,arguments)}function xh(e,t){return _h.apply(this,arguments)}function _h(){return _h=lu(su().mark((function e(t,n){var r,i,a,o,u=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,hh(t,i,n);case 4:return a=e.sent,e.next=7,sh._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),_h.apply(this,arguments)}function Eh(e,t){return Th.apply(this,arguments)}function Th(){return(Th=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xh(lf(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sh(e,t){return Ih.apply(this,arguments)}function Ih(){return(Ih=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hu(t),e.next=3,gh(!1,r,n.providerId);case 3:return e.abrupt("return",mh(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ch(e,t){return Ah.apply(this,arguments)}function Ah(){return(Ah=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bh(Hu(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ph(e,t){return Nh.apply(this,arguments)}function Nh(){return(Nh=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t,"POST","/v1/accounts:signInWithCustomToken",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rh(){return(Rh=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lf(t),e.next=3,Ph(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,sh._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dh=function(){function e(t,n){T(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return A(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Oh._fromServerResponse(e,t):"totpInfo"in t?Lh._fromServerResponse(e,t):Mc(e,"internal-error")}}]),e}(),Oh=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return A(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Dh),Lh=function(e){N(n,e);var t=L(n);function n(e){return T(this,n),t.call(this,"totp",e)}return A(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Dh);function Mh(e,t,n){var r;Bc((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Bc("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Bc(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Bc(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Fh(){return Fh=lu(su().mark((function e(t,n,r){var i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=lf(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,of(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&Mh(a,u,r),e.next=9,Cf(a,u);case 9:e.next=14;break;case 11:return r&&Mh(a,o,r),e.next=14,Cf(a,o).catch(function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,of(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&Mh(a,n,r),e.next=8,Cf(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),Fh.apply(this,arguments)}function Uh(){return(Uh=lu(su().mark((function e(t,n,r){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mf(Hu(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vh(){return(Vh=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bf(Hu(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jh(e,t){return Bh.apply(this,arguments)}function Bh(){return(Bh=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hu(t),e.next=3,mf(r,{oobCode:n});case 3:i=e.sent,Bc(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Bc(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Bc(i.mfaInfo,r,"internal-error");case 13:Bc(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Dh._fromServerResponse(lf(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zh(){return(zh=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jh(Hu(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qh(e,t,n){return Gh.apply(this,arguments)}function Gh(){return Gh=lu(su().mark((function e(t,n,r){var i,a,o,u,s,c,l;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=lf(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,of(a,o,"signUpPassword");case 5:s=e.sent,u=oh(a,s),e.next=10;break;case 9:u=oh(a,o).catch(function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,of(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",oh(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,sh._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Gh.apply(this,arguments)}function Hh(e,t,n){return Eh(Hu(e),Xf.credential(t,n))}function Kh(){return Kh=lu(su().mark((function e(t,n,r){var i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){Bc(t.handleCodeInApp,a,"argument-error"),t&&Mh(a,e,t)},a=lf(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,of(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,Pf(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,Pf(a,o).catch(function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,of(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,Pf(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Kh.apply(this,arguments)}function Wh(){return(Wh=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hu(t),Bc((a=Xf.credentialWithLink(n,r||Gc()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Eh(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qh(e,t){return Yh.apply(this,arguments)}function Yh(){return(Yh=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:createAuthUri",Jc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xh(){return(Xh=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hc()?Gc():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Qh(Hu(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $h(){return($h=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hu(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Mh(r.auth,a,n),e.next=8,Sf(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jh(){return(Jh=lu(su().mark((function e(t,n,r){var i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hu(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Mh(i.auth,o,r),e.next=8,Rf(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zh(e,t){return ed.apply(this,arguments)}function ed(){return(ed=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function td(){return(td=lu(su().mark((function e(t,n){var r,i,a,o,u,s,c;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Hu(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,gl(a,Zh(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nd(e,t,n){return rd.apply(this,arguments)}function rd(){return(rd=lu(su().mark((function e(t,n,r){var i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,gl(t,gf(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var id=A((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};T(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ad=function(e){N(n,e);var t=L(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this,e,r,i)).username=a,o}return A(n)}(id),od=function(e){N(n,e);var t=L(n);function n(e,r){return T(this,n),t.call(this,e,"facebook.com",r)}return A(n)}(id),ud=function(e){N(n,e);var t=L(n);function n(e,r){return T(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return A(n)}(ad),sd=function(e){N(n,e);var t=L(n);function n(e,r){return T(this,n),t.call(this,e,"google.com",r)}return A(n)}(id),cd=function(e){N(n,e);var t=L(n);function n(e,r,i){return T(this,n),t.call(this,e,"twitter.com",r,i)}return A(n)}(ad);function ld(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=yl(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new id(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new od(a,i);case"github.com":return new ud(a,i);case"google.com":return new sd(a,i);case"twitter.com":return new cd(a,i,e.screenName||null);case"custom":case"anonymous":return new id(a,null);default:return new id(a,r,i)}}(n)}var fd=function(){function e(t,n,r){T(this,e),this.type=t,this.credential=n,this.user=r}return A(e,[{key:"toJSON",value:function(){return{multiFactorSession:H({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),hd=function(){function e(t,n,r){T(this,e),this.session=t,this.hints=n,this.signInResolver=r}return A(e,[{key:"resolveSignIn",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=lf(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Dh._fromServerResponse(r,e)}));Bc(i.mfaPendingCredential,r,"internal-error");var o=fd._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=lu(su().mark((function e(t){var a,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,sh._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Bc(n.user,r,"internal-error"),e.abrupt("return",sh._forOperation(n.user,n.operationType,u));case 17:Mc(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function dd(e,t){return Zc(e,"POST","/v2/accounts/mfaEnrollment:start",Jc(e,t))}function pd(e,t){return Zc(e,"POST","/v2/accounts/mfaEnrollment:finalize",Jc(e,t))}var vd=function(){function e(t){var n=this;T(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Dh._fromServerResponse(t.auth,e)})))}))}return A(e,[{key:"getSession",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fd,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,gl(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,gl(this.user,Zc(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Jc(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),md=new WeakMap;var yd="__sak",gd=function(){function e(t,n){T(this,e),this.storageRetriever=t,this.type=n}return A(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(yd,"1"),this.storage.removeItem(yd),Promise.resolve(!0)):Promise.resolve(!1)}catch(jV){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var kd=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Su();return jl(e)||Kl(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Wl(),e._shouldAllowMigration=!0,e}return A(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Pu()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=lu(su().mark((function e(t,r){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(R(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=lu(su().mark((function e(t){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(R(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(R(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(gd);kd.type="LOCAL";var bd=kd,wd=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return A(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(gd);wd.type="SESSION";var xd=wd;function _d(e){return Promise.all(e.map(function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ed=function(){function e(t){T(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return A(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=lu(su().mark((function e(t){var n,r,i,a,o,u,s,c;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,_d(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Td(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ed.receivers=[];var Sd=function(){function e(t){T(this,e),this.target=t,this.handlers=new Set}return A(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=lu(su().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Td("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Id(){return window}function Cd(e){Id().location.href=e}function Ad(){return"undefined"!==typeof Id().WorkerGlobalScope&&"function"===typeof Id().importScripts}function Pd(){return Nd.apply(this,arguments)}function Nd(){return(Nd=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Rd(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Dd="firebaseLocalStorageDb",Od="firebaseLocalStorage",Ld="fbase_key",Md=function(){function e(t){T(this,e),this.request=t}return A(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Fd(e,t){return e.transaction([Od],t?"readwrite":"readonly").objectStore(Od)}function Ud(){var e=indexedDB.deleteDatabase(Dd);return new Md(e).toPromise()}function Vd(){var e=indexedDB.open(Dd,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Od,{keyPath:Ld})}catch(r){n(r)}})),e.addEventListener("success",lu(su().mark((function n(){var r;return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Od)){n.next=12;break}return r.close(),n.next=5,Ud();case 5:return n.t0=t,n.next=8,Vd();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function jd(e,t,n){return Bd.apply(this,arguments)}function Bd(){return Bd=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fd(t,!0).put((H(i={},Ld,n),H(i,"value",r),i)),e.abrupt("return",new Md(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Bd.apply(this,arguments)}function zd(e,t){return qd.apply(this,arguments)}function qd(){return qd=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fd(t,!1).get(n),e.next=3,new Md(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Gd(e,t){var n=Fd(e,!0).delete(t);return new Md(n).toPromise()}var Hd=function(){function e(){T(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return A(e,[{key:"_openDb",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Vd();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ad()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=lu(su().mark((function e(){var t=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ed._getInstance(Ad()?self:null),this.receiver._subscribe("keyChanged",function(){var e=lu(su().mark((function e(n,r){var i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=lu(su().mark((function e(){var t,n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pd();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Sd(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Rd()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Vd();case 5:return t=e.sent,e.next=8,jd(t,yd,"1");case 8:return e.next=10,Gd(t,yd);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=lu(su().mark((function e(t,n){var r=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return jd(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return zd(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=lu(su().mark((function e(t){var n=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Gd(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=lu(su().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Fd(e,!1).getAll();return new Md(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=x(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Hd.type="LOCAL";var Kd=Hd;function Wd(e,t){return Zc(e,"POST","/v2/accounts/mfaSignIn:start",Jc(e,t))}function Qd(e,t){return Zc(e,"POST","/v2/accounts/mfaSignIn:finalize",Jc(e,t))}var Yd=1e12,Xd=function(){function e(t){T(this,e),this.auth=t,this.counter=Yd,this._widgets=new Map}return A(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new $d(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Yd;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Yd;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Yd,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$d=function(){function e(t,n,r){var i=this;T(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Bc(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return A(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Jd=rf("rcb"),Zd=new Wc(3e4,6e4),ep=function(){function e(){var t;T(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Id().grecaptcha)||void 0===t?void 0:t.render)}return A(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Bc(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Zl(Id().grecaptcha)?Promise.resolve(Id().grecaptcha):new Promise((function(r,i){var a=Id().setTimeout((function(){i(Fc(e,"network-request-failed"))}),Zd.get());Id()[Jd]=function(){Id().clearTimeout(a),delete Id()[Jd];var o=Id().grecaptcha;if(o&&Zl(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Fc(e,"internal-error"))},nf("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Vu({onload:Jd,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Fc(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Id().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var tp=function(){function e(){T(this,e)}return A(e,[{key:"load",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Xd(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),np="recaptcha",rp={theme:"light",type:"image"},ip=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},rp);T(this,e),this.parameters=r,this.type=np,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lf(t),this.isInvisible="invisible"===this.parameters.size,Bc("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;Bc(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tp:new ep,this.validateStartingState()}return A(e,[{key:"verify",value:function(){var e=lu(su().mark((function e(){var t,n,r,i=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Bc(!this.parameters.sitekey,this.auth,"argument-error"),Bc(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Bc("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Id()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Bc(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=lu(su().mark((function e(){var t,n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc(Hc()&&!Ad(),this.auth,"internal-error"),e.next=3,ap();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Yl(this.auth);case 8:Bc(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Bc(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ap(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var op=function(){function e(t,n){T(this,e),this.verificationId=t,this.onConfirmation=n}return A(e,[{key:"confirm",value:function(e){var t=Qf._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function up(){return(up=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lf(t),e.next=3,fp(i,n,Hu(r));case 3:return a=e.sent,e.abrupt("return",new op(a,(function(e){return Eh(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sp(e,t,n){return cp.apply(this,arguments)}function cp(){return(cp=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hu(t),e.next=3,gh(!1,i,"phone");case 3:return e.next=5,fp(i.auth,n,Hu(r));case 5:return a=e.sent,e.abrupt("return",new op(a,(function(e){return Sh(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lp(){return(lp=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hu(t),e.next=3,fp(i.auth,n,Hu(r));case 3:return a=e.sent,e.abrupt("return",new op(a,(function(e){return Ch(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fp(e,t,n){return hp.apply(this,arguments)}function hp(){return(hp=lu(su().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Bc("string"===typeof a,t,"argument-error"),Bc(r.type===np,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Bc("enroll"===u.type,t,"internal-error"),e.next=13,dd(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Bc("signin"===u.type,t,"internal-error"),Bc(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Wd(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,zf(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])})))).apply(this,arguments)}function dp(){return(dp=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mh(Hu(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pp=function(){function e(t){T(this,e),this.providerId=e.PROVIDER_ID,this.auth=lf(t)}return A(e,[{key:"verifyPhoneNumber",value:function(e,t){return fp(this.auth,e,Hu(t))}}],[{key:"credential",value:function(e,t){return Qf._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Qf._fromTokenResponse(n,r):null}}]),e}();function vp(e,t){return t?Dl(t):(Bc(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}pp.PROVIDER_ID="phone",pp.PHONE_SIGN_IN_METHOD="phone";var mp=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this,"custom","custom")).params=e,r}return A(n,[{key:"_getIdTokenResponse",value:function(e){return Vf(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Vf(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Vf(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(vf);function yp(e){return xh(e.auth,new mp(e),e.bypassAuthState)}function gp(e){var t=e.auth,n=e.user;return Bc(n,t,"internal-error"),bh(n,new mp(e),e.bypassAuthState)}function kp(e){return bp.apply(this,arguments)}function bp(){return(bp=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Bc(r=t.user,n,"internal-error"),e.abrupt("return",mh(r,new mp(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];T(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return A(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=lu(su().mark((function t(n,r){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=lu(su().mark((function e(t){var n,r,i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yp;case"linkViaPopup":case"linkViaRedirect":return kp;case"reauthViaPopup":case"reauthViaRedirect":return gp;default:Mc(this.auth,"internal-error")}}},{key:"resolve",value:function(e){qc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){qc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),xp=new Wc(2e3,1e4);function _p(e,t,n){return Ep.apply(this,arguments)}function Ep(){return(Ep=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lf(t),Vc(t,n,$f),a=vp(i,r),o=new Cp(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(){return(Tp=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc((i=Hu(t)).auth,n,$f),a=vp(i.auth,r),o=new Cp(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sp(e,t,n){return Ip.apply(this,arguments)}function Ip(){return(Ip=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc((i=Hu(t)).auth,n,$f),a=vp(i.auth,r),o=new Cp(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cp=function(e){N(n,e);var t=L(n);function n(e,r,i,a,o){var u;return T(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=O(u),u}return A(n,[{key:"executeNotNull",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Bc(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=lu(su().mark((function e(){var t,n=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qc(1===this.filter.length,"Popup operations only handle one event"),t=Td(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Fc(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Fc(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Fc(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,xp.get())}()}}]),n}(wp);Cp.currentPopupAction=null;var Ap="pendingRedirect",Pp=new Map,Np=function(e){N(n,e);var t=L(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return T(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return A(n,[{key:"execute",value:function(){var e=lu(su().mark((function e(){var t,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Pp.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Rp(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,nu(R(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Pp.set(this.auth._key(),t);case 21:return this.bypassAuthState||Pp.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=lu(su().mark((function e(t){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",nu(R(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",nu(R(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(wp);function Rp(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Up(n),i=Fp(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Op(e,t){return Lp.apply(this,arguments)}function Lp(){return(Lp=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fp(t)._set(Up(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mp(e,t){Pp.set(e._key(),t)}function Fp(e){return Dl(e._redirectPersistence)}function Up(e){return Ml(Ap,e.config.apiKey,e.name)}function Vp(e,t,n){return function(e,t,n){return jp.apply(this,arguments)}(e,t,n)}function jp(){return(jp=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lf(t),Vc(t,n,$f),e.next=4,i._initializationPromise;case 4:return a=vp(i,r),e.next=7,Op(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bp(e,t,n){return function(e,t,n){return zp.apply(this,arguments)}(e,t,n)}function zp(){return(zp=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc((i=Hu(t)).auth,n,$f),e.next=4,i.auth._initializationPromise;case 4:return a=vp(i.auth,r),e.next=7,Op(a,i.auth);case 7:return e.next=9,Yp(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qp(e,t,n){return function(e,t,n){return Gp.apply(this,arguments)}(e,t,n)}function Gp(){return(Gp=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc((i=Hu(t)).auth,n,$f),e.next=4,i.auth._initializationPromise;case 4:return a=vp(i.auth,r),e.next=7,gh(!1,i,n.providerId);case 7:return e.next=9,Op(a,i.auth);case 9:return e.next=11,Yp(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hp(e,t){return Kp.apply(this,arguments)}function Kp(){return(Kp=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lf(t)._initializationPromise;case 2:return e.abrupt("return",Wp(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wp(e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=lu(su().mark((function e(t,n){var r,i,a,o,u,s=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=lf(t),a=vp(i,n),o=new Np(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Yp(e){return Xp.apply(this,arguments)}function Xp(){return(Xp=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Td("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $p=function(){function e(t){T(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return A(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Zp(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fc(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jp(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Jp(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Jp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Zp(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ev(e){return tv.apply(this,arguments)}function tv(){return tv=lu(su().mark((function e(t){var n,r=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Zc(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}var nv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rv=/^https?/;function iv(){return(iv=lu(su().mark((function e(t){var n,r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ev(t);case 4:n=e.sent,r=n.authorizedDomains,i=x(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!av(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Mc(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function av(e){var t=Gc(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!rv.test(r))return!1;if(nv.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ov=new Wc(3e4,6e4);function uv(){var e=Id().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=f(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var sv=null;function cv(e){return sv=sv||function(e){return new Promise((function(t,n){var r,i,a;function o(){uv(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){uv(),n(Fc(e,"network-request-failed"))},timeout:ov.get()})}if(null===(i=null===(r=Id().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Id().gapi)||void 0===a?void 0:a.load)){var u=rf("iframefcb");return Id()[u]=function(){gapi.load?o():n(Fc(e,"network-request-failed"))},nf("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw sv=null,e}))}(e),sv}var lv=new Wc(5e3,15e3),fv="__/auth/iframe",hv="emulator/auth/iframe",dv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vv(e){var t=e.config;Bc(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Qc(t,hv):"https://".concat(e.config.authDomain,"/").concat(fv),r={apiKey:t.apiKey,appName:e.name,v:js},i=pv.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Vu(r).slice(1))}function mv(e){return yv.apply(this,arguments)}function yv(){return yv=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cv(t);case 2:return n=e.sent,Bc(r=Id().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:vv(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dv,dontclear:!0},(function(e){return new Promise(function(){var n=lu(su().mark((function n(r,i){var a,o,u;return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Id().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Fc(t,"network-request-failed"),o=Id().setTimeout((function(){i(a)}),lv.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}var gv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kv=function(){function e(t){T(this,e),this.window=t,this.associatedEvent=null}return A(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function bv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},gv),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Su().toLowerCase();n&&(u=Bl(l)?"_blank":n),Vl(l)&&(t=t||"http://localhost",s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Kl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new kv(null);var h=window.open(t||"",u,f);Bc(h,e,"popup-blocked");try{h.focus()}catch(d){}return new kv(h)}var wv="__/auth/handler",xv="emulator/auth/handler",_v=encodeURIComponent("fac");function Ev(e,t,n,r,i,a){return Tv.apply(this,arguments)}function Tv(){return Tv=lu(su().mark((function e(t,n,r,i,a,o){var u,s,l,f,h,d,p,v,m,y,g,k,b;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bc(t.config.authDomain,t,"auth-domain-config-required"),Bc(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:js,eventId:a},n instanceof $f)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Mu(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,l=Object.entries(o||{});s<l.length;s++)f=c(l[s],2),h=f[0],d=f[1],u[h]=d;for(n instanceof Jf&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(_v,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(Sv(t),"?").concat(Vu(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function Sv(e){var t=e.config;return t.emulator?Qc(t,xv):"https://".concat(t.authDomain,"/").concat(wv)}var Iv="webStorageSupport",Cv=function(){function e(){T(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xd,this._completeRedirectFn=Wp,this._overrideRedirectResult=Mp}return A(e,[{key:"_openPopup",value:function(){var e=lu(su().mark((function e(t,n,r,i){var a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qc(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Ev(t,n,r,Gc(),i);case 3:return o=e.sent,e.abrupt("return",bv(t,o,Td()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=lu(su().mark((function e(t,n,r,i){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Ev(t,n,r,Gc(),i);case 4:return Cd(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(qc(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mv(t);case 2:return n=e.sent,r=new $p(t),n.register("authEvent",(function(e){return Bc(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Iv,{type:Iv},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Iv];void 0!==i&&t(!!i),Mc(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return iv.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Wl()||jl()||Kl()}}]),e}(),Av=Cv,Pv=function(){function e(t){T(this,e),this.factorId=t}return A(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zc("unexpected MultiFactorSessionType")}}}]),e}(),Nv=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this,"phone")).credential=e,r}return A(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Zc(e,"POST","/v2/accounts/mfaEnrollment:finalize",Jc(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Zc(e,"POST","/v2/accounts/mfaSignIn:finalize",Jc(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Pv),Rv=function(){function e(){T(this,e)}return A(e,null,[{key:"assertion",value:function(e){return Nv._fromCredential(e)}}]),e}();Rv.FACTOR_ID="phone";var Dv=function(){function e(){T(this,e)}return A(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Ov._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Ov._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,a=r.user.auth,o={idToken:r.credential,totpEnrollmentInfo:{}},Zc(a,"POST","/v2/accounts/mfaEnrollment:start",Jc(a,o));case 4:return i=e.sent,e.abrupt("return",Lv._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}var a,o}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Dv.FACTOR_ID="totp";var Ov=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return A(n,[{key:"_finalizeEnroll",value:function(){var e=lu(su().mark((function e(t,n,r){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",pd(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bc(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Qd(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Pv),Lv=function(){function e(t,n,r,i,a,o,u){T(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return A(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Mv(e)||Mv(t))&&(r=!0),r&&(Mv(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Mv(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Mv(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Fv="@firebase/auth",Uv="1.1.0",Vv=function(){function e(t){T(this,e),this.auth=t,this.internalListeners=new Map}return A(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Bc(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var jv;!function(e){var t;null===(t=xu())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Bv(){return window}jv="Browser",Ds(new Ku("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Bc(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:jv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ql(jv)},l=new cf(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dl);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ds(new Ku("auth-internal",(function(e){return function(e){return new Vv(e)}(lf(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ks(Fv,Uv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(jv)),Ks(Fv,Uv,"esm2017");var zv=2e3;function qv(e,t,n){return Gv.apply(this,arguments)}function Gv(){return(Gv=lu(su().mark((function e(t,n,r){var i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bv(),o=a.BuildInfo,qc(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Xv(n.sessionId);case 4:return u=e.sent,s={},Kl()?s.ibi=o.packageName:ql()?s.apn=o.packageName:Mc(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ev(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hv(){return(Hv=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bv(),r=n.BuildInfo,i={},Kl()?i.iosBundleId=r.packageName:ql()?i.androidPackageName=r.packageName:Mc(t,"operation-not-supported-in-this-environment"),e.next=5,ev(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kv(e){var t=Bv().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Wv(e,t,n){return Qv.apply(this,arguments)}function Qv(){return(Qv=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bv(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Fc(t,"redirect-cancelled-by-user"))}),zv))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ql()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})))).apply(this,arguments)}function Yv(e){var t,n,r,i,a,o,u,s,c,l,f=Bv();Bc("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Bc("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Bc("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bc("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bc("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Xv(e){return $v.apply(this,arguments)}function $v(){return($v=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jv(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jv(e){if(qc(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Zv=20,em=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return A(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),nu(R(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}($p);function tm(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:om(),postBody:null,tenantId:e.tenantId,error:Fc(e,"no-auth-event")}}function nm(e,t){return um()._set(sm(e),t)}function rm(e){return im.apply(this,arguments)}function im(){return(im=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,um()._get(sm(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,um()._remove(sm(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function am(e,t){var n,r,i=function(e){var t=cm(e),n=t.link?decodeURIComponent(t.link):void 0,r=cm(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return cm(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=cm(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Fc(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function om(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Zv;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function um(){return Dl(bd)}function sm(e){return Ml("authEvent",e.config.apiKey,e.name)}function cm(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=kc(e.split("?"));t[0];return ju(t.slice(1).join("?"))}var lm=function(){function e(){T(this,e),this._redirectPersistence=xd,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wp,this._overrideRedirectResult=Mp}return A(e,[{key:"_initialize",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new em(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Mc(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=lu(su().mark((function e(t,n,r,i){var a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yv(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Pp.clear(),e.next=10,this._originValidation(t);case 10:return o=tm(t,r,i),e.next=13,nm(t,o);case 13:return e.next=15,qv(t,o,n);case 15:return u=e.sent,e.next=18,Kv(u);case 18:return s=e.sent,e.abrupt("return",Wv(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Hv.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Bv(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(lu(su().mark((function n(){return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,rm(e);case 2:t.onEvent(hm());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=lu(su().mark((function n(r){var i,a;return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,rm(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=am(i,r.url)),t.onEvent(a||hm());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Bv().handleOpenURL=function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),fm=lm;function hm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fc("no-auth-event")}}var dm=1e3;function pm(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function vm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return!("file:"!==pm()&&"ionic:"!==pm()&&"capacitor:"!==pm()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function mm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return Pu()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Su();return/Edge\/\d+/.test(e)}(e)}function ym(){try{var e=self.localStorage,t=Td();if(e)return e.setItem(t,"1"),e.removeItem(t),!mm()||Nu()}catch(n){return gm()&&Nu()}return!1}function gm(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function km(){return("http:"===pm()||"https:"===pm()||Cu()||vm())&&!(Au()||Iu())&&ym()&&!gm()}function bm(){return vm()&&"undefined"!==typeof document}function wm(){return xm.apply(this,arguments)}function xm(){return(xm=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bm()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),dm);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _m={LOCAL:"local",NONE:"none",SESSION:"session"},Em=Bc,Tm="persistence";function Sm(e,t){Em(Object.values(_m).includes(t),e,"invalid-persistence-type"),Au()?Em(t!==_m.SESSION,e,"unsupported-persistence-type"):Iu()?Em(t===_m.NONE,e,"unsupported-persistence-type"):gm()?Em(t===_m.NONE||t===_m.LOCAL&&Nu(),e,"unsupported-persistence-type"):Em(t===_m.NONE||ym(),e,"unsupported-persistence-type")}function Im(e){return Cm.apply(this,arguments)}function Cm(){return Cm=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Am(),r=Ml(Tm,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Am(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Pm=Bc,Nm=function(){function e(){T(this,e),this.browserResolver=Dl(Av),this.cordovaResolver=Dl(fm),this.underlyingResolver=null,this._redirectPersistence=xd,this._completeRedirectFn=Wp,this._overrideRedirectResult=Mp}return A(e,[{key:"_initialize",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=lu(su().mark((function e(t,n,r,i){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=lu(su().mark((function e(t,n,r,i){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return bm()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Pm(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wm();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Rm(e){return e.unwrap()}function Dm(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Um(e,function(e,t){var n,r=Hu(e),i=t;return Bc(t.customData.operationType,r,"argument-error"),Bc(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),hd._fromError(r,i)}(e,t));else if(r){var i=Om(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Om(e){var t=(e instanceof Ru?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ru)&&"temporaryProof"in t&&"phoneNumber"in t)return pp.credentialFromResult(e);var n,r=t.providerId;if(!r||r===xc.PASSWORD)return null;switch(r){case xc.GOOGLE:n=th;break;case xc.FACEBOOK:n=eh;break;case xc.GITHUB:n=nh;break;case xc.TWITTER:n=ah;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?rh._create(r,u):Bf._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Zf(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ru?n.credentialFromError(e):n.credentialFromResult(e)}function Lm(e,t){return t.catch((function(t){throw t instanceof Ru&&Dm(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Om(t)),additionalUserInfo:ld(e),user:Vm.getOrCreate(r)}}))}function Mm(e,t){return Fm.apply(this,arguments)}function Fm(){return(Fm=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Lm(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Um=function(){function e(t,n){T(this,e),this.resolver=n,this.auth=t.wrapped()}return A(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Lm(Rm(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Vm=function(){function e(t){T(this,e),this._delegate=t,this.multiFactor=function(e){var t=Hu(e);return md.has(t)||md.set(t,vd._fromUser(t)),md.get(t)}(t)}return A(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lm(this.auth,Sh(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mm(this.auth,sp(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lm(this.auth,Sp(this._delegate,t,Nm)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Im(lf(this.auth));case 2:return e.abrupt("return",qp(this._delegate,t,Nm));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lm(this.auth,Ch(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Mm(this.auth,function(e,t,n){return lp.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Lm(this.auth,function(e,t,n){return Tp.apply(this,arguments)}(this._delegate,e,Nm))}},{key:"reauthenticateWithRedirect",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Im(lf(this.auth));case 2:return e.abrupt("return",Bp(this._delegate,t,Nm));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return $h.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ph(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return nd(Hu(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return nd(Hu(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return dp.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return td.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Jh.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Vm.USER_MAP=new WeakMap;var jm=Bc,Bm=function(){function e(t,n){if(T(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;jm(r,"invalid-api-key",{appName:t.name}),jm(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Nm:void 0;this._delegate=n.initialize({options:{persistence:qm(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Pc),this.linkUnderlyingAuth()}return A(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Vm.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){hf(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Vh.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return jh(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Uh.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lm(this._delegate,qh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Xh.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Yf.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jm(km(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Hp(this._delegate,Nm);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Lm(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){lf(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=zm(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=zm(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Kh.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Fh.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sm(this._delegate,t),e.t0=t,e.next=e.t0===_m.SESSION?4:e.t0===_m.LOCAL?6:e.t0===_m.NONE?11:13;break;case 4:return n=xd,e.abrupt("break",14);case 6:return e.next=8,Dl(Kd)._isAvailable();case 8:return r=e.sent,n=r?Kd:bd,e.abrupt("break",14);case 11:return n=Ll,e.abrupt("break",14);case 13:return e.abrupt("return",Mc("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Lm(this._delegate,function(e){return lh.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Lm(this._delegate,Eh(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Lm(this._delegate,function(e,t){return Rh.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Lm(this._delegate,Hh(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Lm(this._delegate,function(e,t,n){return Wh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Mm(this._delegate,function(e,t,n){return up.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jm(km(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Lm(this._delegate,_p(this._delegate,t,Nm)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jm(km(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Im(this._delegate);case 3:return e.abrupt("return",Vp(this._delegate,t,Nm));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return zh.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function zm(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Vm.getOrCreate(e))},error:t,complete:n}}function qm(e,t){var n=function(e,t){var n=Am();if(!n)return[];var r=Ml(Tm,e,t);switch(n.getItem(r)){case _m.NONE:return[Ll];case _m.LOCAL:return[Kd,xd];case _m.SESSION:return[xd];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Kd)||n.push(Kd),"undefined"!==typeof window)for(var r=0,i=[bd,xd];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ll)||n.push(Ll),n}Bm.Persistence=_m;var Gm=function(){function e(){T(this,e),this.providerId="phone",this._delegate=new pp(Rm(gc.auth()))}return A(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return pp.credential(e,t)}}]),e}();Gm.PHONE_SIGN_IN_METHOD=pp.PHONE_SIGN_IN_METHOD,Gm.PROVIDER_ID=pp.PROVIDER_ID;var Hm,Km=Bc,Wm=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gc.app();T(this,e),Km(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ip(i.auth(),t,n),this.type=this._delegate.type}return A(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Hm=gc).INTERNAL.registerComponent(new Ku("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Bm(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_c,PASSWORD_RESET:Ec,RECOVER_EMAIL:Tc,REVERT_SECOND_FACTOR_ADDITION:Sc,VERIFY_AND_CHANGE_EMAIL:Ic,VERIFY_EMAIL:Cc}},EmailAuthProvider:Xf,FacebookAuthProvider:eh,GithubAuthProvider:nh,GoogleAuthProvider:th,OAuthProvider:Zf,SAMLAuthProvider:ih,PhoneAuthProvider:Gm,PhoneMultiFactorGenerator:Rv,RecaptchaVerifier:Wm,TwitterAuthProvider:ah,Auth:Bm,AuthCredential:vf,Error:Ru}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Hm.registerVersion("@firebase/auth-compat","0.4.4");var Qm,Ym="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xm={},$m=$m||{},Jm=Ym||self;function Zm(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ey(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ty="closure_uid_"+(1e9*Math.random()>>>0),ny=0;function ry(e,t,n){return e.call.apply(e.bind,arguments)}function iy(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ay(e,t,n){return(ay=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ry:iy).apply(null,arguments)}function oy(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function uy(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function sy(){this.s=this.s,this.o=this.o}sy.prototype.s=!1,sy.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ty)&&e[ty]||(e[ty]=++ny))},sy.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cy=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ly(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fy(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Zm(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function hy(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hy.prototype.h=function(){this.defaultPrevented=!0};var dy=function(){if(!Jm.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Jm.addEventListener("test",(function(){}),t),Jm.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function py(e){return/^[\s\xa0]*$/.test(e)}function vy(){var e=Jm.navigator;return e&&(e=e.userAgent)?e:""}function my(e){return-1!=vy().indexOf(e)}function yy(e){return yy[" "](e),e}yy[" "]=function(){};var gy,ky,by=my("Opera"),wy=my("Trident")||my("MSIE"),xy=my("Edge"),_y=xy||wy,Ey=my("Gecko")&&!(-1!=vy().toLowerCase().indexOf("webkit")&&!my("Edge"))&&!(my("Trident")||my("MSIE"))&&!my("Edge"),Ty=-1!=vy().toLowerCase().indexOf("webkit")&&!my("Edge");function Sy(){var e=Jm.document;return e?e.documentMode:void 0}e:{var Iy="",Cy=function(){var e=vy();return Ey?/rv:([^\);]+)(\)|;)/.exec(e):xy?/Edge\/([\d\.]+)/.exec(e):wy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ty?/WebKit\/(\S+)/.exec(e):by?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cy&&(Iy=Cy?Cy[1]:""),wy){var Ay=Sy();if(null!=Ay&&Ay>parseFloat(Iy)){gy=String(Ay);break e}}gy=Iy}if(Jm.document&&wy){var Py=Sy();ky=Py||(parseInt(gy,10)||void 0)}else ky=void 0;var Ny=ky;function Ry(e,t){if(hy.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ey){e:{try{yy(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Dy[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ry.$.h.call(this)}}uy(Ry,hy);var Dy={2:"touch",3:"pen",4:"mouse"};Ry.prototype.h=function(){Ry.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Oy="closure_listenable_"+(1e6*Math.random()|0),Ly=0;function My(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ly,this.fa=this.ia=!1}function Fy(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Uy(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Vy(e){var t={};for(var n in e)t[n]=e[n];return t}var jy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function By(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<jy.length;a++)n=jy[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function zy(e){this.src=e,this.g={},this.h=0}function qy(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=cy(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Fy(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gy(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}zy.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Gy(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new My(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Hy="closure_lm_"+(1e6*Math.random()|0),Ky={};function Wy(e,t,n,r,i){if(r&&r.once)return Yy(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wy(e,t[a],n,r,i);return null}return n=ng(n),e&&e[Oy]?e.O(t,n,ey(r)?!!r.capture:!!r,i):Qy(e,t,n,!1,r,i)}function Qy(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ey(i)?!!i.capture:!!i,u=eg(e);if(u||(e[Hy]=u=new zy(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Zy;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dy||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jy(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Yy(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Yy(e,t[a],n,r,i);return null}return n=ng(n),e&&e[Oy]?e.P(t,n,ey(r)?!!r.capture:!!r,i):Qy(e,t,n,!0,r,i)}function Xy(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Xy(e,t[a],n,r,i);else r=ey(r)?!!r.capture:!!r,n=ng(n),e&&e[Oy]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Gy(a=e.g[t],n,r,i))&&(Fy(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=eg(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gy(t,n,r,i)),(n=-1<e?t[e]:null)&&$y(n))}function $y(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Oy])qy(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jy(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=eg(t))?(qy(n,e),0==n.h&&(n.src=null,t[Hy]=null)):Fy(e)}}}function Jy(e){return e in Ky?Ky[e]:Ky[e]="on"+e}function Zy(e,t){if(e.fa)e=!0;else{t=new Ry(t,this);var n=e.listener,r=e.la||e.src;e.ia&&$y(e),e=n.call(r,t)}return e}function eg(e){return(e=e[Hy])instanceof zy?e:null}var tg="__closure_events_fn_"+(1e9*Math.random()>>>0);function ng(e){return"function"===typeof e?e:(e[tg]||(e[tg]=function(t){return e.handleEvent(t)}),e[tg])}function rg(){sy.call(this),this.i=new zy(this),this.S=this,this.J=null}function ig(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new hy(t,e);else if(t instanceof hy)t.target=t.target||e;else{var i=t;By(t=new hy(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ag(o,r,!0,t)&&i}if(i=ag(o=t.g=e,r,!0,t)&&i,i=ag(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ag(o=t.g=n[a],r,!1,t)&&i}function ag(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&qy(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}uy(rg,sy),rg.prototype[Oy]=!0,rg.prototype.removeEventListener=function(e,t,n,r){Xy(this,e,t,n,r)},rg.prototype.N=function(){if(rg.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fy(n[r]);delete t.g[e],t.h--}}this.J=null},rg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},rg.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var og=Jm.JSON.stringify,ug=function(){function e(t,n){T(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return A(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function sg(){var e=mg,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var cg=function(){function e(){T(this,e),this.h=this.g=null}return A(e,[{key:"add",value:function(e,t){var n=lg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),lg=new ug((function(){return new fg}),(function(e){return e.reset()})),fg=function(){function e(){T(this,e),this.next=this.g=this.h=null}return A(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function hg(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function dg(e){Jm.setTimeout((function(){throw e}),0)}var pg,vg=!1,mg=new cg,yg=function(){var e=Jm.Promise.resolve(void 0);pg=function(){e.then(gg)}},gg=function(){for(var e;e=sg();){try{e.h.call(e.g)}catch(n){dg(n)}var t=lg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}vg=!1};function kg(e,t){rg.call(this),this.h=e||1,this.g=t||Jm,this.j=ay(this.qb,this),this.l=Date.now()}function bg(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function wg(e,t,n){if("function"===typeof e)n&&(e=ay(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ay(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jm.setTimeout(e,t||0)}function xg(e){e.g=wg((function(){e.g=null,e.i&&(e.i=!1,xg(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}uy(kg,rg),(Qm=kg.prototype).ga=!1,Qm.T=null,Qm.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ig(this,"tick"),this.ga&&(bg(this),this.start()))}},Qm.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qm.N=function(){kg.$.N.call(this),bg(this),delete this.g};var _g=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return A(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:xg(this)}},{key:"N",value:function(){nu(R(n.prototype),"N",this).call(this),this.g&&(Jm.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sy);function Eg(e){sy.call(this),this.h=e,this.g={}}uy(Eg,sy);var Tg=[];function Sg(e,t,n,r){Array.isArray(n)||(n&&(Tg[0]=n.toString()),n=Tg);for(var i=0;i<n.length;i++){var a=Wy(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ig(e){Uy(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$y(e)}),e),e.g={}}function Cg(){this.g=!0}function Ag(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return og(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Eg.prototype.N=function(){Eg.$.N.call(this),Ig(this)},Eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cg.prototype.Ea=function(){this.g=!1},Cg.prototype.info=function(){};var Pg={},Ng=null;function Rg(){return Ng=Ng||new rg}function Dg(e){hy.call(this,Pg.Ta,e)}function Og(e){var t=Rg();ig(t,new Dg(t))}function Lg(e,t){hy.call(this,Pg.STAT_EVENT,e),this.stat=t}function Mg(e){var t=Rg();ig(t,new Lg(t,e))}function Fg(e,t){hy.call(this,Pg.Ua,e),this.size=t}function Ug(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jm.setTimeout((function(){e()}),t)}Pg.Ta="serverreachability",uy(Dg,hy),Pg.STAT_EVENT="statevent",uy(Lg,hy),Pg.Ua="timingevent",uy(Fg,hy);var Vg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Bg(){}function zg(e){return e.h||(e.h=e.i())}function qg(){}Bg.prototype.h=null;var Gg,Hg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kg(){hy.call(this,"d")}function Wg(){hy.call(this,"c")}function Qg(){}function Yg(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Eg(this),this.P=$g,e=_y?125:void 0,this.V=new kg(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Xg}function Xg(){this.i=null,this.g="",this.h=!1}uy(Kg,hy),uy(Wg,hy),uy(Qg,Bg),Qg.prototype.g=function(){return new XMLHttpRequest},Qg.prototype.i=function(){return{}},Gg=new Qg;var $g=45e3,Jg={},Zg={};function ek(e,t,n){e.L=1,e.v=kk(pk(t)),e.s=n,e.S=!0,tk(e,null)}function tk(e,t){e.G=Date.now(),ak(e),e.A=pk(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Rk(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Xg,e.g=Db(e.l,n?t:null,!e.s),0<e.O&&(e.M=new _g(ay(e.Pa,e,e.g),e.O)),Sg(e.U,e.g,"readystatechange",e.nb),t=e.I?Vy(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Og(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function nk(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function rk(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=ik(e,n))==Zg){4==t&&(e.o=4,Mg(14),i=!1),Ag(e.j,e.m,null,"[Incomplete Response]");break}if(r==Jg){e.o=4,Mg(15),Ag(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ag(e.j,e.m,r,null),lk(e,r)}nk(e)&&r!=Zg&&r!=Jg&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Mg(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Tb(t),t.M=!0,Mg(11))):(Ag(e.j,e.m,n,"[Invalid Chunked Response]"),ck(e),sk(e))}function ik(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Zg:(n=Number(t.substring(n,r)),isNaN(n)?Jg:(r+=1)+n>t.length?Zg:(t=t.slice(r,r+n),e.C=r+n,t))}function ak(e){e.Y=Date.now()+e.P,ok(e,e.P)}function ok(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ug(ay(e.lb,e),t)}function uk(e){e.B&&(Jm.clearTimeout(e.B),e.B=null)}function sk(e){0==e.l.H||e.J||Cb(e.l,e)}function ck(e){uk(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,bg(e.V),Ig(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function lk(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Vk(n.i,e)))if(!e.K&&Vk(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ib(n),yb(n)}Eb(n),Mg(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ug(ay(n.ib,n),6e3));if(1>=Uk(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Pb(n,11)}else if((e.K||n.g==e)&&Ib(n),!py(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(jk(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,gk(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Rb(r,r.J?r.pa:null,r.Y),d.K){Bk(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(uk(p),ak(p)),r.g=d}else _b(r);0<n.j.length&&kb(n)}else"stop"!=a[0]&&"close"!=a[0]||Pb(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Pb(n,7):mb(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Og()}catch(a){}}function fk(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zm(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Zm(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Zm(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Qm=Yg.prototype).setTimeout=function(e){this.P=e},Qm.nb=function(e){e=e.target;var t=this.M;t&&3==lb(e)?t.l():this.Pa(e)},Qm.Pa=function(e){try{if(e==this.g)e:{var t=lb(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||_y||this.g&&(this.h.h||this.g.ja()||fb(this.g)))){this.J||4!=t||7==n||Og(),uk(this);var r=this.g.da();this.ca=r;t:if(nk(this)){var i=fb(this.g);e="";var a=i.length,o=4==lb(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ck(this),sk(this);var u="";break t}this.h.i=new Jm.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!py(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Mg(12),ck(this),sk(this);break e}Ag(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lk(this,r)}this.S?(rk(this,t,u),_y&&this.i&&3==t&&(Sg(this.U,this.V,"tick",this.mb),this.V.start())):(Ag(this.j,this.m,u,null),lk(this,u)),4==t&&ck(this),this.i&&!this.J&&(4==t?Cb(this.l,this):(this.i=!1,ak(this)))}else(function(e){var t={};e=(e.g&&2<=lb(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!py(e[n])){var r=hg(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Mg(12)):(this.o=0,Mg(13)),ck(this),sk(this)}}}catch(t){}},Qm.mb=function(){if(this.g){var e=lb(this.g),t=this.g.ja();this.C<t.length&&(uk(this),rk(this,e,t),this.i&&4!=e&&ak(this))}},Qm.cancel=function(){this.J=!0,ck(this)},Qm.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Og(),Mg(17)),ck(this),this.o=2,sk(this)):ok(this,this.Y-e)};var hk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dk(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof dk){this.h=e.h,vk(this,e.j),this.s=e.s,this.g=e.g,mk(this,e.m),this.l=e.l;var t=e.i,n=new Ck;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),yk(this,n),this.o=e.o}else e&&(t=String(e).match(hk))?(this.h=!1,vk(this,t[1]||"",!0),this.s=bk(t[2]||""),this.g=bk(t[3]||"",!0),mk(this,t[4]),this.l=bk(t[5]||"",!0),yk(this,t[6]||"",!0),this.o=bk(t[7]||"")):(this.h=!1,this.i=new Ck(null,this.h))}function pk(e){return new dk(e)}function vk(e,t,n){e.j=n?bk(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mk(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function yk(e,t,n){t instanceof Ck?(e.i=t,function(e,t){t&&!e.j&&(Ak(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Pk(this,t),Rk(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=wk(t,Sk)),e.i=new Ck(t,e.h))}function gk(e,t,n){e.i.set(t,n)}function kk(e){return gk(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function bk(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wk(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,xk),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xk(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dk.prototype.toString=function(){var e=[],t=this.j;t&&e.push(wk(t,_k,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(wk(t,_k,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wk(n,"/"==n.charAt(0)?Tk:Ek,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",wk(n,Ik)),e.join("")};var _k=/[#\/\?@]/g,Ek=/[#\?:]/g,Tk=/[#\?]/g,Sk=/[#\?@]/g,Ik=/#/g;function Ck(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ak(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Pk(e,t){Ak(e),t=Dk(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nk(e,t){return Ak(e),t=Dk(e,t),e.g.has(t)}function Rk(e,t,n){Pk(e,t),0<n.length&&(e.i=null,e.g.set(Dk(e,t),ly(n)),e.h+=n.length)}function Dk(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Qm=Ck.prototype).add=function(e,t){Ak(this),this.i=null,e=Dk(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Qm.forEach=function(e,t){Ak(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Qm.ta=function(){Ak(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Qm.Z=function(e){Ak(this);var t=[];if("string"===typeof e)Nk(this,e)&&(t=t.concat(this.g.get(Dk(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Qm.set=function(e,t){return Ak(this),this.i=null,Nk(this,e=Dk(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Qm.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Qm.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ok=A((function e(t,n){T(this,e),this.g=t,this.map=n}));function Lk(e){this.l=e||Mk,Jm.PerformanceNavigationTiming?e=0<(e=Jm.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jm.g&&Jm.g.Ka&&Jm.g.Ka()&&Jm.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Mk=10;function Fk(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Uk(e){return e.h?1:e.g?e.g.size:0}function Vk(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function jk(e,t){e.g?e.g.add(t):e.h=t}function Bk(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function zk(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=x(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return ly(e.i)}Lk.prototype.cancel=function(){if(this.i=zk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=x(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var qk,Gk=function(){function e(){T(this,e)}return A(e,[{key:"stringify",value:function(e){return Jm.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Jm.JSON.parse(e,void 0)}}]),e}();function Hk(){this.g=new Gk}function Kk(e,t,n){var r=n||"";try{fk(e,(function(e,n){var i=e;ey(e)&&(i=og(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wk(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Qk(e){this.l=e.fc||null,this.j=e.ob||!1}function Yk(e,t){rg.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Xk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}uy(Qk,Bg),Qk.prototype.g=function(){return new Yk(this.l,this.j)},Qk.prototype.i=(qk={},function(){return qk}),uy(Yk,rg);var Xk=0;function $k(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Jk(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Zk(e)}function Zk(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Qm=Yk.prototype).open=function(e,t){if(this.readyState!=Xk)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Zk(this)},Qm.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Jm).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Qm.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jk(this)),this.readyState=Xk},Qm.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Zk(this)),this.g&&(this.readyState=3,Zk(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Jm.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$k(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Qm.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Jk(this):Zk(this),3==this.readyState&&$k(this)}},Qm.Za=function(e){this.g&&(this.response=this.responseText=e,Jk(this))},Qm.Ya=function(e){this.g&&(this.response=e,Jk(this))},Qm.ka=function(){this.g&&Jk(this)},Qm.setRequestHeader=function(e,t){this.v.append(e,t)},Qm.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Qm.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Yk.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var eb=Jm.JSON.parse;function tb(e){rg.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nb,this.L=this.M=!1}uy(tb,rg);var nb="",rb=/^https?$/i,ib=["POST","PUT"];function ab(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ob(e),sb(e)}function ob(e){e.F||(e.F=!0,ig(e,"complete"),ig(e,"error"))}function ub(e){if(e.h&&"undefined"!=typeof $m&&(!e.C[1]||4!=lb(e)||2!=e.da()))if(e.v&&4==lb(e))wg(e.La,0,e);else if(ig(e,"readystatechange"),4==lb(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(hk)[1]||null;!a&&Jm.self&&Jm.self.location&&(a=Jm.self.location.protocol.slice(0,-1)),i=!rb.test(a?a.toLowerCase():"")}t=i}if(t)ig(e,"complete"),ig(e,"success");else{e.m=6;try{var o=2<lb(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",ob(e)}}finally{sb(e)}}}function sb(e,t){if(e.g){cb(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||ig(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function cb(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Jm.clearTimeout(e.A),e.A=null)}function lb(e){return e.g?e.g.readyState:0}function fb(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case nb:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(gw){return null}}function hb(e){var t="";return Uy(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function db(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=hb(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gk(e,t,n))}function pb(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vb(e){this.Ga=0,this.j=[],this.l=new Cg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=pb("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=pb("baseRetryDelayMs",5e3,e),this.hb=pb("retryDelaySeedMs",1e4,e),this.eb=pb("forwardChannelMaxRetries",2,e),this.xa=pb("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Lk(e&&e.concurrentRequestLimit),this.Ja=new Hk,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function mb(e){if(gb(e),3==e.H){var t=e.W++,n=pk(e.I);if(gk(n,"SID",e.K),gk(n,"RID",t),gk(n,"TYPE","terminate"),wb(e,n),(t=new Yg(e,e.l,t)).L=2,t.v=kk(pk(n)),n=!1,Jm.navigator&&Jm.navigator.sendBeacon)try{n=Jm.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Jm.Image&&((new Image).src=t.v,n=!0),n||(t.g=Db(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ak(t)}Nb(e)}function yb(e){e.g&&(Tb(e),e.g.cancel(),e.g=null)}function gb(e){yb(e),e.u&&(Jm.clearTimeout(e.u),e.u=null),Ib(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jm.clearTimeout(e.m),e.m=null)}function kb(e){if(!Fk(e.i)&&!e.m){e.m=!0;var t=e.Na;pg||yg(),vg||(pg(),vg=!0),mg.add(t,e),e.C=0}}function bb(e,t){var n;n=t?t.m:e.W++;var r=pk(e.I);gk(r,"SID",e.K),gk(r,"RID",n),gk(r,"AID",e.V),wb(e,r),e.o&&e.s&&db(r,e.o,e.s),n=new Yg(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=xb(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),jk(e.i,n),ek(n,r,t)}function wb(e,t){e.na&&Uy(e.na,(function(e,n){gk(t,n,e)})),e.h&&fk({},(function(e,n){gk(t,n,e)}))}function xb(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ay(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Kk(l,o,"req"+c+"_")}catch(Mx){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function _b(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;pg||yg(),vg||(pg(),vg=!0),mg.add(t,e),e.A=0}}function Eb(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ug(ay(e.Ma,e),Ab(e,e.A)),e.A++,!0)}function Tb(e){null!=e.B&&(Jm.clearTimeout(e.B),e.B=null)}function Sb(e){e.g=new Yg(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=pk(e.wa);gk(t,"RID","rpc"),gk(t,"SID",e.K),gk(t,"AID",e.V),gk(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&gk(t,"TO",e.qa),gk(t,"TYPE","xmlhttp"),wb(e,t),e.o&&e.s&&db(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=kk(pk(t)),n.s=null,n.S=!0,tk(n,e)}function Ib(e){null!=e.v&&(Jm.clearTimeout(e.v),e.v=null)}function Cb(e,t){var n=null;if(e.g==t){Ib(e),Tb(e),e.g=null;var r=2}else{if(!Vk(e.i,t))return;n=t.F,Bk(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ig(r=Rg(),new Fg(r,n)),kb(e)}else _b(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Uk(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ug(ay(e.Na,e,t),Ab(e,e.C)),e.C++,!0))}(e,t)||2==r&&Eb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Pb(e,5);break;case 4:Pb(e,10);break;case 3:Pb(e,6);break;default:Pb(e,2)}}function Ab(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Pb(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ay(e.pb,e);n||(n=new dk("//www.google.com/images/cleardot.gif"),Jm.location&&"http"==Jm.location.protocol||vk(n,"https"),kk(n)),function(e,t){var n=new Cg;if(Jm.Image){var r=new Image;r.onload=oy(Wk,n,r,"TestLoadImage: loaded",!0,t),r.onerror=oy(Wk,n,r,"TestLoadImage: error",!1,t),r.onabort=oy(Wk,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=oy(Wk,n,r,"TestLoadImage: timeout",!1,t),Jm.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Mg(2);e.H=0,e.h&&e.h.za(t),Nb(e),gb(e)}function Nb(e){if(e.H=0,e.ma=[],e.h){var t=zk(e.i);0==t.length&&0==e.j.length||(fy(e.ma,t),fy(e.ma,e.j),e.i.i.length=0,ly(e.j),e.j.length=0),e.h.ya()}}function Rb(e,t,n){var r=n instanceof dk?pk(n):new dk(n);if(""!=r.g)t&&(r.g=t+"."+r.g),mk(r,r.m);else{var i=Jm.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new dk(null);r&&vk(a,r),t&&(a.g=t),i&&mk(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&gk(r,n,t),gk(r,"VER",e.ra),wb(e,r),r}function Db(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new tb(new Qk({ob:!0})):new tb(e.va)).Oa(e.J),t}function Ob(){}function Lb(){if(wy&&!(10<=Number(Ny)))throw Error("Environmental error: no available transport.")}function Mb(e,t){rg.call(this),this.g=new vb(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!py(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!py(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Vb(this)}function Fb(e){Kg.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ub(){Wg.call(this),this.status=1}function Vb(e){this.g=e}function jb(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bb(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function zb(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Qm=tb.prototype).Oa=function(e){this.M=e},Qm.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gg.g(),this.C=this.u?zg(this.u):zg(Gg),this.g.onreadystatechange=ay(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void ab(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=x(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Jm.FormData&&e instanceof Jm.FormData,!(0<=cy(ib,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=x(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cb(this),0<this.B&&((this.L=function(e){return wy&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ay(this.ua,this)):this.A=wg(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){ab(this,u)}},Qm.ua=function(){"undefined"!=typeof $m&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ig(this,"timeout"),this.abort(8))},Qm.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ig(this,"complete"),ig(this,"abort"),sb(this))},Qm.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sb(this,!0)),tb.$.N.call(this)},Qm.La=function(){this.s||(this.G||this.v||this.l?ub(this):this.kb())},Qm.kb=function(){ub(this)},Qm.isActive=function(){return!!this.g},Qm.da=function(){try{return 2<lb(this)?this.g.status:-1}catch(qk){return-1}},Qm.ja=function(){try{return this.g?this.g.responseText:""}catch(qk){return""}},Qm.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eb(t)}},Qm.Ia=function(){return this.m},Qm.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Qm=vb.prototype).ra=8,Qm.H=1,Qm.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Yg(this,this.l,e),n=this.s;if(this.U&&(n?By(n=Vy(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=xb(this,t,r),gk(i=pk(this.I),"RID",e),gk(i,"CVER",22),this.F&&gk(i,"X-HTTP-Session-Id",this.F),wb(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(hb(n)))+"&"+r:this.o&&db(i,this.o,n)),jk(this.i,t),this.bb&&gk(i,"TYPE","init"),this.P?(gk(i,"$req",r),gk(i,"SID","null"),t.aa=!0,ek(t,i,null)):ek(t,i,r),this.H=2}}else 3==this.H&&(e?bb(this,e):0==this.j.length||Fk(this.i)||bb(this))},Qm.Ma=function(){if(this.u=null,Sb(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ug(ay(this.jb,this),e)}},Qm.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mg(10),yb(this),Sb(this))},Qm.ib=function(){null!=this.v&&(this.v=null,yb(this),Eb(this),Mg(19))},Qm.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Mg(2)):(this.l.info("Failed to ping google.com"),Mg(1))},Qm.isActive=function(){return!!this.h&&this.h.isActive(this)},(Qm=Ob.prototype).Ba=function(){},Qm.Aa=function(){},Qm.za=function(){},Qm.ya=function(){},Qm.isActive=function(){return!0},Qm.Va=function(){},Lb.prototype.g=function(e,t){return new Mb(e,t)},uy(Mb,rg),Mb.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Mg(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Rb(e,null,e.Y),kb(e)},Mb.prototype.close=function(){mb(this.g)},Mb.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=og(e),e=n);t.j.push(new Ok(t.fb++,e)),3==t.H&&kb(t)},Mb.prototype.N=function(){this.g.h=null,delete this.j,mb(this.g),delete this.g,Mb.$.N.call(this)},uy(Fb,Kg),uy(Ub,Wg),uy(Vb,Ob),Vb.prototype.Ba=function(){ig(this.g,"a")},Vb.prototype.Aa=function(e){ig(this.g,new Fb(e))},Vb.prototype.za=function(e){ig(this.g,new Ub)},Vb.prototype.ya=function(){ig(this.g,"b")},uy(jb,(function(){this.blockSize=-1})),jb.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},jb.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Bb(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Bb(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Bb(this,r),i=0;break}}this.h=i,this.i+=t},jb.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var qb={};function Gb(e){return-128<=e&&128>e?function(e,t){var n=qb;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new zb([0|e],0>e?-1:0)})):new zb([0|e],0>e?-1:0)}function Hb(e){if(isNaN(e)||!isFinite(e))return Wb;if(0>e)return Jb(Hb(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Kb;return new zb(t,0)}var Kb=4294967296,Wb=Gb(0),Qb=Gb(1),Yb=Gb(16777216);function Xb(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function $b(e){return-1==e.h}function Jb(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new zb(n,~e.h).add(Qb)}function Zb(e,t){return e.add(Jb(t))}function ew(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function tw(e,t){this.g=e,this.h=t}function nw(e,t){if(Xb(t))throw Error("division by zero");if(Xb(e))return new tw(Wb,Wb);if($b(e))return t=nw(Jb(e),t),new tw(Jb(t.g),Jb(t.h));if($b(t))return t=nw(e,Jb(t)),new tw(Jb(t.g),t.h);if(30<e.g.length){if($b(e)||$b(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Qb,r=t;0>=r.X(e);)n=rw(n),r=rw(r);var i=iw(n,1),a=iw(r,1);for(r=iw(r,2),n=iw(n,2);!Xb(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=iw(r,1),n=iw(n,1)}return t=Zb(e,i.R(t)),new tw(i,t)}for(i=Wb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Hb(n)).R(t);$b(o)||0<o.X(e);)o=(a=Hb(n-=r)).R(t);Xb(a)&&(a=Qb),i=i.add(a),e=Zb(e,o)}return new tw(i,e)}function rw(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new zb(n,e.h)}function iw(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new zb(i,e.h)}(Qm=zb.prototype).ea=function(){if($b(this))return-Jb(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Kb+r)*t,t*=Kb}return e},Qm.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Xb(this))return"0";if($b(this))return"-"+Jb(this).toString(e);for(var t=Hb(Math.pow(e,6)),n=this,r="";;){var i=nw(n,t).g,a=((0<(n=Zb(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Xb(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Qm.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Qm.X=function(e){return $b(e=Zb(this,e))?-1:Xb(e)?0:1},Qm.abs=function(){return $b(this)?Jb(this):this},Qm.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new zb(n,-2147483648&n[n.length-1]?-1:0)},Qm.R=function(e){if(Xb(this)||Xb(e))return Wb;if($b(this))return $b(e)?Jb(this).R(Jb(e)):Jb(Jb(this).R(e));if($b(e))return Jb(this.R(Jb(e)));if(0>this.X(Yb)&&0>e.X(Yb))return Hb(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,ew(n,2*r+2*i),n[2*r+2*i+1]+=a*s,ew(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,ew(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,ew(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new zb(n,0)},Qm.gb=function(e){return nw(this,e).h},Qm.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new zb(n,this.h&e.h)},Qm.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new zb(n,this.h|e.h)},Qm.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new zb(n,this.h^e.h)},Lb.prototype.createWebChannel=Lb.prototype.g,Mb.prototype.send=Mb.prototype.u,Mb.prototype.open=Mb.prototype.m,Mb.prototype.close=Mb.prototype.close,Vg.NO_ERROR=0,Vg.TIMEOUT=8,Vg.HTTP_ERROR=6,jg.COMPLETE="complete",qg.EventType=Hg,Hg.OPEN="a",Hg.CLOSE="b",Hg.ERROR="c",Hg.MESSAGE="d",rg.prototype.listen=rg.prototype.O,tb.prototype.listenOnce=tb.prototype.P,tb.prototype.getLastError=tb.prototype.Sa,tb.prototype.getLastErrorCode=tb.prototype.Ia,tb.prototype.getStatus=tb.prototype.da,tb.prototype.getResponseJson=tb.prototype.Wa,tb.prototype.getResponseText=tb.prototype.ja,tb.prototype.send=tb.prototype.ha,tb.prototype.setWithCredentials=tb.prototype.Oa,jb.prototype.digest=jb.prototype.l,jb.prototype.reset=jb.prototype.reset,jb.prototype.update=jb.prototype.j,zb.prototype.add=zb.prototype.add,zb.prototype.multiply=zb.prototype.R,zb.prototype.modulo=zb.prototype.gb,zb.prototype.compare=zb.prototype.X,zb.prototype.toNumber=zb.prototype.ea,zb.prototype.toString=zb.prototype.toString,zb.prototype.getBits=zb.prototype.D,zb.fromNumber=Hb,zb.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Jb(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Hb(Math.pow(n,8)),i=Wb,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Hb(Math.pow(n,o)),i=i.R(o).add(Hb(u))):i=(i=i.R(r)).add(Hb(u))}return i};var aw=Xm.createWebChannelTransport=function(){return new Lb},ow=Xm.getStatEventTarget=function(){return Rg()},uw=Xm.ErrorCode=Vg,sw=Xm.EventType=jg,cw=Xm.Event=Pg,lw=Xm.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fw=Xm.FetchXmlHttpFactory=Qk,hw=Xm.WebChannel=qg,dw=Xm.XhrIo=tb,pw=Xm.Md5=jb,vw=Xm.Integer=zb,mw="@firebase/firestore",yw=function(){function e(t){T(this,e),this.uid=t}return A(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();yw.UNAUTHENTICATED=new yw(null),yw.GOOGLE_CREDENTIALS=new yw("google-credentials-uid"),yw.FIRST_PARTY=new yw("first-party-uid"),yw.MOCK_USER=new yw("mock-user");var gw="10.1.0",kw=new rs("@firebase/firestore");function bw(){return kw.logLevel}function ww(e){if(kw.logLevel<=Xu.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ew);kw.debug.apply(kw,["Firestore (".concat(gw,"): ").concat(e)].concat(f(i)))}}function xw(e){if(kw.logLevel<=Xu.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ew);kw.error.apply(kw,["Firestore (".concat(gw,"): ").concat(e)].concat(f(i)))}}function _w(e){if(kw.logLevel<=Xu.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ew);kw.warn.apply(kw,["Firestore (".concat(gw,"): ").concat(e)].concat(f(i)))}}function Ew(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Tw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gw,") INTERNAL ASSERTION FAILED: ")+e;throw xw(t),new Error(t)}function Sw(e,t){e||Tw()}function Iw(e,t){return e}var Cw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Aw=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return A(n)}(Ru),Pw=A((function e(){var t=this;T(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Nw=A((function e(t,n){T(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Rw=function(){function e(){T(this,e)}return A(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yw.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Dw=function(){function e(t){T(this,e),this.token=t,this.changeListener=null}return A(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ow=function(){function e(t){T(this,e),this.t=t,this.currentUser=yw.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return A(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Pw;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Pw,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ww("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ww("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pw)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ww("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Sw("string"==typeof n.accessToken),new Nw(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Sw(null===e||"string"==typeof e),new yw(e)}}]),e}(),Lw=function(){function e(t,n,r){T(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=yw.FIRST_PARTY,this.I=new Map}return A(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),Mw=function(){function e(t,n,r){T(this,e),this.l=t,this.h=n,this.P=r}return A(e,[{key:"getToken",value:function(){return Promise.resolve(new Lw(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yw.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Fw=A((function e(t){T(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Uw=function(){function e(t){T(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return A(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ww("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,ww("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ww("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):ww("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Sw("string"==typeof t.token),e.R=t.token,new Fw(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Vw(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var jw=function(){function e(){T(this,e)}return A(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Vw(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Bw(e,t){return e<t?-1:e>t?1:0}function zw(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function qw(e){return e+"\0"}var Gw=function(){function e(t,n){if(T(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Aw(Cw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Aw(Cw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Aw(Cw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Aw(Cw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return A(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Bw(this.nanoseconds,e.nanoseconds):Bw(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Hw=function(){function e(t){T(this,e),this.timestamp=t}return A(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Gw(0,0))}},{key:"max",value:function(){return new e(new Gw(253402300799,999999999))}}]),e}(),Kw=function(){function e(t,n,r){T(this,e),void 0===n?n=0:n>t.length&&Tw(),void 0===r?r=t.length-n:r>t.length-n&&Tw(),this.segments=t,this.offset=n,this.len=r}return A(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ww=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,f(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Kw),Qw=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yw=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Qw.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Aw(Cw.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Aw(Cw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Aw(Cw.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Kw),Xw=function(){function e(t){T(this,e),this.path=t}return A(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ww.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ww.fromString(t))}},{key:"fromName",value:function(t){return new e(Ww.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ww.emptyPath())}},{key:"comparator",value:function(e,t){return Ww.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ww(t.slice()))}}]),e}(),$w=A((function e(t,n,r,i){T(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Jw(e){return e.fields.find((function(e){return 2===e.kind}))}function Zw(e){return e.fields.filter((function(e){return 2!==e.kind}))}$w.UNKNOWN_ID=-1;var ex=A((function e(t,n){T(this,e),this.fieldPath=t,this.kind=n}));var tx=function(){function e(t,n){T(this,e),this.sequenceNumber=t,this.offset=n}return A(e,null,[{key:"empty",value:function(){return new e(0,ix.min())}}]),e}();function nx(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hw.fromTimestamp(1e9===r?new Gw(n+1,0):new Gw(n,r));return new ix(i,Xw.empty(),t)}function rx(e){return new ix(e.readTime,e.key,-1)}var ix=function(){function e(t,n,r){T(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return A(e,null,[{key:"min",value:function(){return new e(Hw.min(),Xw.empty(),-1)}},{key:"max",value:function(){return new e(Hw.max(),Xw.empty(),-1)}}]),e}();function ax(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Xw.comparator(e.documentKey,t.documentKey))?n:Bw(e.largestBatchId,t.largestBatchId)}var ox="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ux=function(){function e(){T(this,e),this.onCommittedListeners=[]}return A(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function sx(e){return cx.apply(this,arguments)}function cx(){return(cx=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Cw.FAILED_PRECONDITION&&t.message===ox){e.next=2;break}throw t;case 2:ww("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lx=function(){function e(t){var n=this;T(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return A(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Tw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=x(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),fx=function(){function e(t,n){var r=this;T(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new Pw,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new px(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=kx(e.target.error);r.m.reject(new px(t,n))}}return A(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(ww("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new mx(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new px(n,t)}}}]),e}(),hx=function(){function e(t,n,r){T(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Su())&&xw("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return A(e,[{key:"N",value:function(){var e=lu(su().mark((function e(t){var n=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ww("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new px(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Aw(Cw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Aw(Cw.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new px(t,n))},i.onupgradeneeded=function(e){ww("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){ww("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=lu(su().mark((function e(t,n,r,i){var a,o,u,s,c=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=su().mark((function e(){var n,u,s,l;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=fx.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),lx.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,ww("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ww("SimpleDb","Removing database:",e),yx(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!Nu())return!1;if(e.C())return!0;var t=Su(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),dx=function(){function e(t){T(this,e),this.q=t,this.K=!1,this.$=null}return A(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return yx(this.q.delete())}}]),e}(),px=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,Cw.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return A(n)}(Aw);function vx(e){return"IndexedDbTransactionError"===e.name}var mx=function(){function e(t){T(this,e),this.store=t}return A(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ww("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ww("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),yx(n)}},{key:"add",value:function(e){return ww("SimpleDb","ADD",this.store.name,e,e),yx(this.store.add(e))}},{key:"get",value:function(e){var t=this;return yx(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ww("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ww("SimpleDb","DELETE",this.store.name,e),yx(this.store.delete(e))}},{key:"count",value:function(){return ww("SimpleDb","COUNT",this.store.name),yx(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new lx((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new lx((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){ww("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new lx((function(n,r){t.onerror=function(e){var t=kx(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new lx((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new dx(i),o=t(i.primaryKey,i.value,a);if(o instanceof lx){var u=o.catch((function(e){return a.done(),lx.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return lx.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function yx(e){return new lx((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=kx(e.target.error);n(t)}}))}var gx=!1;function kx(e){var t=hx.D(Su());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Aw("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return gx||(gx=!0,setTimeout((function(){throw r}),0)),r}}return e}var bx=function(){function e(t,n){T(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return A(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;ww("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ww,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!vx(e.t4)){e.next=17;break}ww("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,sx(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),wx=function(){function e(t,n){T(this,e),this.localStore=t,this.persistence=n}return A(e,[{key:"ne",value:function(){var e=lu(su().mark((function e(){var t,n=this,r=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return lx.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ww("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return ww("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=rx(t);ax(r,n)>0&&(n=r)})),new ix(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),xx=function(){function e(t,n){var r=this;T(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return A(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function _x(e){return null==e}function Ex(e){return 0===e&&1/e==-1/0}function Tx(e){return"number"==typeof e&&Number.isInteger(e)&&!Ex(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Sx(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Cx(t)),t=Ix(e.get(n),t);return Cx(t)}function Ix(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Cx(e){return e+"\x01\x01"}function Ax(e){var t=e.length;if(Sw(t>=2),2===t)return Sw("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ww.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Tw(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Tw()}a=o+2}return new Ww(r)}xx.ae=-1;var Px=["userId","batchId"];function Nx(e,t){return[e,Sx(t)]}function Rx(e,t,n){return[e,Sx(t),n]}var Dx={},Ox=["prefixPath","collectionGroup","readTime","documentId"],Lx=["prefixPath","collectionGroup","documentId"],Mx=["collectionGroup","readTime","prefixPath","documentId"],Fx=["canonicalId","targetId"],Ux=["targetId","path"],Vx=["path","targetId"],jx=["collectionId","parent"],Bx=["indexId","uid"],zx=["uid","sequenceNumber"],qx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gx=["indexId","uid","orderedDocumentKey"],Hx=["userId","collectionPath","documentId"],Kx=["userId","collectionPath","largestBatchId"],Wx=["userId","collectionGroup","largestBatchId"],Qx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Yx=[].concat(f(Qx),["documentOverlays"]),Xx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$x=Xx,Jx=[].concat($x,["indexConfiguration","indexState","indexEntries"]),Zx=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return A(n)}(ux);function e_(e,t){var n=Iw(e);return hx.O(n.ue,t)}function t_(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function n_(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function r_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var i_=function(){function e(t,n){T(this,e),this.comparator=t,this.root=n||o_.EMPTY}return A(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,o_.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,o_.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new a_(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new a_(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new a_(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new a_(this.root,e,this.comparator,!0)}}]),e}(),a_=function(){function e(t,n,r,i){T(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return A(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),o_=function(){function e(t,n,r,i,a){T(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return A(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Tw();if(this.right.isRed())throw Tw();var e=this.left.check();if(e!==this.right.check())throw Tw();return e+(this.isRed()?0:1)}}]),e}();o_.EMPTY=null,o_.RED=!0,o_.BLACK=!1,o_.EMPTY=new(function(){function e(){T(this,e),this.size=0}return A(e,[{key:"key",get:function(){throw Tw()}},{key:"value",get:function(){throw Tw()}},{key:"color",get:function(){throw Tw()}},{key:"left",get:function(){throw Tw()}},{key:"right",get:function(){throw Tw()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new o_(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var u_=function(){function e(t){T(this,e),this.comparator=t,this.data=new i_(this.comparator)}return A(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new s_(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new s_(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),s_=function(){function e(t){T(this,e),this.iter=t}return A(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function c_(e){return e.hasNext()?e.getNext():void 0}var l_=function(){function e(t){T(this,e),this.fields=t,t.sort(Yw.comparator)}return A(e,[{key:"unionWith",value:function(t){var n,r=new u_(Yw.comparator),i=x(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=x(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=x(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return zw(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),f_=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return A(n)}(du(Error));var h_=function(e){function t(e){T(this,t),this.binaryString=e}return A(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Bw(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new f_("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();h_.EMPTY_BYTE_STRING=new h_("");var d_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function p_(e){if(Sw(!!e),"string"==typeof e){var t=0,n=d_.exec(e);if(Sw(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:v_(e.seconds),nanos:v_(e.nanos)}}function v_(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function m_(e){return"string"==typeof e?h_.fromBase64String(e):h_.fromUint8Array(e)}function y_(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function g_(e){var t=e.mapValue.fields.__previous_value__;return y_(t)?g_(t):t}function k_(e){var t=p_(e.mapValue.fields.__local_write_time__.timestampValue);return new Gw(t.seconds,t.nanos)}var b_=A((function e(t,n,r,i,a,o,u,s,c){T(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),w_=function(){function e(t,n){T(this,e),this.projectId=t,this.database=n||"(default)"}return A(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),x_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},__={nullValue:"NULL_VALUE"};function E_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?y_(e)?4:U_(e)?9007199254740991:10:Tw()}function T_(e,t){if(e===t)return!0;var n=E_(e);if(n!==E_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return k_(e).isEqual(k_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=p_(e.timestampValue),r=p_(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return m_(e.bytesValue).isEqual(m_(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return v_(e.geoPointValue.latitude)===v_(t.geoPointValue.latitude)&&v_(e.geoPointValue.longitude)===v_(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return v_(e.integerValue)===v_(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=v_(e.doubleValue),r=v_(t.doubleValue);return n===r?Ex(n)===Ex(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zw(e.arrayValue.values||[],t.arrayValue.values||[],T_);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(t_(n)!==t_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!T_(n[i],r[i])))return!1;return!0}(e,t);default:return Tw()}}function S_(e,t){return void 0!==(e.values||[]).find((function(e){return T_(e,t)}))}function I_(e,t){if(e===t)return 0;var n=E_(e),r=E_(t);if(n!==r)return Bw(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bw(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=v_(e.integerValue||e.doubleValue),r=v_(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return C_(e.timestampValue,t.timestampValue);case 4:return C_(k_(e),k_(t));case 5:return Bw(e.stringValue,t.stringValue);case 6:return function(e,t){var n=m_(e),r=m_(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Bw(n[i],r[i]);if(0!==a)return a}return Bw(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Bw(v_(e.latitude),v_(t.latitude));return 0!==n?n:Bw(v_(e.longitude),v_(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=I_(n[i],r[i]);if(a)return a}return Bw(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===x_.mapValue&&t===x_.mapValue)return 0;if(e===x_.mapValue)return 1;if(t===x_.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Bw(r[o],a[o]);if(0!==u)return u;var s=I_(n[r[o]],i[a[o]]);if(0!==s)return s}return Bw(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Tw()}}function C_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bw(e,t);var n=p_(e),r=p_(t),i=Bw(n.seconds,r.seconds);return 0!==i?i:Bw(n.nanos,r.nanos)}function A_(e){return P_(e)}function P_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=p_(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return m_(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Xw.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=x(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=P_(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=x(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(P_(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Tw()}function N_(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function R_(e){return!!e&&"integerValue"in e}function D_(e){return!!e&&"arrayValue"in e}function O_(e){return!!e&&"nullValue"in e}function L_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function M_(e){return!!e&&"mapValue"in e}function F_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return n_(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=F_(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=F_(e.arrayValue.values[r]);return n}return Object.assign({},e)}function U_(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function V_(e){return"nullValue"in e?__:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?N_(w_.empty(),Xw.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Tw()}function j_(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?N_(w_.empty(),Xw.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?x_:Tw()}function B_(e,t){var n=I_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function z_(e,t){var n=I_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var q_=function(){function e(t){T(this,e),this.value=t}return A(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!M_(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=F_(t)}},{key:"setAll",value:function(e){var t=this,n=Yw.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=F_(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());M_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return T_(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];M_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){n_(t,(function(t,n){return e[t]=n}));var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(F_(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function G_(e){var t=[];return n_(e.fields,(function(e,n){var r=new Yw([e]);if(M_(n)){var i=G_(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=x(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new l_(t)}var H_=function(){function e(t,n,r,i,a,o,u){T(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return A(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Hw.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=q_.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=q_.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Hw.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Hw.min(),Hw.min(),Hw.min(),q_.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Hw.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Hw.min(),Hw.min(),q_.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Hw.min(),Hw.min(),q_.empty(),2)}}]),e}(),K_=A((function e(t,n){T(this,e),this.position=t,this.inclusive=n}));function W_(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Xw.comparator(Xw.fromName(o.referenceValue),n.key):I_(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Q_(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!T_(e.position[n],t.position[n]))return!1;return!0}var Y_=A((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";T(this,e),this.field=t,this.dir=n}));function X_(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var $_=A((function e(){T(this,e)})),J_=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return A(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(I_(t,this.value)):null!==t&&E_(this.value)===E_(t)&&this.matchesComparison(I_(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Tw()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new sE(e,t,r):"array-contains"===t?new hE(e,r):"in"===t?new dE(e,r):"not-in"===t?new pE(e,r):"array-contains-any"===t?new vE(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new cE(e,n):new lE(e,n)}}]),n}($_),Z_=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return A(n,[{key:"matches",value:function(e){return eE(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=x(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}($_);function eE(e){return"and"===e.op}function tE(e){return"or"===e.op}function nE(e){return rE(e)&&eE(e)}function rE(e){var t,n=x(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Z_)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function iE(e){if(e instanceof J_)return e.field.canonicalString()+e.op.toString()+A_(e.value);if(nE(e))return e.filters.map((function(e){return iE(e)})).join(",");var t=e.filters.map((function(e){return iE(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function aE(e,t){return e instanceof J_?function(e,t){return t instanceof J_&&e.op===t.op&&e.field.isEqual(t.field)&&T_(e.value,t.value)}(e,t):e instanceof Z_?function(e,t){return t instanceof Z_&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&aE(n,t.filters[r])}),!0)}(e,t):void Tw()}function oE(e,t){var n=e.filters.concat(t);return Z_.create(n,e.op)}function uE(e){return e instanceof J_?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(A_(e.value))}(e):e instanceof Z_?function(e){return e.op.toString()+" {"+e.getFilters().map(uE).join(" ,")+"}"}(e):"Filter"}var sE=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,e,r,i)).key=Xw.fromName(i.referenceValue),a}return A(n,[{key:"matches",value:function(e){var t=Xw.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(J_),cE=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,"in",r)).keys=fE("in",r),i}return A(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(J_),lE=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,"not-in",r)).keys=fE("not-in",r),i}return A(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(J_);function fE(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Xw.fromName(e.referenceValue)}))}var hE=function(e){N(n,e);var t=L(n);function n(e,r){return T(this,n),t.call(this,e,"array-contains",r)}return A(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return D_(t)&&S_(t.arrayValue,this.value)}}]),n}(J_),dE=function(e){N(n,e);var t=L(n);function n(e,r){return T(this,n),t.call(this,e,"in",r)}return A(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&S_(this.value.arrayValue,t)}}]),n}(J_),pE=function(e){N(n,e);var t=L(n);function n(e,r){return T(this,n),t.call(this,e,"not-in",r)}return A(n,[{key:"matches",value:function(e){if(S_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!S_(this.value.arrayValue,t)}}]),n}(J_),vE=function(e){N(n,e);var t=L(n);function n(e,r){return T(this,n),t.call(this,e,"array-contains-any",r)}return A(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!D_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return S_(t.value.arrayValue,e)}))}}]),n}(J_),mE=A((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;T(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function yE(e){return new mE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function gE(e){var t=Iw(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return iE(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),_x(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return A_(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return A_(e)})).join(",")),t.he=n}return t.he}function kE(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!X_(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!aE(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Q_(e.startAt,t.startAt)&&Q_(e.endAt,t.endAt)}function bE(e){return Xw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function wE(e,t){return e.filters.filter((function(e){return e instanceof J_&&e.field.isEqual(t)}))}function xE(e,t,n){var r,i=__,a=!0,o=x(wE(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=__,c=!0;switch(u.op){case"<":case"<=":s=V_(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=__}B_({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];B_({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function _E(e,t,n){var r,i=x_,a=!0,o=x(wE(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=x_,c=!0;switch(u.op){case">=":case">":s=j_(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=x_}z_({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];z_({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var EE=A((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;T(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function TE(e,t,n,r,i,a,o,u){return new EE(e,t,n,r,i,a,o,u)}function SE(e){return new EE(e)}function IE(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function CE(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function AE(e){var t,n=x(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function PE(e){return null!==e.collectionGroup}function NE(e){var t=Iw(e);if(null===t.Pe){t.Pe=[];var n=AE(t),r=CE(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new Y_(n)),t.Pe.push(new Y_(Yw.keyField(),"asc"));else{var i,a=!1,o=x(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Y_(Yw.keyField(),s))}}}return t.Pe}function RE(e){var t=Iw(e);if(!t.Ie)if("F"===t.limitType)t.Ie=yE(t.path,t.collectionGroup,NE(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=x(NE(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Y_(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new K_(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new K_(t.startAt.position,t.startAt.inclusive):null;t.Ie=yE(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.Ie}function DE(e,t){t.getFirstInequalityField(),AE(e);var n=e.filters.concat([t]);return new EE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function OE(e,t,n){return new EE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function LE(e,t){return kE(RE(e),RE(t))&&e.limitType===t.limitType}function ME(e){return"".concat(gE(RE(e)),"|lt:").concat(e.limitType)}function FE(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return uE(e)})).join(", "),"]")),_x(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return A_(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return A_(e)})).join(",")),"Target(".concat(t,")")}(RE(e)),"; limitType=").concat(e.limitType,")")}function UE(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xw.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=x(NE(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=x(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=W_(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,NE(e),t))&&!(e.endAt&&!function(e,t,n){var r=W_(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,NE(e),t))}(e,t)}function VE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jE(e){return function(t,n){var r,i=!1,a=x(NE(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=BE(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function BE(e,t,n){var r=e.field.isKeyField()?Xw.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?I_(r,i):Tw()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Tw()}}var zE=function(){function e(t,n){T(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return A(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){n_(this.inner,(function(t,n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return r_(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),qE=new i_(Xw.comparator);function GE(){return qE}var HE=new i_(Xw.comparator);function KE(){for(var e=HE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function WE(e){var t=HE;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function QE(){return XE()}function YE(){return XE()}function XE(){return new zE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var $E=new i_(Xw.comparator),JE=new u_(Xw.comparator);function ZE(){for(var e=JE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var eT=new u_(Bw);function tT(){return eT}function nT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ex(t)?"-0":t}}function rT(e){return{integerValue:""+e}}function iT(e,t){return Tx(t)?rT(t):nT(e,t)}var aT=A((function e(){T(this,e),this._=void 0}));function oT(e,t,n){return e instanceof cT?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&y_(t)&&(t=g_(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof lT?fT(e,t):e instanceof hT?dT(e,t):function(e,t){var n=sT(e,t),r=vT(n)+vT(e.Te);return R_(n)&&R_(e.Te)?rT(r):nT(e.serializer,r)}(e,t)}function uT(e,t,n){return e instanceof lT?fT(e,t):e instanceof hT?dT(e,t):n}function sT(e,t){return e instanceof pT?function(e){return R_(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var cT=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n)}(aT),lT=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this)).elements=e,r}return A(n)}(aT);function fT(e,t){var n,r=mT(t),i=x(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return T_(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var hT=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this)).elements=e,r}return A(n)}(aT);function dT(e,t){var n,r=mT(t),i=x(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!T_(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var pT=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return A(n)}(aT);function vT(e){return v_(e.integerValue||e.doubleValue)}function mT(e){return D_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var yT=A((function e(t,n){T(this,e),this.field=t,this.transform=n}));var gT=A((function e(t,n){T(this,e),this.version=t,this.transformResults=n})),kT=function(){function e(t,n){T(this,e),this.updateTime=t,this.exists=n}return A(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function bT(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var wT=A((function e(){T(this,e)}));function xT(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new OT(e.key,kT.none()):new IT(e.key,e.data,kT.none());var n,r=e.data,i=q_.empty(),a=new u_(Yw.comparator),o=x(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new CT(e.key,i,new l_(a.toArray()),kT.none())}function _T(e,t,n){e instanceof IT?function(e,t,n){var r=e.value.clone(),i=PT(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof CT?function(e,t,n){if(bT(e.precondition,t)){var r=PT(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(AT(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ET(e,t,n,r){return e instanceof IT?function(e,t,n,r){if(!bT(e.precondition,t))return n;var i=e.value.clone(),a=NT(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof CT?function(e,t,n,r){if(!bT(e.precondition,t))return n;var i=NT(e.fieldTransforms,r,t),a=t.data;return a.setAll(AT(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return bT(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function TT(e,t){var n,r=null,i=x(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=sT(a.transform,o||null);null!=u&&(null===r&&(r=q_.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ST(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zw(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof lT&&t instanceof lT||e instanceof hT&&t instanceof hT?zw(e.elements,t.elements,T_):e instanceof pT&&t instanceof pT?T_(e.Te,t.Te):e instanceof cT&&t instanceof cT}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var IT=function(e){N(n,e);var t=L(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return T(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return A(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wT),CT=function(e){N(n,e);var t=L(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return T(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return A(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(wT);function AT(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function PT(e,t,n){var r=new Map;Sw(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,uT(o,u,n[i]))}return r}function NT(e,t,n){var r,i=new Map,a=x(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,oT(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var RT,DT,OT=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return A(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wT),LT=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return A(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wT),MT=function(){function e(t,n,r,i){T(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return A(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&_T(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=x(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ET(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=x(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=ET(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=YE();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=xT(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Hw.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ZE())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&zw(this.mutations,e.mutations,(function(e,t){return ST(e,t)}))&&zw(this.baseMutations,e.baseMutations,(function(e,t){return ST(e,t)}))}}]),e}(),FT=function(){function e(t,n,r,i){T(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return A(e,null,[{key:"from",value:function(t,n,r){Sw(t.mutations.length===r.length);for(var i=$E,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),UT=function(){function e(t,n){T(this,e),this.largestBatchId=t,this.mutation=n}return A(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),VT=A((function e(t,n){T(this,e),this.count=t,this.unchangedNames=n}));function jT(e){switch(e){default:return Tw();case Cw.CANCELLED:case Cw.UNKNOWN:case Cw.DEADLINE_EXCEEDED:case Cw.RESOURCE_EXHAUSTED:case Cw.INTERNAL:case Cw.UNAVAILABLE:case Cw.UNAUTHENTICATED:return!1;case Cw.INVALID_ARGUMENT:case Cw.NOT_FOUND:case Cw.ALREADY_EXISTS:case Cw.PERMISSION_DENIED:case Cw.FAILED_PRECONDITION:case Cw.ABORTED:case Cw.OUT_OF_RANGE:case Cw.UNIMPLEMENTED:case Cw.DATA_LOSS:return!0}}function BT(e){if(void 0===e)return xw("GRPC error has no .code"),Cw.UNKNOWN;switch(e){case RT.OK:return Cw.OK;case RT.CANCELLED:return Cw.CANCELLED;case RT.UNKNOWN:return Cw.UNKNOWN;case RT.DEADLINE_EXCEEDED:return Cw.DEADLINE_EXCEEDED;case RT.RESOURCE_EXHAUSTED:return Cw.RESOURCE_EXHAUSTED;case RT.INTERNAL:return Cw.INTERNAL;case RT.UNAVAILABLE:return Cw.UNAVAILABLE;case RT.UNAUTHENTICATED:return Cw.UNAUTHENTICATED;case RT.INVALID_ARGUMENT:return Cw.INVALID_ARGUMENT;case RT.NOT_FOUND:return Cw.NOT_FOUND;case RT.ALREADY_EXISTS:return Cw.ALREADY_EXISTS;case RT.PERMISSION_DENIED:return Cw.PERMISSION_DENIED;case RT.FAILED_PRECONDITION:return Cw.FAILED_PRECONDITION;case RT.ABORTED:return Cw.ABORTED;case RT.OUT_OF_RANGE:return Cw.OUT_OF_RANGE;case RT.UNIMPLEMENTED:return Cw.UNIMPLEMENTED;case RT.DATA_LOSS:return Cw.DATA_LOSS;default:return Tw()}}(DT=RT||(RT={}))[DT.OK=0]="OK",DT[DT.CANCELLED=1]="CANCELLED",DT[DT.UNKNOWN=2]="UNKNOWN",DT[DT.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",DT[DT.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",DT[DT.NOT_FOUND=5]="NOT_FOUND",DT[DT.ALREADY_EXISTS=6]="ALREADY_EXISTS",DT[DT.PERMISSION_DENIED=7]="PERMISSION_DENIED",DT[DT.UNAUTHENTICATED=16]="UNAUTHENTICATED",DT[DT.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",DT[DT.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",DT[DT.ABORTED=10]="ABORTED",DT[DT.OUT_OF_RANGE=11]="OUT_OF_RANGE",DT[DT.UNIMPLEMENTED=12]="UNIMPLEMENTED",DT[DT.INTERNAL=13]="INTERNAL",DT[DT.UNAVAILABLE=14]="UNAVAILABLE",DT[DT.DATA_LOSS=15]="DATA_LOSS";var zT=function(){function e(){T(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return A(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return qT}},{key:"getOrCreateInstance",value:function(){return null===qT&&(qT=new e),qT}}]),e}(),qT=null;function GT(){return new TextEncoder}var HT=new vw([4294967295,4294967295],0);function KT(e){var t=GT().encode(e),n=new pw;return n.update(t),new Uint8Array(n.digest())}function WT(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new vw([n,r],0),new vw([i,a],0)]}var QT=function(){function e(t,n,r){if(T(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new YT("Invalid padding: ".concat(n));if(r<0)throw new YT("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new YT("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new YT("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=vw.fromNumber(this.de)}return A(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(vw.fromNumber(n)));return 1===r.compare(HT)&&(r=new vw([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=c(WT(KT(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=c(WT(KT(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),YT=function(e){N(n,e);var t=L(n);function n(){var e;return T(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return A(n)}(du(Error)),XT=function(){function e(t,n,r,i,a){T(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return A(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,$T.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Hw.min(),i,new i_(Bw),GE(),ZE())}}]),e}(),$T=function(){function e(t,n,r,i,a){T(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return A(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,ZE(),ZE(),ZE())}}]),e}(),JT=A((function e(t,n,r,i){T(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),ZT=A((function e(t,n){T(this,e),this.targetId=t,this.pe=n})),eS=A((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h_.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;T(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),tS=function(){function e(){T(this,e),this.ye=0,this.we=iS(),this.Se=h_.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return A(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=ZE(),t=ZE(),n=ZE();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Tw()}})),new $T(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=iS()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),nS=function(){function e(t){T(this,e),this.qe=t,this.Qe=new Map,this.Ke=GE(),this.$e=rS(),this.Ue=new i_(Bw)}return A(e,[{key:"We",value:function(e){var t,n=x(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(u){n.e(u)}finally{n.f()}var i,a=x(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(u){a.e(u)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:Tw()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(bE(o))if(0===i){var u=new Xw(o.path);this.ze(r,u,H_.newNoDocument(u,Hw.min()))}else Sw(1===i);else{var s=this.et(r);if(s!==i){var c=this.tt(e,s);if(0!==c.status){this.Ye(r);var l=2===c.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,l)}null===(t=zT.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,u,s,c,l={localCacheCount:n,existenceFilterCount:r.count},f=r.unchangedNames;return f&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==f?void 0:f.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(u=null===(o=null===(a=null==f?void 0:f.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==u?u:0,padding:null!==(c=null===(s=null==f?void 0:f.bits)||void 0===s?void 0:s.padding)&&void 0!==c?c:0},t&&(l.bloomFilter.mightContain=t)),l}(c.status,null!==(n=c.nt)&&void 0!==n?n:null,s,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,u,s=i.bits,c=s.bitmap,l=void 0===c?"":c,f=s.padding,h=void 0===f?0:f,d=i.hashCount,p=void 0===d?0:d;try{o=m_(l).toUint8Array()}catch(e){if(e instanceof f_)return _w("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{u=new QT(o,h,p)}catch(e){return _w(e instanceof YT?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var v=function(e){var t=n.qe.rt();return u.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===u.de?{status:1}:{status:a===t-this.it(e.targetId,v)?0:2,nt:v}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&bE(a.target)){var o=new Xw(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,H_.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=ZE();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new XT(e,n,this.Ue,this.Ke,r);return this.Ke=GE(),this.$e=rS(),this.Ue=new i_(Bw),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new tS,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new u_(Bw),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||ww("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new tS),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function rS(){return new i_(Xw.comparator)}function iS(){return new i_(Xw.comparator)}var aS={asc:"ASCENDING",desc:"DESCENDING"},oS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uS={and:"AND",or:"OR"},sS=A((function e(t,n){T(this,e),this.databaseId=t,this.useProto3Json=n}));function cS(e,t){return e.useProto3Json||_x(t)?t:{value:t}}function lS(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hS(e,t){return lS(e,t.toTimestamp())}function dS(e){return Sw(!!e),Hw.fromTimestamp(function(e){var t=p_(e);return new Gw(t.seconds,t.nanos)}(e))}function pS(e,t){return function(e){return new Ww(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function vS(e){var t=Ww.fromString(e);return Sw(US(t)),t}function mS(e,t){return pS(e.databaseId,t.path)}function yS(e,t){var n=vS(t);if(n.get(1)!==e.databaseId.projectId)throw new Aw(Cw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Aw(Cw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xw(wS(n))}function gS(e,t){return pS(e.databaseId,t)}function kS(e){var t=vS(e);return 4===t.length?Ww.emptyPath():wS(t)}function bS(e){return new Ww(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wS(e){return Sw(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xS(e,t,n){return{name:mS(e,t),fields:n.value.mapValue.fields}}function _S(e,t,n){var r=yS(e,t.name),i=dS(t.updateTime),a=t.createTime?dS(t.createTime):Hw.min(),o=new q_({mapValue:{fields:t.fields}}),u=H_.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function ES(e,t){return"found"in t?function(e,t){Sw(!!t.found),t.found.name,t.found.updateTime;var n=yS(e,t.found.name),r=dS(t.found.updateTime),i=t.found.createTime?dS(t.found.createTime):Hw.min(),a=new q_({mapValue:{fields:t.found.fields}});return H_.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Sw(!!t.missing),Sw(!!t.readTime);var n=yS(e,t.missing),r=dS(t.readTime);return H_.newNoDocument(n,r)}(e,t):Tw()}function TS(e,t){var n;if(t instanceof IT)n={update:xS(e,t.key,t.value)};else if(t instanceof OT)n={delete:mS(e,t.key)};else if(t instanceof CT)n={update:xS(e,t.key,t.data),updateMask:FS(t.fieldMask)};else{if(!(t instanceof LT))return Tw();n={verify:mS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof cT)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof lT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hT)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pT)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Tw()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Tw()}(e,t.precondition)),n}function SS(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?kT.updateTime(dS(e.updateTime)):void 0!==e.exists?kT.exists(e.exists):kT.none()}(t.currentDocument):kT.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Sw("REQUEST_TIME"===t.setToServerValue),n=new cT;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new lT(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new hT(i)}else"increment"in t?n=new pT(e,t.increment):Tw();var a=Yw.fromServerFormat(t.fieldPath);return new yT(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=yS(e,t.update.name),a=new q_({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new l_(t.map((function(e){return Yw.fromServerFormat(e)})))}(t.updateMask);return new CT(i,a,o,n,r)}return new IT(i,a,n,r)}if(t.delete){var u=yS(e,t.delete);return new OT(u,n)}if(t.verify){var s=yS(e,t.verify);return new LT(s,n)}return Tw()}function IS(e,t){return{documents:[gS(e,t.path)]}}function CS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=gS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=gS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return MS(Z_.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:OS(e.field),direction:NS(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=cS(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function AS(e){var t=kS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Sw(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=PS(e);return t instanceof Z_&&nE(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new Y_(LS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return _x(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new K_(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new K_(n,t)}(n.endAt)),TE(t,i,u,o,s,"F",c,l)}function PS(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=LS(e.unaryFilter.field);return J_.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=LS(e.unaryFilter.field);return J_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=LS(e.unaryFilter.field);return J_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=LS(e.unaryFilter.field);return J_.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Tw()}}(e):void 0!==e.fieldFilter?function(e){return J_.create(LS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tw()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Z_.create(e.compositeFilter.filters.map((function(e){return PS(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Tw()}}(e.compositeFilter.op))}(e):Tw()}function NS(e){return aS[e]}function RS(e){return oS[e]}function DS(e){return uS[e]}function OS(e){return{fieldPath:e.canonicalString()}}function LS(e){return Yw.fromServerFormat(e.fieldPath)}function MS(e){return e instanceof J_?function(e){if("=="===e.op){if(L_(e.value))return{unaryFilter:{field:OS(e.field),op:"IS_NAN"}};if(O_(e.value))return{unaryFilter:{field:OS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(L_(e.value))return{unaryFilter:{field:OS(e.field),op:"IS_NOT_NAN"}};if(O_(e.value))return{unaryFilter:{field:OS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:OS(e.field),op:RS(e.op),value:e.value}}}(e):e instanceof Z_?function(e){var t=e.getFilters().map((function(e){return MS(e)}));return 1===t.length?t[0]:{compositeFilter:{op:DS(e.op),filters:t}}}(e):Tw()}function FS(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function US(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var VS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hw.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hw.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h_.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;T(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return A(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),jS=A((function e(t){T(this,e),this.ct=t}));function BS(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:mS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:lS(e,t.version.toTimestamp()),createTime:lS(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:qS(t.version)};else{if(!t.isUnknownDocument())return Tw();r.unknownDocument={path:n.path.toArray(),version:qS(t.version)}}return r}function zS(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qS(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function GS(e){var t=new Gw(e.seconds,e.nanoseconds);return Hw.fromTimestamp(t)}function HS(e,t){for(var n=(t.baseMutations||[]).map((function(t){return SS(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return SS(e.ct,t)})),u=Gw.fromMillis(t.localWriteTimeMs);return new MT(t.batchId,u,n,o)}function KS(e){var t,n=GS(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?GS(e.lastLimboFreeSnapshotVersion):Hw.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return Sw(1===e.documents.length),RE(SE(kS(e.documents[0])))}(e.query):function(e){return RE(AS(e))}(e.query),new VS(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,h_.fromBase64String(e.resumeToken))}function WS(e,t){var n,r=qS(t.snapshotVersion),i=qS(t.lastLimboFreeSnapshotVersion);n=bE(t.target)?IS(e.ct,t.target):CS(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:gE(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function QS(e){var t=AS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?OE(t,t.limit,"L"):t}function YS(e,t){return new UT(t.largestBatchId,SS(e.ct,t.overlayMutation))}function XS(e,t){var n=t.path.lastSegment();return[e,Sx(t.path.popLast()),n]}function $S(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:qS(r.readTime),documentKey:Sx(r.documentKey.path),largestBatchId:r.largestBatchId}}var JS=function(){function e(){T(this,e)}return A(e,[{key:"getBundleMetadata",value:function(e,t){return ZS(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:GS(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return ZS(e).put(function(e){return{bundleId:e.id,createTime:qS(dS(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return eI(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:QS(e.bundledQuery),readTime:GS(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return eI(e).put(function(e){return{name:e.name,readTime:qS(dS(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function ZS(e){return e_(e,"bundles")}function eI(e){return e_(e,"namedQueries")}var tI=function(){function e(t,n){T(this,e),this.serializer=t,this.userId=n}return A(e,[{key:"getOverlay",value:function(e,t){var n=this;return nI(e).get(XS(this.userId,t)).next((function(e){return e?YS(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=QE();return lx.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new UT(t,a);i.push(r.ht(e,o))})),lx.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Sx(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(nI(e).J("collectionPathOverlayIndex",i))})),lx.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=QE(),a=Sx(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return nI(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=YS(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=QE(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nI(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=YS(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return nI(e).put(function(e,t,n){var r=c(XS(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:TS(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function nI(e){return e_(e,"documentOverlays")}var rI=function(){function e(){T(this,e)}return A(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(v_(e.integerValue));else if("doubleValue"in e){var n=v_(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Ex(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(m_(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?U_(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Tw()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),Xw.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function iI(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function aI(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=iI(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}rI.bt=new rI;var oI=function(){function e(){T(this,e),this.buffer=new Uint8Array(1024),this.position=0}return A(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.vt(n.value),n=t.next();this.Ct()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.vt(i);else if(i<2048)this.vt(960|i>>>6),this.vt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.vt(480|i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i);else{var a=r.codePointAt(0);this.vt(240|a>>>18),this.vt(128|63&a>>>12),this.vt(128|63&a>>>6),this.vt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ct()}},{key:"Nt",value:function(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=aI(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=aI(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"vt",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"Ct",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),uI=function(){function e(t){T(this,e),this.Gt=t}return A(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),sI=function(){function e(t){T(this,e),this.Gt=t}return A(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),cI=function(){function e(){T(this,e),this.Gt=new oI,this.zt=new uI(this.Gt),this.jt=new sI(this.Gt)}return A(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),lI=function(){function e(t,n,r,i){T(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return A(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function fI(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=hI(e.arrayValue,t.arrayValue))?n:0!==(n=hI(e.directionalValue,t.directionalValue))?n:Xw.comparator(e.documentKey,t.documentKey)}function hI(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var dI=function(){function e(t){T(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];var n,r=x(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xt=i:this.Zt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return A(e,[{key:"en",value:function(e){Sw(e.collectionGroup===this.collectionId);var t=Jw(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Zw(e),r=new Set,i=0,a=0;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Xt){if(!r.has(this.Xt.field.canonicalString())){var o=n[i];if(!this.nn(this.Xt,o)||!this.rn(this.Yt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Yt.length||!this.rn(this.Yt[a++],u))return!1}return!0}},{key:"tn",value:function(e){var t,n=x(this.Zt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"rn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function pI(e){var t,n;if(Sw(e instanceof J_||e instanceof Z_),e instanceof J_){if(e instanceof dE){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return J_.create(e.field,"==",t)})))||[];return Z_.create(r,"or")}return e}var i=e.filters.map((function(e){return pI(e)}));return Z_.create(i,e.op)}function vI(e){if(0===e.getFilters().length)return[];var t=kI(pI(e));return Sw(gI(t)),mI(t)||yI(t)?[t]:t.getFilters()}function mI(e){return e instanceof J_}function yI(e){return e instanceof Z_&&nE(e)}function gI(e){return mI(e)||yI(e)||function(e){if(e instanceof Z_&&tE(e)){var t,n=x(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!mI(r)&&!yI(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function kI(e){if(Sw(e instanceof J_||e instanceof Z_),e instanceof J_)return e;if(1===e.filters.length)return kI(e.filters[0]);var t=e.filters.map((function(e){return kI(e)})),n=Z_.create(t,e.op);return gI(n=xI(n))?n:(Sw(n instanceof Z_),Sw(eE(n)),Sw(n.filters.length>1),n.filters.reduce((function(e,t){return bI(e,t)})))}function bI(e,t){var n;return Sw(e instanceof J_||e instanceof Z_),Sw(t instanceof J_||t instanceof Z_),n=e instanceof J_?t instanceof J_?function(e,t){return Z_.create([e,t],"and")}(e,t):wI(e,t):t instanceof J_?wI(t,e):function(e,t){if(Sw(e.filters.length>0&&t.filters.length>0),eE(e)&&eE(t))return oE(e,t.getFilters());var n=tE(e)?e:t,r=tE(e)?t:e,i=n.filters.map((function(e){return bI(e,r)}));return Z_.create(i,"or")}(e,t),xI(n)}function wI(e,t){if(eE(t))return oE(t,e.getFilters());var n=t.filters.map((function(t){return bI(e,t)}));return Z_.create(n,"or")}function xI(e){if(Sw(e instanceof J_||e instanceof Z_),e instanceof J_)return e;var t=e.getFilters();if(1===t.length)return xI(t[0]);if(rE(e))return e;var n=t.map((function(e){return xI(e)})),r=[];return n.forEach((function(t){t instanceof J_?r.push(t):t instanceof Z_&&(t.op===e.op?r.push.apply(r,f(t.filters)):r.push(t))})),1===r.length?r[0]:Z_.create(r,e.op)}var _I=function(){function e(){T(this,e),this.sn=new EI}return A(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),lx.resolve()}},{key:"getCollectionParents",value:function(e,t){return lx.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return lx.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return lx.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return lx.resolve(null)}},{key:"getIndexType",value:function(e,t){return lx.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return lx.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return lx.resolve(null)}},{key:"getMinOffset",value:function(e,t){return lx.resolve(ix.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return lx.resolve(ix.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return lx.resolve()}},{key:"updateIndexEntries",value:function(e,t){return lx.resolve()}}]),e}(),EI=function(){function e(){T(this,e),this.index={}}return A(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new u_(Ww.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new u_(Ww.comparator)).toArray()}}]),e}(),TI=new Uint8Array(0),SI=function(){function e(t,n){T(this,e),this.user=t,this.databaseId=n,this.on=new EI,this._n=new zE((function(e){return gE(e)}),(function(e,t){return kE(e,t)})),this.uid=t.uid||""}return A(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Sx(i)};return II(e).put(a)}return lx.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[qw(t),""],!1,!0);return II(e).G(r).next((function(e){var r,i=x(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ax(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=AI(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=PI(e);return a.next((function(e){o.put($S(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=AI(e),r=PI(e),i=CI(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=CI(e),i=!0,a=new Map;return lx.forEach(this.an(t),(function(t){return n.un(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=ZE(),o=[];return lx.forEach(a,(function(i,a){ww("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(gE(t)));var u=function(e,t){var n=Jw(t);if(void 0===n)return null;var r,i=x(wE(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=x(Zw(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=x(wE(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=x(Zw(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?xE(e,o.fieldPath,e.startAt):_E(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new K_(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=x(Zw(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?_E(e,o.fieldPath,e.endAt):xE(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new K_(r,i)}(a,i),f=n.cn(i,a,c),h=n.cn(i,a,l),d=n.ln(i,a,s),p=n.hn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return lx.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Xw.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return lx.resolve(null)}))}},{key:"an",value:function(e){var t=this._n.get(e);return t||(t=0===e.filters.length?[e]:vI(Z_.create(e.filters,"and")).map((function(t){return yE(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this._n.set(e,t),t)}},{key:"hn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(){var s=t?u.Pn(t[d/c]):TI,h=u.In(e,s,n[d%c],r),p=u.Tn(e,s,i[d%c],a),v=o.map((function(t){return u.In(e,s,t,!0)}));l.push.apply(l,f(u.createRange(h,p,v)))},d=0;d<s;++d)h();return l}},{key:"In",value:function(e,t,n,r){var i=new lI(e,Xw.empty(),t,n);return r?i:i.Jt()}},{key:"Tn",value:function(e,t,n,r){var i=new lI(e,Xw.empty(),t,n);return r?i.Jt():i}},{key:"un",value:function(e,t){var n=new dI(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=x(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.en(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.an(t);return lx.forEach(i,(function(t){return n.un(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new u_(Yw.comparator),r=!1,i=x(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=x(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=x(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"En",value:function(e,t){var n,r=new cI,i=x(Zw(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ht(a.kind);rI.bt.Pt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Wt()}},{key:"Pn",value:function(e){var t=new cI;return rI.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"dn",value:function(e,t){var n=new cI;return rI.bt.Pt(N_(this.databaseId,t),n.Ht(function(e){var t=Zw(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new cI);var i,a=0,o=x(Zw(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=x(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.An(t,s.fieldPath)&&D_(c))r=this.Rn(r,s,c);else{var h=f.Ht(s.kind);rI.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.Vn(r)}},{key:"cn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"Vn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"Rn",value:function(e,t,n){var r,i=f(e),a=[],o=x(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=x(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new cI;h.seed(l.Wt()),rI.bt.Pt(s,h.Ht(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"An",value:function(e,t){return!!e.filters.find((function(e){return e instanceof J_&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=AI(e),i=PI(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return lx.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new tx(t.sequenceNumber,new ix(GS(t.readTime),new Xw(Ax(t.documentKey)),t.largestBatchId)):tx.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new ex(Yw.fromServerFormat(n),r)}));return new $w(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Bw(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=AI(e),a=PI(e);return this.mn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return lx.forEach(t,(function(t){return a.put($S(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return lx.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?lx.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),lx.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?lx.resolve():n.pn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return CI(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"wn",value:function(e,t,n,r){return CI(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=CI(e),i=new u_(fI);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},(function(e,r){i=i.add(new lI(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new u_(fI),r=this.En(t,e);if(null==r)return n;var i=Jw(t);if(null!=i){var a=e.data.field(i.fieldPath);if(D_(a)){var o,u=x(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new lI(t.indexId,e.key,this.Pn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new lI(t.indexId,e.key,TI,r));return n}},{key:"pn",value:function(e,t,n,r,i){var a=this;ww("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=c_(a),s=c_(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=c_(o)):l?(i(u),u=c_(a)):(u=c_(a),s=c_(o))}}(r,i,fI,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.wn(e,t,n,r))})),lx.waitFor(o)}},{key:"mn",value:function(e){var t=1;return PI(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return fI(e,t)})).filter((function(e,t,n){return!t||0!==fI(e,n[t-1])}));var r=[];r.push(e);var i,a=x(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=fI(o,e),s=fI(o,t);if(0===u)r[0]=e.Jt();else if(u>0&&s<0)r.push(o),r.push(o.Jt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Sn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,TI,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,TI,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Sn",value:function(e,t){return fI(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(NI)}},{key:"getMinOffset",value:function(e,t){var n=this;return lx.mapArray(this.an(t),(function(t){return n.un(e,t).next((function(e){return e||Tw()}))})).next(NI)}}]),e}();function II(e){return e_(e,"collectionParents")}function CI(e){return e_(e,"indexEntries")}function AI(e){return e_(e,"indexConfiguration")}function PI(e){return e_(e,"indexState")}function NI(e){Sw(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ax(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ix(t.readTime,t.documentKey,n)}var RI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DI=function(){function e(t,n,r){T(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return A(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function OI(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Sw(1===u)})));var c,l=[],f=x(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Rx(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return lx.waitFor(a).next((function(){return l}))}function LI(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Tw();t=e.noDocument}return JSON.stringify(t).length}DI.DEFAULT_COLLECTION_PERCENTILE=10,DI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,DI.DEFAULT=new DI(41943040,DI.DEFAULT_COLLECTION_PERCENTILE,DI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),DI.DISABLED=new DI(-1,0,0);var MI=function(){function e(t,n,r,i){T(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return A(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return UI(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=VI(e),o=UI(e);return o.add({}).next((function(u){Sw("number"==typeof u);var s,c=new MT(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return TS(e.ct,t)})),i=n.mutations.map((function(t){return TS(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new u_((function(e,t){return Bw(e.canonicalString(),t.canonicalString())})),d=x(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Rx(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Dx))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),lx.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return UI(e).get(t).next((function(e){return e?(Sw(e.userId===n.userId),HS(n.serializer,e)):null}))}},{key:"Dn",value:function(e,t){var n=this;return this.bn[t]?lx.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return UI(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Sw(t.batchId>=r),a=HS(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return UI(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return UI(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return HS(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Nx(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return VI(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Ax(l);if(s===n.userId&&t.path.isEqual(h))return UI(e).get(f).next((function(e){if(!e)throw Tw();Sw(e.userId===n.userId),a.push(HS(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new u_(Bw),i=[];return t.forEach((function(t){var a=Nx(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=VI(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Ax(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),lx.waitFor(i).next((function(){return n.vn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Nx(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new u_(Bw);return VI(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Ax(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.vn(e,u)}))}},{key:"vn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(UI(e).get(t).next((function(e){if(null===e)throw Tw();Sw(e.userId===n.userId),r.push(HS(n.serializer,e))})))})),lx.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return OI(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),lx.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return lx.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return VI(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ax(e[1]);i.push(a)}else r.done()})).next((function(){Sw(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return FI(e,this.userId,t)}},{key:"Fn",value:function(e){var t=this;return jI(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return Sw(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function FI(e,t,n){var r=Nx(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return VI(e).Z({range:a,Y:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function UI(e){return e_(e,"mutations")}function VI(e){return e_(e,"documentMutations")}function jI(e){return e_(e,"mutationQueues")}var BI=function(){function e(t){T(this,e),this.Mn=t}return A(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}(),zI=function(){function e(t,n){T(this,e),this.referenceDelegate=t,this.serializer=n}return A(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Nn(e).next((function(n){var r=new BI(n.highestTargetId);return n.highestTargetId=r.next(),t.Bn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Nn(e).next((function(e){return Hw.fromTimestamp(new Gw(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Nn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Nn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Bn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ln(e,t).next((function(){return n.Nn(e).next((function(r){return r.targetCount+=1,n.kn(t,r),n.Bn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ln(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return qI(e).delete(t.targetId)})).next((function(){return n.Nn(e)})).next((function(t){return Sw(t.targetCount>0),t.targetCount-=1,n.Bn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return qI(e).Z((function(o,u){var s=KS(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return lx.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return qI(e).Z((function(e,n){var r=KS(n);t(r)}))}},{key:"Nn",value:function(e){return GI(e).get("targetGlobalKey").next((function(e){return Sw(null!==e),e}))}},{key:"Bn",value:function(e,t){return GI(e).put("targetGlobalKey",t)}},{key:"Ln",value:function(e,t){return qI(e).put(WS(this.serializer,t))}},{key:"kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Nn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=gE(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qI(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=KS(n);kE(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=HI(e);return t.forEach((function(t){var o=Sx(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),lx.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=HI(e);return lx.forEach(t,(function(t){var a=Sx(t.path);return lx.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=HI(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=HI(e),i=ZE();return r.Z({range:n,Y:!0},(function(e,t,n){var r=Ax(e[1]),a=new Xw(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Sx(t.path),r=IDBKeyRange.bound([n],[qw(n)],!1,!0),i=0;return HI(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return qI(e).get(t).next((function(e){return e?KS(e):null}))}}]),e}();function qI(e){return e_(e,"targets")}function GI(e){return e_(e,"targetGlobal")}function HI(e){return e_(e,"targetDocuments")}function KI(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Bw(r,o);return 0===s?Bw(i,u):s}var WI=function(){function e(t){T(this,e),this.qn=t,this.buffer=new u_(KI),this.Qn=0}return A(e,[{key:"Kn",value:function(){return++this.Qn}},{key:"$n",value:function(e){var t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();KI(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),QI=function(){function e(t,n,r){T(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Un=null}return A(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}},{key:"stop",value:function(){this.Un&&(this.Un.cancel(),this.Un=null)}},{key:"started",get:function(){return null!==this.Un}},{key:"Wn",value:function(e){var t=this;ww("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Un=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!vx(e.t0)){e.next=12;break}ww("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,sx(e.t0);case 14:return e.next=16,t.Wn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),YI=function(){function e(t,n){T(this,e),this.Gn=t,this.params=n}return A(e,[{key:"calculateTargetCount",value:function(e,t){return this.Gn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return lx.resolve(xx.ae);var r=new WI(t);return this.Gn.forEachTarget(e,(function(e){return r.$n(e.sequenceNumber)})).next((function(){return n.Gn.jn(e,(function(e){return r.$n(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Gn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Gn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ww("LruGarbageCollector","Garbage collection skipped; disabled"),lx.resolve(RI)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ww("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),RI):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Gn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ww("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),bw()<=Xu.DEBUG&&ww("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),lx.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function XI(e,t){return new YI(e,t)}var $I=function(){function e(t,n){T(this,e),this.db=t,this.garbageCollector=XI(this,n)}return A(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"jn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return JI(e,n)}},{key:"removeReference",value:function(e,t,n){return JI(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return JI(e,t)}},{key:"Zn",value:function(e,t){return function(e,t){var n=!1;return jI(e).X((function(r){return FI(e,r,t).next((function(e){return e&&(n=!0),lx.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Zn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Hw.min()),HI(e).delete(function(e){return[0,Sx(e.path)]}(o))}))}));i.push(s)}})).next((function(){return lx.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return JI(e,t)}},{key:"Yn",value:function(e,t){var n,r=HI(e),i=xx.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==xx.ae&&t(new Xw(Ax(n)),i),i=s,n=u):i=xx.ae})).next((function(){i!==xx.ae&&t(new Xw(Ax(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function JI(e,t){return HI(e).put(function(e,t){return{targetId:0,path:Sx(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ZI=function(){function e(){T(this,e),this.changes=new zE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return A(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,H_.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?lx.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),eC=function(){function e(t){T(this,e),this.serializer=t}return A(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return iC(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return iC(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],zS(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=H_.newInvalidDocument(t);return iC(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(aC(t))},(function(e,i){r=n.er(t,i)})).next((function(){return r}))}},{key:"tr",value:function(e,t){var n=this,r={size:0,document:H_.newInvalidDocument(t)};return iC(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(aC(t))},(function(e,i){r={document:n.er(t,i),size:LI(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=GE();return this.nr(e,t,(function(e,t){var i=n.er(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r=GE(),i=new i_(Xw.comparator);return this.nr(e,t,(function(e,t){var a=n.er(e,t);r=r.insert(e,a),i=i.insert(e,LI(t))})).next((function(){return{documents:r,ir:i}}))}},{key:"nr",value:function(e,t,n){if(t.isEmpty())return lx.resolve();var r=new u_(uC);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(aC(r.first()),aC(r.last())),a=r.getIterator(),o=a.getNext();return iC(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Xw.fromSegments([].concat(f(t.prefixPath),[t.collectionGroup,t.documentId]));o&&uC(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(aC(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),zS(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return iC(e).G(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=GE(),o=x(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.er(Xw.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(UE(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=GE(),o=oC(t,n),u=oC(t,ix.max());return iC(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.er(Xw.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new nC(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return rC(e).get("remoteDocumentGlobalKey").next((function(e){return Sw(!!e),e}))}},{key:"Xn",value:function(e,t){return rC(e).put("remoteDocumentGlobalKey",t)}},{key:"er",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=_S(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Xw.fromSegments(t.noDocument.path),i=GS(t.noDocument.readTime);n=H_.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Tw();var a=Xw.fromSegments(t.unknownDocument.path),o=GS(t.unknownDocument.version);n=H_.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Gw(e[0],e[1]);return Hw.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Hw.min()))return n}return H_.newInvalidDocument(e)}}]),e}();function tC(e){return new eC(e)}var nC=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).sr=e,i.trackRemovals=r,i._r=new zE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return A(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new u_((function(e,t){return Bw(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t._r.get(a);if(n.push(t.sr.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=BS(t.sr.serializer,o);i=i.add(a.path.popLast());var c=LI(s);r+=c-u.size,n.push(t.sr.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=BS(t.sr.serializer,o.convertToNoDocument(Hw.min()));n.push(t.sr.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.sr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.sr.updateMetadata(e,r)),lx.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.sr.tr(e,t).next((function(e){return n._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.sr.rr(e,t).next((function(e){var t=e.documents;return e.ir.forEach((function(e,r){n._r.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ZI);function rC(e){return e_(e,"remoteDocumentGlobal")}function iC(e){return e_(e,"remoteDocumentsV14")}function aC(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function oC(e,t){var n=t.documentKey.path.toArray();return[e,zS(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function uC(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Bw(n[a],r[a]))return i;return(i=Bw(n.length,r.length))||((i=Bw(n[n.length-2],r[r.length-2]))||Bw(n[n.length-1],r[r.length-1]))}var sC=A((function e(t,n){T(this,e),this.overlayedDocument=t,this.mutatedFields=n})),cC=function(){function e(t,n,r,i){T(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return A(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&ET(r.mutation,e,l_.empty(),Gw.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,ZE()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ZE(),i=QE();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=KE();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=QE();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,ZE())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=GE(),a=XE(),o=XE();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof CT)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),ET(o.mutation,t,o.mutation.getFieldMask(),Gw.now())):a.set(t.key,l_.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new sC(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=XE(),i=new i_((function(e,t){return e-t})),a=ZE();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=x(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||l_.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||ZE()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=YE();c.forEach((function(e){if(!a.has(e)){var n=xT(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return lx.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Xw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):PE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):lx.resolve(QE()),u=-1,s=a;return o.next((function(t){return lx.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?lx.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,ZE())})).next((function(e){return{batchId:u,changes:WE(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Xw(t)).next((function(e){var t=KE();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=KE();return this.indexManager.getCollectionParents(e,i).next((function(o){return lx.forEach(o,(function(o){var u=function(e,t){return new EE(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,H_.newInvalidDocument(r)))}));var n=KE();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&ET(a.mutation,i,l_.empty(),Gw.now()),UE(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),lC=function(){function e(t){T(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return A(e,[{key:"getBundleMetadata",value:function(e,t){return lx.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:dS(e.createTime)}}(t)),lx.resolve()}},{key:"getNamedQuery",value:function(e,t){return lx.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:QS(e.bundledQuery),readTime:dS(e.readTime)}}(t)),lx.resolve()}}]),e}(),fC=function(){function e(){T(this,e),this.overlays=new i_(Xw.comparator),this.cr=new Map}return A(e,[{key:"getOverlay",value:function(e,t){return lx.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=QE();return lx.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),lx.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),lx.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=QE(),i=t.length+1,a=new Xw(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return lx.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new i_((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=QE(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=QE(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return lx.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new UT(t,n));var a=this.cr.get(t);void 0===a&&(a=ZE(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),hC=function(){function e(){T(this,e),this.lr=new u_(dC.hr),this.Pr=new u_(dC.Ir)}return A(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new dC(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new dC(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new Xw(new Ww([])),r=new dC(n,e),i=new dC(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new Xw(new Ww([])),n=new dC(t,e),r=new dC(t,e+1),i=ZE();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new dC(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),dC=function(){function e(t,n){T(this,e),this.key=t,this.mr=n}return A(e,null,[{key:"hr",value:function(e,t){return Xw.comparator(e.key,t.key)||Bw(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return Bw(e.mr,t.mr)||Xw.comparator(e.key,t.key)}}]),e}(),pC=function(){function e(t,n){T(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new u_(dC.hr)}return A(e,[{key:"checkEmpty",value:function(e){return lx.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new MT(i,t,n,r);this.mutationQueue.push(a);var o,u=x(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.pr=this.pr.add(new dC(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return lx.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return lx.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return lx.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return lx.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return lx.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new dC(t,0),i=new dC(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),lx.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new u_(Bw);return t.forEach((function(e){var t=new dC(e,0),i=new dC(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),lx.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Xw.isDocumentKey(i)||(i=i.child(""));var a=new dC(new Xw(i),0),o=new u_(Bw);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),lx.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Sw(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return lx.forEach(t.mutations,(function(i){var a=new dC(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new dC(t,0),r=this.pr.firstAfterOrEqual(n);return lx.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,lx.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),vC=function(){function e(t){T(this,e),this.Dr=t,this.docs=new i_(Xw.comparator),this.size=0}return A(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return lx.resolve(n?n.document.mutableCopy():H_.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=GE();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():H_.newInvalidDocument(e))})),lx.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=GE(),a=t.path,o=new Xw(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||ax(rx(l),n)<=0||(r.has(l.key)||UE(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return lx.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Tw()}},{key:"vr",value:function(e,t){return lx.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new mC(this)}},{key:"getSize",value:function(e){return lx.resolve(this.size)}}]),e}(),mC=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this)).sr=e,r}return A(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),lx.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(ZI),yC=function(){function e(t){T(this,e),this.persistence=t,this.Cr=new zE((function(e){return gE(e)}),kE),this.lastRemoteSnapshotVersion=Hw.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new hC,this.targetCount=0,this.Or=BI.xn()}return A(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),lx.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return lx.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return lx.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),lx.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),lx.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new BI(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,lx.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),lx.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,lx.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),lx.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return lx.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return lx.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),lx.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),lx.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),lx.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return lx.resolve(n)}},{key:"containsKey",value:function(e,t){return lx.resolve(this.Mr.containsKey(t))}}]),e}(),gC=function(){function e(t,n){var r=this;T(this,e),this.Nr={},this.overlays={},this.Br=new xx(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new yC(this),this.indexManager=new _I,this.remoteDocumentCache=function(e){return new vC(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new jS(n),this.Qr=new lC(this.serializer)}return A(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new fC,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new pC(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;ww("MemoryPersistence","Starting transaction:",e);var i=new kC(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return lx.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),kC=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return A(n)}(ux),bC=function(){function e(t){T(this,e),this.persistence=t,this.Wr=new hC,this.Gr=null}return A(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw Tw()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),lx.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),lx.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),lx.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lx.forEach(this.jr,(function(r){var i=Xw.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,Hw.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return lx.or([function(){return lx.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}(),wC=function(){function e(t){T(this,e),this.serializer=t}return A(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new fx("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Px,{unique:!0}),e.createObjectStore("documentMutations")}(e),xC(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=lx.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),xC(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hw.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Px,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return lx.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Yr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Zr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xr(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ei(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Hx});t.createIndex("collectionPathOverlayIndex",Kx,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Wx,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ox});t.createIndex("documentKeyIndex",Lx),t.createIndex("collectionGroupIndex",Mx)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ri(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Bx}).createIndex("sequenceNumberIndex",zx,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:qx}).createIndex("documentKeyIndex",Gx,{unique:!1})}(e)}))),o}},{key:"Zr",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=LI(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Yr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return lx.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return lx.forEach(r,(function(r){Sw(r.userId===n.userId);var i=HS(t.serializer,r);return OI(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xr",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Ww(n),o=function(e){return[0,Sx(e)]}(a);r.push(t.get(o).next((function(n){return n?lx.resolve():function(n){return t.put({targetId:0,path:Sx(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return lx.waitFor(r)}))}))}},{key:"ei",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:jx});var n=t.store("collectionParents"),r=new EI,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Sx(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Ww(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Ax(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=KS(r),a=WS(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Xw(Ww.fromString(e.document.name).popFirst(5)):e.noDocument?Xw.fromSegments(e.noDocument.path):e.unknownDocument?Xw.fromSegments(e.unknownDocument.path):Tw()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return lx.waitFor(r)}))}},{key:"ri",value:function(e,t){var n=this,r=t.store("mutations"),i=tC(this.serializer),a=new gC(bC.zr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:ZE();HS(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),lx.forEach(r,(function(e,r){var o=new yw(r),u=tI.lt(n.serializer,o),s=a.getIndexManager(o),c=MI.lt(o,n.serializer,s,a.referenceDelegate);return new cC(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Zx(t,xx.ae),e).next()}))}))}}]),e}();function xC(e){e.createObjectStore("targetDocuments",{keyPath:Ux}).createIndex("documentTargetsIndex",Vx,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fx,{unique:!0}),e.createObjectStore("targetGlobal")}var _C="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",EC=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(T(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.si=c,this.oi=l,this._i=f,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=function(e){return Promise.resolve()},!e.v())throw new Aw(Cw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $I(this,i),this.Pi=n+"main",this.serializer=new jS(s),this.Ii=new hx(this.Pi,this._i,new wC(this.serializer)),this.kr=new zI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tC(this.serializer),this.Qr=new JS,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===l&&xw("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return A(e,[{key:"start",value:function(){var e=this;return this.Ei().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Aw(Cw.FAILED_PRECONDITION,_C);return e.di(),e.Ai(),e.Ri(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.kr.getHighestSequenceNumber(t)}))})).then((function(t){e.Br=new xx(t,e.si)})).then((function(){e.Lr=!0})).catch((function(t){return e.Ii&&e.Ii.close(),Promise.reject(t)}))}},{key:"Vi",value:function(e){var t=this;return this.hi=function(){var n=lu(su().mark((function n(r){return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ii.k(function(){var t=lu(su().mark((function t(n){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ei();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ei",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return SC(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.mi(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.hi(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.gi(t).next((function(){return!1})):!!n&&e.pi(t).next((function(){return!0}))}))})).catch((function(t){if(vx(t))return ww("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ww("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.hi(t)})),e.isPrimary=t}))}},{key:"mi",value:function(e){var t=this;return TC(e).get("owner").next((function(e){return lx.resolve(t.yi(e))}))}},{key:"wi",value:function(e){return SC(e).delete(this.clientId)}},{key:"Si",value:function(){var e=lu(su().mark((function e(){var t,n,r,i,a=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=e_(e,"clientMetadata");return t.G().next((function(e){var n=a.Di(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return lx.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ti){n=x(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ti.removeItem(this.vi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ri",value:function(){var e=this;this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ei().then((function(){return e.Si()})).then((function(){return e.Ri()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.oi?lx.resolve(!0):TC(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new Aw(Cw.FAILED_PRECONDITION,_C);return!1}}return!(!t.networkEnabled||!t.inForeground)||SC(e).G().next((function(e){return void 0===t.Di(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ww("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=lu(su().mark((function e(){var t=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),e.next=7,this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Zx(e,xx.ae);return t.gi(n).next((function(){return t.wi(n)}))}));case 7:this.Ii.close(),this.Oi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Di",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"Ni",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return SC(t).G().next((function(t){return e.Di(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Lr}},{key:"getMutationQueue",value:function(e,t){return MI.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new SI(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return tI.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;ww("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Jx:14===e?$x:13===e?Xx:12===e?Yx:11===e?Qx:void Tw()}(this._i);return this.Ii.runTransaction(e,a,o,(function(a){return i=new Zx(a,r.Br?r.Br.next():xx.ae),"readwrite-primary"===t?r.mi(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw xw("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.hi(!1)})),new Aw(Cw.FAILED_PRECONDITION,ox);return n(i)})).next((function(e){return r.pi(i).next((function(){return e}))})):r.Bi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Bi",value:function(e){var t=this;return TC(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.yi(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Aw(Cw.FAILED_PRECONDITION,_C)}))}},{key:"pi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return TC(e).put("owner",t)}},{key:"gi",value:function(e){var t=this,n=TC(e);return n.get("owner").next((function(e){return t.yi(e)?(ww("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):lx.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(xw("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"di",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ei()}))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}},{key:"Mi",value:function(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}},{key:"Ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=function(){t.Fi();var e=/(?:Version|Mobile)\/1[456]/;!Iu()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ai))}},{key:"xi",value:function(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return ww("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return xw("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Fi",value:function(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){xw("Failed to set zombie client id.",e)}}},{key:"Oi",value:function(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}},{key:"vi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return hx.v()}}]),e}();function TC(e){return e_(e,"owner")}function SC(e){return e_(e,"clientMetadata")}function IC(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var CC=function(){function e(t,n,r,i){T(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return A(e,null,[{key:"qi",value:function(t,n){var r,i=ZE(),a=ZE(),o=x(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),AC=function(){function e(){T(this,e),this.Qi=!1}return A(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if(IE(t))return lx.resolve(null);var r=RE(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=OE(t,null,"F"),r=RE(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=ZE.apply(void 0,f(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,OE(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return IE(t)||r.isEqual(Hw.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(bw()<=Xu.DEBUG&&ww("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),FE(t)),i.ji(e,o,t,nx(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new u_(jE(e));return t.forEach((function(t,r){UE(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return bw()<=Xu.DEBUG&&ww("QueryEngine","Using full collection scan to execute query:",FE(t)),this.Ki.getDocumentsMatchingQuery(e,t,ix.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),PC=function(){function e(t,n,r,i){T(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new i_(Bw),this.Yi=new zE((function(e){return gE(e)}),kE),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return A(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cC(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function NC(e,t,n,r){return new PC(e,t,n,r)}function RC(e,t){return DC.apply(this,arguments)}function DC(){return DC=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=ZE(),s=x(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=x(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=x(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=x(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),DC.apply(this,arguments)}function OC(e,t){var n=Iw(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=lx.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Sw(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=ZE(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function LC(e){var t=Iw(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function MC(e,t){var n=Iw(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(h_.EMPTY_BYTE_STRING,Hw.min()).withLastLimboFreeSnapshotVersion(Hw.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.kr.updateTargetData(e,c))}}));var u=GE(),s=ZE();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(FC(e,a,t.documentUpdates).next((function(e){u=e.ns,s=e.rs}))),!r.isEqual(Hw.min())){var c=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return lx.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function FC(e,t,n){var r=ZE(),i=ZE();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=GE();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Hw.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ww("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function UC(e,t){var n=Iw(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function VC(e,t){var n=Iw(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,lx.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new VS(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function jC(e,t,n){return BC.apply(this,arguments)}function BC(){return BC=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Iw(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),vx(e.t1)){e.next=12;break}throw e.t1;case 12:ww("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),BC.apply(this,arguments)}function zC(e,t,n){var r=Iw(e),i=Hw.min(),a=ZE();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Iw(e),i=r.Yi.get(n);return void 0!==i?lx.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,RE(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Hw.min(),n?a:ZE())})).next((function(e){return HC(r,VE(t),e),{documents:e,ss:a}}))}))}function qC(e,t){var n=Iw(e),r=Iw(n.kr),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function GC(e,t){var n=Iw(e),r=n.Zi.get(t)||Hw.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,nx(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return HC(n,t,e),e}))}function HC(e,t,n){var r=e.Zi.get(t)||Hw.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}function KC(e,t,n,r){return WC.apply(this,arguments)}function WC(){return WC=lu(su().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Iw(t),o=ZE(),u=GE(),s=x(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.os(l.metadata.name),l.document&&(o=o.add(f)),(h=n._s(l)).setReadTime(n.us(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,VC(a,function(e){return RE(SE(Ww.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return FC(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs)})).next((function(){return t.ns}))}))})));case 9:case"end":return e.stop()}}),e)}))),WC.apply(this,arguments)}function QC(e,t){return YC.apply(this,arguments)}function YC(){return YC=lu(su().mark((function e(t,n){var r,i,a,o=arguments;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:ZE(),e.next=3,VC(t,RE(QS(n.bundledQuery)));case 3:return i=e.sent,a=Iw(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=dS(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Qr.saveNamedQuery(e,n);var o=i.withResumeToken(h_.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.kr.updateTargetData(e,o).next((function(){return a.kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Qr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),YC.apply(this,arguments)}function XC(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function $C(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function JC(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ZC=function(){function e(t,n,r,i){T(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return A(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Aw(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(xw("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),eA=function(){function e(t,n,r){T(this,e),this.targetId=t,this.state=n,this.error=r}return A(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Aw(i.error.code,i.error.message))),a?new e(t,i.state,r):(xw("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),tA=function(){function e(t,n){T(this,e),this.clientId=t,this.activeTargetIds=n}return A(e,null,[{key:"cs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tT(),o=0;i&&o<r.activeTargetIds.length;++o)i=Tx(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(xw("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),nA=function(){function e(t,n){T(this,e),this.clientId=t,this.onlineState=n}return A(e,null,[{key:"cs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(xw("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),rA=function(){function e(){T(this,e),this.activeTargetIds=tT()}return A(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),iA=function(){function e(t,n,r,i,a){T(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new i_(Bw),this.started=!1,this.As=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Rs=XC(this.persistenceKey,this.Is),this.Vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new rA),this.fs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ps=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.ys=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ws=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}return A(e,[{key:"start",value:function(){var e=lu(su().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ni();case 2:t=e.sent,n=x(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Is){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(XC(this.persistenceKey,i)))&&(o=tA.cs(i,a))&&(this.ds=this.ds.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ss(),(u=this.storage.getItem(this.ys))&&(s=this.bs(u))&&this.Ds(s),c=x(this.As);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Es(f)}catch(d){c.e(d)}finally{c.f()}this.As=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Vs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.vs(this.ds)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ds.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Cs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Cs(e,t,n),this.Fs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(JC(this.persistenceKey,e));if(n){var r=eA.cs(e,n);r&&(t=r.state)}}return this.Ms.hs(e),this.Ss(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ms.Ps(e),this.Ss()}},{key:"isLocalQueryTarget",value:function(e){return this.Ms.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(JC(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.xs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Fs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Os(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ns(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ww("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ww("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ww("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Es",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ww("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void xw("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(lu(su().mark((function e(){var r,i,a,o,u,s,c;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.fs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Bs(n.key),e.abrupt("return",t.Ls(r,null));case 6:if(!(i=t.ks(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ls(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.qs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Qs(a));case 16:e.next=41;break;case 18:if(!t.ps.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ks(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.$s(o));case 23:e.next=41;break;case 25:if(n.key!==t.ys){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.bs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ds(u));case 30:e.next=41;break;case 32:if(n.key!==t.Vs){e.next=37;break}s=function(e){var t=xx.ae;if(null!=e)try{var n=JSON.parse(e);Sw("number"==typeof n),t=n}catch(e){xw("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==xx.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.ws){e.next=41;break}return c=t.Us(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ws(e)})));case 41:e.next=44;break;case 43:t.As.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ms",get:function(){return this.ds.get(this.Is)}},{key:"Ss",value:function(){this.setItem(this.Rs,this.Ms.ls())}},{key:"Cs",value:function(e,t,n){var r=new ZC(this.currentUser,e,t,n),i=$C(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ls())}},{key:"Fs",value:function(e){var t=$C(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Os",value:function(e){var t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}},{key:"xs",value:function(e,t,n){var r=JC(this.persistenceKey,e),i=new eA(e,t,n);this.setItem(r,i.ls())}},{key:"Ns",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}},{key:"Bs",value:function(e){var t=this.fs.exec(e);return t?t[1]:null}},{key:"ks",value:function(e,t){var n=this.Bs(e);return tA.cs(n,t)}},{key:"qs",value:function(e,t){var n=this.gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ZC.cs(new yw(i),r,t)}},{key:"Ks",value:function(e,t){var n=this.ps.exec(e),r=Number(n[1]);return eA.cs(r,t)}},{key:"bs",value:function(e){return nA.cs(e)}},{key:"Us",value:function(e){return JSON.parse(e)}},{key:"Qs",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Gs(t.batchId,t.state,t.error));case 2:ww("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$s",value:function(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}},{key:"Ls",value:function(e,t){var n=this,r=t?this.ds.insert(e,t):this.ds.remove(e),i=this.vs(this.ds),a=this.vs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.js(o,u).then((function(){n.ds=r}))}},{key:"Ds",value:function(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"vs",value:function(e){var t=tT();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),aA=function(){function e(){T(this,e),this.Hs=new rA,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return A(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new rA,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),oA=function(){function e(){T(this,e)}return A(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),uA=function(){function e(){var t=this;T(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return A(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){ww("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=x(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){ww("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=x(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),sA=null;function cA(){return null===sA?sA=268435456+Math.round(2147483648*Math.random()):sA++,"0x"+sA.toString(16)}var lA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},fA=function(){function e(t){T(this,e),this.so=t.so,this.oo=t.oo}return A(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),hA="WebChannelConnection",dA=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return A(n,[{key:"po",value:function(e,t,n,r){var i=cA();return new Promise((function(a,o){var u=new dw;u.setWithCredentials(!0),u.listenOnce(sw.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case uw.NO_ERROR:var t=u.getResponseJson();ww(hA,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case uw.TIMEOUT:ww(hA,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Aw(Cw.DEADLINE_EXCEEDED,"Request time out"));break;case uw.HTTP_ERROR:var n=u.getStatus();if(ww(hA,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Cw).indexOf(t)>=0?t:Cw.UNKNOWN}(s.status);o(new Aw(c,s.message))}else o(new Aw(Cw.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Aw(Cw.UNAVAILABLE,"Connection failed."));break;default:Tw()}}finally{ww(hA,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);ww(hA,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=cA(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=aw(),o=ow(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new fw({})),this.fo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");ww(hA,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new fA({so:function(t){h?ww(hA,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(ww(hA,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),ww(hA,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,hw.EventType.OPEN,(function(){h||ww(hA,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,hw.EventType.CLOSE,(function(){h||(h=!0,ww(hA,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),p(l,hw.EventType.ERROR,(function(t){h||(h=!0,_w(hA,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new Aw(Cw.UNAVAILABLE,"The operation could not be completed")))})),p(l,hw.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Sw(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ww(hA,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=RT[e];if(void 0!==t)return BT(t)}(u),c=o.message;void 0===s&&(s=Cw.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Po(new Aw(s,c)),l.close()}else ww(hA,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),p(o,cw.STAT_EVENT,(function(t){t.stat===lw.PROXY?ww(hA,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===lw.NOPROXY&&ww(hA,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){T(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.To=n+"://"+t.host,this.Eo="projects/".concat(r,"/databases/").concat(i),this.Ao="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return A(e,[{key:"Ro",get:function(){return!1}},{key:"Vo",value:function(e,t,n,r,i){var a=cA(),o=this.mo(e,t);ww("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(u,r,i),this.po(e,o,u,n).then((function(t){return ww("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw _w("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"yo",value:function(e,t,n,r,i,a){return this.Vo(e,t,n,r,i)}},{key:"fo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gw,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"mo",value:function(e,t){var n=lA[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function pA(){return"undefined"!=typeof window?window:null}function vA(){return"undefined"!=typeof document?document:null}function mA(e){return new sS(e,!0)}var yA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;T(this,e),this.ii=t,this.timerId=n,this.So=r,this.bo=i,this.Do=a,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}return A(e,[{key:"reset",value:function(){this.vo=0}},{key:"Mo",value:function(){this.vo=this.Do}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),i=Math.max(0,n-r);i>0&&ww("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Co=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Fo=Date.now(),e()})),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}},{key:"No",value:function(){null!==this.Co&&(this.Co.skipDelay(),this.Co=null)}},{key:"cancel",value:function(){null!==this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"Oo",value:function(){return(Math.random()-.5)*this.vo}}]),e}(),gA=function(){function e(t,n,r,i,a,o,u,s){T(this,e),this.ii=t,this.Bo=r,this.Lo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new yA(t,n)}return A(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Wo()}},{key:"stop",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Ko.reset()}},{key:"zo",value:function(){var e=this;this.Uo()&&null===this.qo&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,(function(){return e.jo()})))}},{key:"Ho",value:function(e){this.Jo(),this.stream.send(e)}},{key:"jo",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"Yo",value:function(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}},{key:"close",value:function(){var e=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,4!==t?this.Ko.reset():n&&n.code===Cw.RESOURCE_EXHAUSTED?(xw(n.toString()),xw("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):n&&n.code===Cw.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Zo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Zo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.ko),n=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.ko===n&&e.e_(i,a)}),(function(n){t((function(){var t=new Aw(Cw.UNKNOWN,"Fetching auth token failed: "+n.message);return e.t_(t)}))}))}},{key:"e_",value:function(e,t){var n=this,r=this.Xo(this.ko);this.stream=this.n_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.Qo=n.ii.enqueueAfterDelay(n.Lo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.t_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Wo",value:function(){var e=this;this.state=5,this.Ko.xo(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"t_",value:function(e){return ww("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.ko===e?n():(ww("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),kA=function(e){N(n,e);var t=L(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return A(n,[{key:"n_",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Tw()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Sw(void 0===t||"string"==typeof t),h_.fromBase64String(t||"")):(Sw(void 0===t||t instanceof Uint8Array),h_.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Cw.UNKNOWN:BT(e.code);return new Aw(t,e.message||"")}(o);n=new eS(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=yS(e,s.document.name),l=dS(s.document.updateTime),f=s.document.createTime?dS(s.document.createTime):Hw.min(),h=new q_({mapValue:{fields:s.document.fields}}),d=H_.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new JT(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=yS(e,m.document),g=m.readTime?dS(m.readTime):Hw.min(),k=H_.newNoDocument(y,g),b=m.removedTargetIds||[];n=new JT([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=yS(e,w.document),_=w.removedTargetIds||[];n=new JT([],_,x,null)}else{if(!("filter"in t))return Tw();t.filter;var E=t.filter;E.targetId;var T=E.count,S=void 0===T?0:T,I=E.unchangedNames,C=new VT(S,I),A=E.targetId;n=new ZT(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Hw.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Hw.min():t.readTime?dS(t.readTime):Hw.min()}(e);return this.listener.r_(t,n)}},{key:"i_",value:function(e){var t={};t.database=bS(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=bE(r)?{documents:IS(e,r)}:{query:CS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=fS(e,t.resumeToken);var i=cS(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Hw.min())>0){n.readTime=lS(e,t.snapshotVersion.toTimestamp());var a=cS(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tw()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Ho(t)}},{key:"s_",value:function(e){var t={};t.database=bS(this.serializer),t.removeTarget=e,this.Ho(t)}}]),n}(gA),bA=function(e){N(n,e);var t=L(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.o_=!1,s}return A(n,[{key:"__",get:function(){return this.o_}},{key:"start",value:function(){this.o_=!1,this.lastStreamToken=void 0,nu(R(n.prototype),"start",this).call(this)}},{key:"Zo",value:function(){this.o_&&this.a_([])}},{key:"n_",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Sw(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();var t=function(e,t){return e&&e.length>0?(Sw(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?dS(e.updateTime):dS(t);return n.isEqual(Hw.min())&&(n=dS(t)),new gT(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=dS(e.commitTime);return this.listener.u_(n,t)}return Sw(!e.writeResults||0===e.writeResults.length),this.o_=!0,this.listener.c_()}},{key:"l_",value:function(){var e={};e.database=bS(this.serializer),this.Ho(e)}},{key:"a_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return TS(t.serializer,e)}))};this.Ho(n)}}]),n}(gA),wA=function(e){N(n,e);var t=L(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.h_=!1,o}return A(n,[{key:"P_",value:function(){if(this.h_)throw new Aw(Cw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Vo",value:function(e,t,n){var r=this;return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.Vo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cw.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Aw(Cw.UNKNOWN,e.toString())}))}},{key:"yo",value:function(e,t,n,r){var i=this;return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.yo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cw.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Aw(Cw.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.h_=!0}}]),n}(A((function e(){T(this,e)})));var xA=function(){function e(t,n){T(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}return A(e,[{key:"A_",value:function(){var e=this;0===this.T_&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.E_=null,e.V_("Backend didn't respond within 10 seconds."),e.R_("Offline"),Promise.resolve()})))}},{key:"m_",value:function(e){"Online"===this.state?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.R_("Offline")))}},{key:"set",value:function(e){this.f_(),this.T_=0,"Online"===e&&(this.d_=!1),this.R_(e)}},{key:"R_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"V_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.d_?(xw(t),this.d_=!1):ww("OnlineStateTracker",t)}},{key:"f_",value:function(){null!==this.E_&&(this.E_.cancel(),this.E_=null)}}]),e}(),_A=A((function e(t,n,r,i,a){var o=this;T(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=a,this.S_.Ys((function(e){r.enqueueAndForget(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=OA(o),!e.t0){e.next=5;break}return ww("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Iw(t)).y_.add(4),e.next=4,SA(n);case 4:return n.b_.set("Unknown"),n.y_.delete(4),e.next=8,EA(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.b_=new xA(r,i)}));function EA(e){return TA.apply(this,arguments)}function TA(){return(TA=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!OA(t)){e.next=18;break}n=x(t.w_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function SA(e){return IA.apply(this,arguments)}function IA(){return(IA=lu(su().mark((function e(t){var n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=x(t.w_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function CA(e,t){var n=Iw(e);n.p_.has(t.targetId)||(n.p_.set(t.targetId,t),DA(n)?RA(n):cP(n).Uo()&&PA(n,t))}function AA(e,t){var n=Iw(e),r=cP(n);n.p_.delete(t),r.Uo()&&NA(n,t),0===n.p_.size&&(r.Uo()?r.zo():OA(n)&&n.b_.set("Unknown"))}function PA(e,t){if(e.D_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Hw.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}cP(e).i_(t)}function NA(e,t){e.D_.Be(t),cP(e).s_(t)}function RA(e){e.D_=new nS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.p_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),cP(e).start(),e.b_.A_()}function DA(e){return OA(e)&&!cP(e).$o()&&e.p_.size>0}function OA(e){return 0===Iw(e).y_.size}function LA(e){e.D_=void 0}function MA(e){return FA.apply(this,arguments)}function FA(){return(FA=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.p_.forEach((function(e,n){PA(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UA(e,t){return VA.apply(this,arguments)}function VA(){return(VA=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:LA(t),DA(t)?(t.b_.m_(n),RA(t)):t.b_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jA(e,t,n){return BA.apply(this,arguments)}function BA(){return BA=lu(su().mark((function e(t,n,r){var i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.b_.set("Online"),!(n instanceof eS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=x(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.p_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.p_.delete(o),t.D_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ww("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,zA(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof JT?t.D_.We(n):n instanceof ZT?t.D_.Ze(n):t.D_.je(n),r.isEqual(Hw.min())){e.next=29;break}return e.prev=14,e.next=17,LC(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.D_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.p_.get(r);i&&e.p_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.p_.get(t);if(r){e.p_.set(t,r.withResumeToken(h_.EMPTY_BYTE_STRING,r.snapshotVersion)),NA(e,t);var i=new VS(r.target,t,n,r.sequenceNumber);PA(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ww("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,zA(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),BA.apply(this,arguments)}function zA(e,t,n){return qA.apply(this,arguments)}function qA(){return(qA=lu(su().mark((function e(t,n,r){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vx(n)){e.next=2;break}throw n;case 2:return t.y_.add(1),e.next=5,SA(t);case 5:t.b_.set("Offline"),r||(r=function(){return LC(t.localStore)}),t.asyncQueue.enqueueRetryable(lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ww("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.y_.delete(1),e.next=6,EA(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GA(e,t){return t().catch((function(n){return zA(e,n,t)}))}function HA(e){return KA.apply(this,arguments)}function KA(){return KA=lu(su().mark((function e(t){var n,r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Iw(t),r=lP(n),i=n.g_.length>0?n.g_[n.g_.length-1].batchId:-1;case 2:if(!WA(n)){e.next=19;break}return e.prev=3,e.next=6,UC(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.g_.length&&r.zo(),e.abrupt("break",19);case 10:i=a.batchId,QA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,zA(n,e.t0);case 17:e.next=2;break;case 19:YA(n)&&XA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),KA.apply(this,arguments)}function WA(e){return OA(e)&&e.g_.length<10}function QA(e,t){e.g_.push(t);var n=lP(e);n.Uo()&&n.__&&n.a_(t.mutations)}function YA(e){return OA(e)&&!lP(e).$o()&&e.g_.length>0}function XA(e){lP(e).start()}function $A(e){return JA.apply(this,arguments)}function JA(){return(JA=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lP(t).l_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZA(e){return eP.apply(this,arguments)}function eP(){return(eP=lu(su().mark((function e(t){var n,r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=lP(t),r=x(t.g_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.a_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tP(e,t,n){return nP.apply(this,arguments)}function nP(){return nP=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.g_.shift(),a=FT.from(i,n,r),e.next=3,GA(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,HA(t);case 5:case"end":return e.stop()}}),e)}))),nP.apply(this,arguments)}function rP(e,t){return iP.apply(this,arguments)}function iP(){return iP=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&lP(t).__,!e.t0){e.next=4;break}return e.next=4,function(){var e=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return jT(e)&&e!==Cw.ABORTED}(n.code)){e.next=7;break}return r=t.g_.shift(),lP(t).Go(),e.next=5,GA(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,HA(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:YA(t)&&XA(t);case 5:case"end":return e.stop()}}),e)}))),iP.apply(this,arguments)}function aP(e,t){return oP.apply(this,arguments)}function oP(){return oP=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Iw(t)).asyncQueue.verifyOperationInProgress(),ww("RemoteStore","RemoteStore received new credentials"),i=OA(r),r.y_.add(3),e.next=6,SA(r);case 6:return i&&r.b_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.y_.delete(3),e.next=12,EA(r);case 12:case"end":return e.stop()}}),e)}))),oP.apply(this,arguments)}function uP(e,t){return sP.apply(this,arguments)}function sP(){return(sP=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Iw(t),!n){e.next=7;break}return r.y_.delete(2),e.next=5,EA(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.y_.add(2),e.next=12,SA(r);case 12:r.b_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cP(e){return e.v_||(e.v_=function(e,t,n){var r=Iw(e);return r.P_(),new kA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:MA.bind(null,e),uo:UA.bind(null,e),r_:jA.bind(null,e)}),e.w_.push(function(){var t=lu(su().mark((function t(n){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.v_.Go(),DA(e)?RA(e):e.b_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.v_.stop();case 6:LA(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}function lP(e){return e.C_||(e.C_=function(e,t,n){var r=Iw(e);return r.P_(),new bA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:$A.bind(null,e),uo:rP.bind(null,e),c_:ZA.bind(null,e),u_:tP.bind(null,e)}),e.w_.push(function(){var t=lu(su().mark((function t(n){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.C_.Go(),t.next=4,HA(e);case 4:t.next=9;break;case 6:return t.next=8,e.C_.stop();case 8:e.g_.length>0&&(ww("RemoteStore","Stopping write stream with ".concat(e.g_.length," pending writes")),e.g_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.C_}var fP=function(){function e(t,n,r,i,a){T(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Pw,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return A(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Aw(Cw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function hP(e,t){if(xw("AsyncQueue","".concat(t,": ").concat(e)),vx(e))return new Aw(Cw.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var dP=function(){function e(t){T(this,e),this.comparator=t?function(e,n){return t(e,n)||Xw.comparator(e.key,n.key)}:function(e,t){return Xw.comparator(e.key,t.key)},this.keyedMap=KE(),this.sortedSet=new i_(this.comparator)}return A(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),pP=function(){function e(){T(this,e),this.F_=new i_(Xw.comparator)}return A(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.F_.get(t);n?0!==e.type&&3===n.type?this.F_=this.F_.insert(t,e):3===e.type&&1!==n.type?this.F_=this.F_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.F_=this.F_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.F_=this.F_.remove(t):1===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):Tw():this.F_=this.F_.insert(t,e)}},{key:"M_",value:function(){var e=[];return this.F_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),vP=function(){function e(t,n,r,i,a,o,u,s,c){T(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return A(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&LE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,dP.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),mP=A((function e(){T(this,e),this.x_=void 0,this.listeners=[]})),yP=A((function e(){T(this,e),this.queries=new zE((function(e){return ME(e)}),LE),this.onlineState="Unknown",this.O_=new Set}));function gP(e,t){return kP.apply(this,arguments)}function kP(){return kP=lu(su().mark((function e(t,n){var r,i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Iw(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new mP),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.x_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=hP(e.t0,"Initialization of query '".concat(FE(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.N_(r.onlineState),o.x_&&n.B_(o.x_)&&EP(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),kP.apply(this,arguments)}function bP(e,t){return wP.apply(this,arguments)}function wP(){return wP=lu(su().mark((function e(t,n){var r,i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Iw(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),wP.apply(this,arguments)}function xP(e,t){var n,r=Iw(e),i=!1,a=x(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=x(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.B_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.x_=o}}}catch(f){a.e(f)}finally{a.f()}i&&EP(r)}function _P(e,t,n){var r=Iw(e),i=r.queries.get(t);if(i){var a,o=x(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function EP(e){e.O_.forEach((function(e){e.next()}))}var TP=function(){function e(t,n,r){T(this,e),this.query=t,this.L_=n,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=r||{}}return A(e,[{key:"B_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=x(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new vP(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),a=!0):this.K_(e,this.onlineState)&&(this.U_(e),a=!0),this.q_=e,a}},{key:"onError",value:function(e){this.L_.error(e)}},{key:"N_",value:function(e){this.onlineState=e;var t=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),t=!0),t}},{key:"K_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.W_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"U_",value:function(e){e=vP.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}]),e}(),SP=function(){function e(t,n){T(this,e),this.G_=t,this.byteLength=n}return A(e,[{key:"z_",value:function(){return"metadata"in this.G_}}]),e}(),IP=function(){function e(t){T(this,e),this.serializer=t}return A(e,[{key:"os",value:function(e){return yS(this.serializer,e)}},{key:"_s",value:function(e){return e.metadata.exists?_S(this.serializer,e.document,!1):H_.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}},{key:"us",value:function(e){return dS(e)}}]),e}(),CP=function(){function e(t,n,r){T(this,e),this.j_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=AP(t)}return A(e,[{key:"H_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.G_.namedQuery)this.queries.push(e.G_.namedQuery);else if(e.G_.documentMetadata){this.documents.push({metadata:e.G_.documentMetadata}),e.G_.documentMetadata.exists||++t;var n=Ww.fromString(e.G_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.G_.document&&(this.documents[this.documents.length-1].document=e.G_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"J_",value:function(e){var t,n=new Map,r=new IP(this.serializer),i=x(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.os(a.metadata.name),s=x(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||ZE()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=lu(su().mark((function e(){var t,n,r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KC(this.localStore,new IP(this.serializer),this.documents,this.j_.id);case 2:t=e.sent,n=this.J_(this.documents),r=x(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,QC(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Y_:this.collectionGroups,Z_:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function AP(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var PP=A((function e(t){T(this,e),this.key=t})),NP=A((function e(t){T(this,e),this.key=t})),RP=function(){function e(t,n){T(this,e),this.query=t,this.X_=n,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=ZE(),this.mutatedKeys=ZE(),this.na=jE(t),this.ra=new dP(this.na)}return A(e,[{key:"ia",get:function(){return this.X_}},{key:"sa",value:function(e,t){var n=this,r=t?t.oa:new pP,i=t?t.ra:this.ra,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=UE(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n._a(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.na(f,s)>0||c&&n.na(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ra:o,oa:r,zi:u,mutatedKeys:a}}},{key:"_a",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;var a=e.oa.M_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tw()}};return n(e)-n(t)}(e.type,t.type)||r.na(e.doc,t.doc)})),this.aa(n);var o=t?this.ua():[],u=0===this.ta.size&&this.current?1:0,s=u!==this.ea;return this.ea=u,0!==a.length||s?{snapshot:new vP(this.query,e.ra,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),ca:o}:{ca:o}}},{key:"N_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ra:this.ra,oa:new pP,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}},{key:"la",value:function(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}},{key:"aa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.X_=t.X_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.X_=t.X_.delete(e)})),this.current=e.current)}},{key:"ua",value:function(){var e=this;if(!this.current)return[];var t=this.ta;this.ta=ZE(),this.ra.forEach((function(t){e.la(t.key)&&(e.ta=e.ta.add(t.key))}));var n=[];return t.forEach((function(t){e.ta.has(t)||n.push(new NP(t))})),this.ta.forEach((function(e){t.has(e)||n.push(new PP(e))})),n}},{key:"ha",value:function(e){this.X_=e.ss,this.ta=ZE();var t=this.sa(e.documents);return this.applyChanges(t,!0)}},{key:"Pa",value:function(){return vP.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,0===this.ea,this.hasCachedResults)}}]),e}(),DP=A((function e(t,n,r){T(this,e),this.query=t,this.targetId=n,this.view=r})),OP=A((function e(t){T(this,e),this.key=t,this.Ia=!1})),LP=function(){function e(t,n,r,i,a,o){T(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ta={},this.Ea=new zE((function(e){return ME(e)}),LE),this.da=new Map,this.Aa=new Set,this.Ra=new i_(Xw.comparator),this.Va=new Map,this.ma=new hC,this.fa={},this.ga=new Map,this.pa=BI.On(),this.onlineState="Unknown",this.ya=void 0}return A(e,[{key:"isPrimaryClient",get:function(){return!0===this.ya}}]),e}();function MP(e,t){return FP.apply(this,arguments)}function FP(){return FP=lu(su().mark((function e(t,n){var r,i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=AN(t),!(o=r.Ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Pa(),e.next=15;break;case 6:return e.next=8,VC(r.localStore,RE(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,UP(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&CA(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),FP.apply(this,arguments)}function UP(e,t,n,r,i){return VP.apply(this,arguments)}function VP(){return VP=lu(su().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.wa=function(e,n,r){return function(){var e=lu(su().mark((function e(t,n,r,i){var a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sa(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,zC(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sa(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(aN(t,n.targetId,u.ca),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,zC(t.localStore,n,!0);case 3:return o=e.sent,u=new RP(n,o.ss),s=u.sa(o.documents),c=$T.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),aN(t,r,l.ca),f=new DP(n,r,u),e.abrupt("return",(t.Ea.set(n,f),t.da.has(r)?t.da.get(r).push(n):t.da.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),VP.apply(this,arguments)}function jP(e,t){return BP.apply(this,arguments)}function BP(){return BP=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Iw(t),i=r.Ea.get(n),!((a=r.da.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.da.set(i.targetId,a.filter((function(e){return!LE(e,n)}))),void r.Ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,jC(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),AA(r.remoteStore,i.targetId),rN(r,i.targetId)})).catch(sx);case 9:e.next=14;break;case 11:return rN(r,i.targetId),e.next=14,jC(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),BP.apply(this,arguments)}function zP(e,t,n){return qP.apply(this,arguments)}function qP(){return qP=lu(su().mark((function e(t,n,r){var i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PN(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Iw(e),a=Gw.now(),o=t.reduce((function(e,t){return e.add(t.key)}),ZE());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=GE(),s=ZE();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=x(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=TT(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new CT(c.key,l,G_(l.value.mapValue),kT.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:WE(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fa[e.currentUser.toKey()];r||(r=new i_(Bw)),r=r.insert(t,n),e.fa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,sN(i,a.changes);case 9:return e.next=11,HA(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=hP(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),qP.apply(this,arguments)}function GP(e,t){return HP.apply(this,arguments)}function HP(){return HP=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),e.prev=1,e.next=4,MC(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Va.get(t);n&&(Sw(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ia=!0:e.modifiedDocuments.size>0?Sw(n.Ia):e.removedDocuments.size>0&&(Sw(n.Ia),n.Ia=!1))})),e.next=8,sN(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,sx(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),HP.apply(this,arguments)}function KP(e,t,n){var r=Iw(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ea.forEach((function(e,n){var r=n.view.N_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Iw(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=x(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.N_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&EP(n)}(r.eventManager,t),i.length&&r.Ta.r_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function WP(e,t,n){return QP.apply(this,arguments)}function QP(){return QP=lu(su().mark((function e(t,n,r){var i,a,o,u,s,c;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Iw(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Va.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new i_(Xw.comparator)).insert(o,H_.newNoDocument(o,Hw.min())),s=ZE().add(o),c=new XT(Hw.min(),new Map,new i_(Bw),u,s),e.next=9,GP(i,c);case 9:i.Ra=i.Ra.remove(o),i.Va.delete(n),uN(i),e.next=16;break;case 14:return e.next=16,jC(i.localStore,n,!1).then((function(){return rN(i,n,r)})).catch(sx);case 16:case"end":return e.stop()}}),e)}))),QP.apply(this,arguments)}function YP(e,t){return XP.apply(this,arguments)}function XP(){return XP=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),i=n.batch.batchId,e.prev=1,e.next=4,OC(r.localStore,n);case 4:return a=e.sent,nN(r,i,null),tN(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,sN(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),XP.apply(this,arguments)}function $P(e,t,n){return JP.apply(this,arguments)}function JP(){return JP=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Iw(t),e.prev=1,e.next=4,function(e,t){var n=Iw(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Sw(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,nN(i,n,r),tN(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,sN(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),JP.apply(this,arguments)}function ZP(e,t){return eN.apply(this,arguments)}function eN(){return eN=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OA((r=Iw(t)).remoteStore)||ww("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Iw(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ga.get(i)||[]).push(n),r.ga.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=hP(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),eN.apply(this,arguments)}function tN(e,t){(e.ga.get(t)||[]).forEach((function(e){e.resolve()})),e.ga.delete(t)}function nN(e,t,n){var r=Iw(e),i=r.fa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fa[r.currentUser.toKey()]=i}}function rN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=x(e.da.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ea.delete(a),n&&e.Ta.Sa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.da.delete(t),e.isPrimaryClient&&e.ma.Ar(t).forEach((function(t){e.ma.containsKey(t)||iN(e,t)}))}function iN(e,t){e.Aa.delete(t.path.canonicalString());var n=e.Ra.get(t);null!==n&&(AA(e.remoteStore,n),e.Ra=e.Ra.remove(t),e.Va.delete(n),uN(e))}function aN(e,t,n){var r,i=x(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof PP?(e.ma.addReference(a.key,t),oN(e,a)):a instanceof NP?(ww("SyncEngine","Document no longer in limbo: "+a.key),e.ma.removeReference(a.key,t),e.ma.containsKey(a.key)||iN(e,a.key)):Tw()}}catch(o){i.e(o)}finally{i.f()}}function oN(e,t){var n=t.key,r=n.path.canonicalString();e.Ra.get(n)||e.Aa.has(r)||(ww("SyncEngine","New document in limbo: "+n),e.Aa.add(r),uN(e))}function uN(e){for(;e.Aa.size>0&&e.Ra.size<e.maxConcurrentLimboResolutions;){var t=e.Aa.values().next().value;e.Aa.delete(t);var n=new Xw(Ww.fromString(t)),r=e.pa.next();e.Va.set(r,new OP(n)),e.Ra=e.Ra.insert(n,r),CA(e.remoteStore,new VS(RE(SE(n.path)),r,"TargetPurposeLimboResolution",xx.ae))}}function sN(e,t,n){return cN.apply(this,arguments)}function cN(){return cN=lu(su().mark((function e(t,n,r){var i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Iw(t),a=[],o=[],u=[],e.t0=i.Ea.isEmpty(),e.t0){e.next=9;break}return i.Ea.forEach((function(e,t){u.push(i.wa(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=CC.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Ta.r_(a),e.next=9,function(){var e=lu(su().mark((function e(t,n){var r,i,a,o,u,s,c,l;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return lx.forEach(n,(function(t){return lx.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return lx.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),vx(e.t0)){e.next=10;break}throw e.t0;case 10:ww("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=x(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),cN.apply(this,arguments)}function lN(e,t){return fN.apply(this,arguments)}function fN(){return(fN=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Iw(t)).currentUser.isEqual(n)){e.next=11;break}return ww("SyncEngine","User change. New user:",n.toKey()),e.next=5,RC(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ga.forEach((function(e){e.forEach((function(e){e.reject(new Aw(Cw.CANCELLED,t))}))})),e.ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,sN(r,i.ts);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hN(e,t){var n=Iw(e),r=n.Va.get(t);if(r&&r.Ia)return ZE().add(r.key);var i=ZE(),a=n.da.get(t);if(!a)return i;var o,u=x(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Ea.get(s);i=i.unionWith(c.view.ia)}}catch(l){u.e(l)}finally{u.f()}return i}function dN(e,t){return pN.apply(this,arguments)}function pN(){return pN=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),e.next=3,zC(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ha(i),e.abrupt("return",(r.isPrimaryClient&&aN(r,n.targetId,a.ca),a));case 6:case"end":return e.stop()}}),e)}))),pN.apply(this,arguments)}function vN(e,t){return mN.apply(this,arguments)}function mN(){return(mN=lu(su().mark((function e(t,n){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),e.abrupt("return",GC(r.localStore,n).then((function(e){return sN(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yN(e,t,n,r){return gN.apply(this,arguments)}function gN(){return gN=lu(su().mark((function e(t,n,r,i){var a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Iw(t),e.next=3,function(e,t){var n=Iw(e),r=Iw(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Dn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):lx.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,HA(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(nN(a,n,i||null),tN(a,n),function(e,t){Iw(Iw(e).mutationQueue).Cn(t)}(a.localStore,n)):Tw();case 11:return e.next=13,sN(a,o);case 13:e.next=16;break;case 15:ww("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),gN.apply(this,arguments)}function kN(e,t){return bN.apply(this,arguments)}function bN(){return(bN=lu(su().mark((function e(t,n){var r,i,a,o,u,s,c,l;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(AN(r=Iw(t)),PN(r),!0!==n||!0===r.ya){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,wN(r,i.toArray());case 5:return a=e.sent,r.ya=!0,e.next=9,uP(r.remoteStore,!0);case 9:o=x(a);try{for(o.s();!(u=o.n()).done;)s=u.value,CA(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ya){e.next=25;break}return c=[],l=Promise.resolve(),r.da.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return rN(r,t),jC(r.localStore,t,!0)})),AA(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,wN(r,c);case 21:return function(e){var t=Iw(e);t.Va.forEach((function(e,n){AA(t.remoteStore,n)})),t.ma.Rr(),t.Va=new Map,t.Ra=new i_(Xw.comparator)}(r),r.ya=!1,e.next=25,uP(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wN(e,t,n){return xN.apply(this,arguments)}function xN(){return xN=lu(su().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Iw(t),a=[],o=[],u=x(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.da.get(c))||0===f.length){e.next=34;break}return e.next=11,VC(i.localStore,RE(f[0]));case 11:l=e.sent,h=x(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Ea.get(p),e.next=20,dN(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,qC(i.localStore,c);case 36:return y=e.sent,e.next=39,VC(i.localStore,y);case 39:return l=e.sent,e.next=42,UP(i,_N(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ta.r_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),xN.apply(this,arguments)}function _N(e){return TE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function EN(e){return function(e){return Iw(Iw(e).persistence).Ni()}(Iw(e).localStore)}function TN(e,t,n,r){return SN.apply(this,arguments)}function SN(){return SN=lu(su().mark((function e(t,n,r,i){var a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Iw(t)).ya){e.next=3;break}return e.abrupt("return",void ww("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.da.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,GC(a.localStore,VE(o[0]));case 10:return u=e.sent,s=XT.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,h_.EMPTY_BYTE_STRING),e.next=14,sN(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,jC(a.localStore,n,!0);case 17:return rN(a,n,i),e.abrupt("break",20);case 19:Tw();case 20:case"end":return e.stop()}}),e)}))),SN.apply(this,arguments)}function IN(e,t,n){return CN.apply(this,arguments)}function CN(){return CN=lu(su().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=AN(t)).ya){e.next=45;break}a=x(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.da.has(u)){e.next=10;break}return ww("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,qC(i.localStore,u);case 12:return s=e.sent,e.next=15,VC(i.localStore,s);case 15:return c=e.sent,e.next=18,UP(i,_N(s),c.targetId,!1,c.resumeToken);case 18:CA(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=x(r),e.prev=30,h=su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.da.has(t),!e.t0){e.next=5;break}return e.next=5,jC(i.localStore,t,!1).then((function(){AA(i.remoteStore,t),rN(i,t)})).catch(sx);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),CN.apply(this,arguments)}function AN(e){var t=Iw(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=GP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=WP.bind(null,t),t.Ta.r_=xP.bind(null,t.eventManager),t.Ta.Sa=_P.bind(null,t.eventManager),t}function PN(e){var t=Iw(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=YP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$P.bind(null,t),t}function NN(e,t,n){var r=Iw(e);(function(){var e=lu(su().mark((function e(t,n,r){var i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Iw(e),r=dS(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(AP(i)),a=new CP(i,t.localStore,n.serializer),e.next=15,n.ba();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.H_(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ba();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,sN(t,s.Z_,void 0);case 31:return e.next=33,function(e,t){var n=Iw(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Y_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(_w("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var RN=function(){function e(){T(this,e),this.synchronizeTabs=!1}return A(e,[{key:"initialize",value:function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=mA(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return NC(this.persistence,new AC,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new gC(bC.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new aA}},{key:"terminate",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),DN=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).Da=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return A(n,[{key:"initialize",value:function(){var e=lu(su().mark((function e(t){var r=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(R(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Da.initialize(this,t);case 4:return e.next=6,PN(this.Da.syncEngine);case 6:return e.next=8,HA(this.Da.remoteStore);case 8:return e.next=10,this.persistence.Vi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return NC(this.persistence,new AC,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new QI(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new wx(t,this.persistence);return new bx(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=IC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?DI.withCacheSize(this.cacheSizeBytes):DI.DEFAULT;return new EC(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,pA(),vA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new aA}}]),n}(RN),ON=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r,!1)).Da=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return A(n,[{key:"initialize",value:function(){var e=lu(su().mark((function e(t){var r,i=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nu(R(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Da.syncEngine,e.t0=this.sharedClientState instanceof iA,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Gs:yN.bind(null,r),zs:TN.bind(null,r),js:IN.bind(null,r),Ni:EN.bind(null,r),Ws:vN.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Vi(function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kN(i.Da.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=pA();if(!iA.v(t))throw new Aw(Cw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=IC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new iA(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(DN),LN=function(){function e(){T(this,e)}return A(e,[{key:"initialize",value:function(){var e=lu(su().mark((function e(t,n){var r=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return KP(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=lN.bind(null,this.syncEngine),e.next=12,uP(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new yP}},{key:"createDatastore",value:function(e){var t=mA(e.databaseInfo.databaseId),n=function(e){return new dA(e)}(e.databaseInfo);return function(e,t,n,r){return new wA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new _A(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return KP(t.syncEngine,e,0)}),uA.v()?new uA:new oA)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new LP(e,t,n,r,i,a);return o&&(u.ya=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Iw(t),ww("RemoteStore","RemoteStore shutting down."),n.y_.add(5),e.next=5,SA(n);case 5:n.S_.shutdown(),n.b_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function MN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return lu(su().mark((function r(){var i;return su().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var FN=function(){function e(t){T(this,e),this.observer=t,this.muted=!1}return A(e,[{key:"next",value:function(e){this.observer.next&&this.va(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.va(this.observer.error,e):xw("Uncaught Error in snapshot listener:",e.toString())}},{key:"Ca",value:function(){this.muted=!0}},{key:"va",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),UN=function(){function e(t,n){var r=this;T(this,e),this.Fa=t,this.serializer=n,this.metadata=new Pw,this.buffer=new Uint8Array,this.Ma=new TextDecoder("utf-8"),this.xa().then((function(e){e&&e.z_()?r.metadata.resolve(e.G_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.G_))))}),(function(e){return r.metadata.reject(e)}))}return A(e,[{key:"close",value:function(){return this.Fa.cancel()}},{key:"getMetadata",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xa",value:function(){var e=lu(su().mark((function e(){var t,n,r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ma.decode(t),r=Number(n),isNaN(r)&&this.Na("length string (".concat(n,") is not valid number")),e.next=9,this.Ba(r);case 9:return i=e.sent,e.abrupt("return",new SP(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"La",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Oa",value:function(){var e=lu(su().mark((function e(){var t,n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.La()<0)){e.next=7;break}return e.next=3,this.ka();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.La())<0&&this.Na("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ba",value:function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ka();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Na("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ma.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Na",value:function(e){throw this.Fa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ka",value:function(){var e=lu(su().mark((function e(){var t,n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Fa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),VN=function(){function e(t){T(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return A(e,[{key:"lookup",value:function(){var e=lu(su().mark((function e(t){var n,r=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Aw(Cw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=lu(su().mark((function e(t,n){var r,i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),i=bS(r.serializer)+"/documents",a={documents:n.map((function(e){return mS(r.serializer,e)}))},e.next=5,r.yo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=ES(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Sw(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new OT(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=lu(su().mark((function e(){var t,n=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Xw.fromPath(t);n.mutations.push(new LT(r,n.precondition(r)))})),e.next=7,function(){var e=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iw(t),i=bS(r.serializer)+"/documents",a={writes:n.map((function(e){return TS(r.serializer,e)}))},e.next=3,r.Vo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Tw();t=Hw.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Aw(Cw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Hw.min())?kT.exists(!1):kT.updateTime(t):kT.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hw.min()))throw new Aw(Cw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kT.updateTime(t)}return kT.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),jN=function(){function e(t,n,r,i,a){T(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.qa=r.maxAttempts,this.Ko=new yA(this.asyncQueue,"transaction_retry")}return A(e,[{key:"run",value:function(){this.qa-=1,this.Qa()}},{key:"Qa",value:function(){var e=this;this.Ko.xo(lu(su().mark((function t(){var n,r;return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new VN(e.datastore),(r=e.Ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.$a(t)}))}))})).catch((function(t){e.$a(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ka",value:function(e){try{var t=this.updateFunction(e);return!_x(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"$a",value:function(e){var t=this;this.qa>0&&this.Ua(e)?(this.qa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Qa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ua",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!jT(t)}return!1}}]),e}(),BN=function(){function e(t,n,r,i){var a=this;T(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yw.UNAUTHENTICATED,this.clientId=jw.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ww("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ww("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return A(e,[{key:"getConfiguration",value:function(){var e=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Aw(Cw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Pw;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(lu(su().mark((function n(){var r;return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=hP(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function zN(e,t){return qN.apply(this,arguments)}function qN(){return qN=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ww("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,RC(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),qN.apply(this,arguments)}function GN(e,t){return HN.apply(this,arguments)}function HN(){return HN=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,WN(t);case 3:return r=e.sent,ww("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return aP(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return aP(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),HN.apply(this,arguments)}function KN(e){return"FirebaseError"===e.name?e.code===Cw.FAILED_PRECONDITION||e.code===Cw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function WN(e){return QN.apply(this,arguments)}function QN(){return(QN=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return ww("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,zN(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),KN(n=e.t0)){e.next=13;break}throw n;case 13:return _w("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,zN(t,new RN);case 16:e.next=21;break;case 18:return ww("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,zN(t,new RN);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function YN(e){return XN.apply(this,arguments)}function XN(){return(XN=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return ww("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,GN(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return ww("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,GN(t,new LN);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $N(e){return WN(e).then((function(e){return e.persistence}))}function JN(e){return WN(e).then((function(e){return e.localStore}))}function ZN(e){return YN(e).then((function(e){return e.remoteStore}))}function eR(e){return YN(e).then((function(e){return e.syncEngine}))}function tR(e){return YN(e).then((function(e){return e.datastore}))}function nR(e){return rR.apply(this,arguments)}function rR(){return(rR=lu(su().mark((function e(t){var n,r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YN(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=MP.bind(null,n.syncEngine),r.onUnlisten=jP.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Pw;return e.asyncQueue.enqueueAndForget(lu(su().mark((function i(){return su().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new FN({next:function(a){t.enqueueAndForget((function(){return bP(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Aw(Cw.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Aw(Cw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new TP(SE(n.path),a,{includeMetadataChanges:!0,W_:!0});return gP(e,o)},i.next=3,nR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function aR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Pw;return e.asyncQueue.enqueueAndForget(lu(su().mark((function i(){return su().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new FN({next:function(n){t.enqueueAndForget((function(){return bP(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Aw(Cw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new TP(n,a,{includeMetadataChanges:!0,W_:!0});return gP(e,o)},i.next=3,nR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function oR(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var uR=new Map;function sR(e,t,n){if(!n)throw new Aw(Cw.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cR(e,t,n,r){if(!0===t&&!0===r)throw new Aw(Cw.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function lR(e){if(!Xw.isDocumentKey(e))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function fR(e){if(Xw.isDocumentKey(e))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hR(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Tw()}function dR(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Aw(Cw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hR(e);throw new Aw(Cw.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function pR(e,t){if(t<=0)throw new Aw(Cw.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var vR=function(){function e(t){var n,r;if(T(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Aw(Cw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Aw(Cw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}cR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oR(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Aw(Cw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Aw(Cw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Aw(Cw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return A(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),mR=function(){function e(t,n,r,i){T(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vR({}),this._settingsFrozen=!1}return A(e,[{key:"app",get:function(){if(!this._app)throw new Aw(Cw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Aw(Cw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vR(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Rw;switch(e.type){case"firstParty":return new Mw(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Aw(Cw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=uR.get(e);t&&(ww("ComponentProvider","Removing Datastore"),uR.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function yR(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=dR(e,mR))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&_w("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=yw.MOCK_USER;else{u=Tu(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Aw(Cw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new yw(c)}e._authCredentials=new Dw(new Nw(u,s))}}var gR=function(){function e(t,n,r){T(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return A(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),kR=function(){function e(t,n,r){T(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return A(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new bR(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),bR=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this,e,r,SE(i)))._path=i,a.type="collection",a}return A(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new kR(this.firestore,null,new Xw(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(gR);function wR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Hu(e),sR("collection","path",t),e instanceof mR){var a=Ww.fromString.apply(Ww,[t].concat(r));return fR(a),new bR(e,null,a)}if(!(e instanceof kR||e instanceof bR))throw new Aw(Cw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ww.fromString.apply(Ww,[t].concat(r)));return fR(o),new bR(e.firestore,null,o)}function xR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Hu(e),1===arguments.length&&(t=jw.V()),sR("doc","path",t),e instanceof mR){var a=Ww.fromString.apply(Ww,[t].concat(r));return lR(a),new kR(e,null,new Xw(a))}if(!(e instanceof kR||e instanceof bR))throw new Aw(Cw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ww.fromString.apply(Ww,[t].concat(r)));return lR(o),new kR(e.firestore,e instanceof bR?e.converter:null,new Xw(o))}function _R(e,t){return e=Hu(e),t=Hu(t),(e instanceof kR||e instanceof bR)&&(t instanceof kR||t instanceof bR)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ER(e,t){return e=Hu(e),t=Hu(t),e instanceof gR&&t instanceof gR&&e.firestore===t.firestore&&LE(e._query,t._query)&&e.converter===t.converter}var TR=function(){function e(){var t=this;T(this,e),this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new yA(this,"async_queue_retry"),this.Xa=function(){var e=vA();e&&ww("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ko.No()};var n=vA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xa)}return A(e,[{key:"isShuttingDown",get:function(){return this.za}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.eu(),this.tu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.za){this.za=!0,this.Ya=e||!1;var t=vA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xa)}}},{key:"enqueue",value:function(e){var t=this;if(this.eu(),this.za)return new Promise((function(){}));var n=new Pw;return this.tu((function(){return t.za&&t.Ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ga.push(e),t.nu()}))}},{key:"nu",value:function(){var e=lu(su().mark((function e(){var t=this;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ga.length){e.next=14;break}return e.prev=1,e.next=4,this.Ga[0]();case 4:this.Ga.shift(),this.Ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),vx(e.t0)){e.next=12;break}throw e.t0;case 12:ww("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ga.length>0&&this.Ko.xo((function(){return t.nu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"tu",value:function(e){var t=this,n=this.Wa.then((function(){return t.Ja=!0,e().catch((function(e){t.Ha=e,t.Ja=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xw("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ja=!1,e}))}));return this.Wa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.eu(),this.Za.indexOf(e)>-1&&(t=0);var i=fP.createAndSchedule(this,e,t,n,(function(e){return r.ru(e)}));return this.ja.push(i),i}},{key:"eu",value:function(){this.Ha&&Tw()}},{key:"verifyOperationInProgress",value:function(){}},{key:"iu",value:function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Wa,e.next=3,t;case 3:if(t!==this.Wa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(e){var t,n=x(this.ja);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ou",value:function(e){var t=this;return this.iu().then((function(){t.ja.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=x(t.ja);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.iu()}))}},{key:"_u",value:function(e){this.Za.push(e)}},{key:"ru",value:function(e){var t=this.ja.indexOf(e);this.ja.splice(t,1)}}]),e}();function SR(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=x(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var IR=function(){function e(){T(this,e),this._progressObserver={},this._taskCompletionResolver=new Pw,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return A(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),CR=function(e){N(n,e);var t=L(n);function n(e,r,i,a){var o;return T(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new TR,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return A(n,[{key:"_terminate",value:function(){return this._firestoreClient||PR(this),this._firestoreClient.terminate()}}]),n}(mR);function AR(e){return e._firestoreClient||PR(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function PR(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new b_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,oR(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new BN(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function NR(e,t,n){var r=new Pw;return e.asyncQueue.enqueue(lu(su().mark((function i(){var a;return su().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,zN(e,n);case 3:return i.next=5,GN(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),KN(a=i.t0)){i.next=13;break}throw a;case 13:_w("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function RR(e){return function(e){var t=new Pw;return e.asyncQueue.enqueueAndForget(lu(su().mark((function n(){return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ZP,n.next=3,eR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(AR(e=dR(e,CR)))}function DR(e){return function(e){return e.asyncQueue.enqueue(lu(su().mark((function t(){var n,r;return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$N(e);case 2:return n=t.sent,t.next=5,ZN(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Iw(e);return t.y_.delete(0),EA(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(AR(e=dR(e,CR)))}function OR(e){return function(e){return e.asyncQueue.enqueue(lu(su().mark((function t(){var n,r;return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$N(e);case 2:return n=t.sent,t.next=5,ZN(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Iw(t)).y_.add(0),e.next=4,SA(n);case 4:n.b_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(AR(e=dR(e,CR)))}function LR(e,t){var n=AR(e=dR(e,CR)),r=new IR;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new UN(e,t)}(function(e,t){if(e instanceof Uint8Array)return MN(e,t);if(e instanceof ArrayBuffer)return MN(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?GT().encode(e):e),t)}(n,mA(t));e.asyncQueue.enqueueAndForget(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=NN,t.next=3,eR(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function MR(e,t){return function(e,t){return e.asyncQueue.enqueue(lu(su().mark((function n(){return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Iw(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qr.getNamedQuery(e,t)}))},n.next=3,JN(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(AR(e=dR(e,CR)),t).then((function(t){return t?new gR(e,null,t.query):null}))}function FR(e){if(e._initialized||e._terminated)throw new Aw(Cw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var UR=function(){function e(t){T(this,e),this._byteString=t}return A(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(h_.fromBase64String(t))}catch(t){throw new Aw(Cw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(h_.fromUint8Array(t))}}]),e}(),VR=function(){function e(){T(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yw(n)}return A(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var jR=A((function e(t){T(this,e),this._methodName=t})),BR=function(){function e(t,n){if(T(this,e),!isFinite(t)||t<-90||t>90)throw new Aw(Cw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Aw(Cw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return A(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Bw(this._lat,e._lat)||Bw(this._long,e._long)}}]),e}(),zR=/^__.*__$/,qR=function(){function e(t,n,r){T(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return A(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new CT(e,this.data,this.fieldMask,t,this.fieldTransforms):new IT(e,this.data,t,this.fieldTransforms)}}]),e}(),GR=function(){function e(t,n,r){T(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return A(e,[{key:"toMutation",value:function(e,t){return new CT(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function HR(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tw()}}var KR=function(){function e(t,n,r,i,a,o){T(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.au(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return A(e,[{key:"path",get:function(){return this.settings.path}},{key:"uu",get:function(){return this.settings.uu}},{key:"cu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"lu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.Pu(e),r}},{key:"Iu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.au(),r}},{key:"Tu",value:function(e){return this.cu({path:void 0,hu:!0})}},{key:"Eu",value:function(e){return hD(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"au",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}},{key:"Pu",value:function(e){if(0===e.length)throw this.Eu("Document fields must not be empty");if(HR(this.uu)&&zR.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}]),e}(),WR=function(){function e(t,n,r){T(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||mA(t)}return A(e,[{key:"Ru",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new KR({uu:e,methodName:t,Au:n,path:Yw.emptyPath(),hu:!1,du:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function QR(e){var t=e._freezeSettings(),n=mA(e._databaseId);return new WR(e._databaseId,!!t.ignoreUndefinedProperties,n)}function YR(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Ru(a.merge||a.mergeFields?2:0,t,n,i);sD("Data must be an object, but it was:",o,r);var u,s,c=oD(r,o);if(a.merge)u=new l_(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=x(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=cD(t,l.value,n);if(!o.contains(d))throw new Aw(Cw.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));dD(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new l_(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new qR(new q_(c),u,s)}var XR=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.uu)throw 1===e.uu?e.Eu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Eu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jR);function $R(e,t,n){return new KR({uu:3,Au:t.settings.Au,methodName:e._methodName,hu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var JR=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"_toFieldTransform",value:function(e){return new yT(e.path,new cT)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jR),ZR=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e)).Vu=r,i}return A(n,[{key:"_toFieldTransform",value:function(e){var t=$R(this,e,!0),n=this.Vu.map((function(e){return aD(e,t)})),r=new lT(n);return new yT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jR),eD=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e)).Vu=r,i}return A(n,[{key:"_toFieldTransform",value:function(e){var t=$R(this,e,!0),n=this.Vu.map((function(e){return aD(e,t)})),r=new hT(n);return new yT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jR),tD=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e)).mu=r,i}return A(n,[{key:"_toFieldTransform",value:function(e){var t=new pT(e.serializer,iT(e.serializer,this.mu));return new yT(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jR);function nD(e,t,n,r){var i=e.Ru(1,t,n);sD("Data must be an object, but it was:",i,r);var a=[],o=q_.empty();n_(r,(function(e,r){var u=fD(t,e,n);r=Hu(r);var s=i.Iu(u);if(r instanceof XR)a.push(u);else{var c=aD(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new l_(a);return new GR(o,u,i.fieldTransforms)}function rD(e,t,n,r,i,a){var o=e.Ru(1,t,n),u=[cD(t,r,n)],s=[i];if(a.length%2!=0)throw new Aw(Cw.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(cD(t,a[c])),s.push(a[c+1]);for(var l=[],f=q_.empty(),h=u.length-1;h>=0;--h)if(!dD(l,u[h])){var d=u[h],p=s[h];p=Hu(p);var v=o.Iu(d);if(p instanceof XR)l.push(d);else{var m=aD(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new l_(l);return new GR(f,y,o.fieldTransforms)}function iD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return aD(n,e.Ru(r?4:3,t))}function aD(e,t){if(uD(e=Hu(e)))return sD("Unsupported field value:",t,e),oD(e,t);if(e instanceof jR)return function(e,t){if(!HR(t.uu))throw t.Eu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Eu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.hu&&4!==t.uu)throw t.Eu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=x(e);try{for(a.s();!(n=a.n()).done;){var o=aD(n.value,t.Tu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Hu(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return iT(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Gw.fromDate(e);return{timestampValue:lS(t.serializer,n)}}if(e instanceof Gw){var r=new Gw(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lS(t.serializer,r)}}if(e instanceof BR)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof UR)return{bytesValue:fS(t.serializer,e._byteString)};if(e instanceof kR){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Eu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:pS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Eu("Unsupported field value: ".concat(hR(e)))}(e,t)}function oD(e,t){var n={};return r_(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):n_(e,(function(e,r){var i=aD(r,t.lu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function uD(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gw||e instanceof BR||e instanceof UR||e instanceof kR||e instanceof jR)}function sD(e,t,n){if(!uD(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=hR(n);throw"an object"===r?t.Eu(e+" a custom object"):t.Eu(e+" "+r)}}function cD(e,t,n){if((t=Hu(t))instanceof VR)return t._internalPath;if("string"==typeof t)return fD(e,t);throw hD("Field path arguments must be of type string or ",e,!1,void 0,n)}var lD=new RegExp("[~\\*/\\[\\]]");function fD(e,t,n){if(t.search(lD)>=0)throw hD("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return hu(VR,f(t.split(".")))._internalPath}catch(uy){throw hD("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hD(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Aw(Cw.INVALID_ARGUMENT,u+e+s)}function dD(e,t){return e.some((function(e){return e.isEqual(t)}))}var pD=function(){function e(t,n,r,i,a){T(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return A(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new kR(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new vD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(mD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),vD=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"data",value:function(){return nu(R(n.prototype),"data",this).call(this)}}]),n}(pD);function mD(e,t){return"string"==typeof t?fD(e,t):t instanceof VR?t._internalPath:t._delegate._internalPath}function yD(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Aw(Cw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gD=A((function e(){T(this,e)})),kD=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n)}(gD);function bD(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof gD&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof xD})).length,n=e.filter((function(e){return e instanceof wD})).length;if(t>1||t>0&&n>0)throw new Aw(Cw.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=x(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var wD=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return A(n,[{key:"_apply",value:function(e){var t=this._parse(e);return OD(e._query,t),new gR(e.firestore,e.converter,DE(e._query,t))}},{key:"_parse",value:function(e){var t=QR(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){DD(o,a);var s,c=[],l=x(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(RD(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=RD(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||DD(o,a),u=iD(n,t,o,"in"===a||"not-in"===a);return J_.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kD);var xD=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return A(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Z_.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=x(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;OD(r,a),r=DE(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new gR(e.firestore,e.converter,DE(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(gD);var _D=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return A(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Y_(t,n);return function(e,t){if(null===CE(e)){var n=AE(e);null!==n&&LD(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new gR(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new EE(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(kD);var ED=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return A(n,[{key:"_apply",value:function(e){return new gR(e.firestore,e.converter,OE(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kD);var TD=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return A(n,[{key:"_apply",value:function(e){var t=ND(e,this.type,this._docOrFields,this._inclusive);return new gR(e.firestore,e.converter,function(e,t){return new EE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kD);function SD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return TD._create("startAt",t,!0)}function ID(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return TD._create("startAfter",t,!1)}var CD=function(e){N(n,e);var t=L(n);function n(e,r,i){var a;return T(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return A(n,[{key:"_apply",value:function(e){var t=ND(e,this.type,this._docOrFields,this._inclusive);return new gR(e.firestore,e.converter,function(e,t){return new EE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(kD);function AD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CD._create("endBefore",t,!1)}function PD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CD._create("endAt",t,!0)}function ND(e,t,n,r){if(n[0]=Hu(n[0]),n[0]instanceof pD)return function(e,t,n,r,i){if(!r)throw new Aw(Cw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=x(NE(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(N_(t,r.key));else{var c=r.data.field(s.field);if(y_(c))throw new Aw(Cw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new K_(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=QR(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Aw(Cw.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!PE(e)&&-1!==c.indexOf("/"))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ww.fromString(c));if(!Xw.isDocumentKey(l))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Xw(l);u.push(N_(t,f))}else{var h=iD(n,r,c);u.push(h)}}return new K_(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function RD(e,t,n){if("string"==typeof(n=Hu(n))){if(""===n)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PE(t)&&-1!==n.indexOf("/"))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ww.fromString(n));if(!Xw.isDocumentKey(r))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return N_(e,new Xw(r))}if(n instanceof kR)return N_(e,n._key);throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hR(n),"."))}function DD(e,t){if(!Array.isArray(e)||0===e.length)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function OD(e,t){if(t.isInequality()){var n=AE(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=CE(e);null!==i&&LD(e,r,i)}var a=function(e,t){var n,r=x(e);try{for(r.s();!(n=r.n()).done;){var i,a=x(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Aw(Cw.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Aw(Cw.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function LD(e,t,n){if(!n.isEqual(t))throw new Aw(Cw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var MD=function(){function e(){T(this,e)}return A(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(E_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return v_(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(m_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Tw()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return n_(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new BR(v_(e.latitude),v_(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=g_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(k_(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=p_(e);return new Gw(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ww.fromString(e);Sw(US(n));var r=new w_(n.get(1),n.get(3)),i=new Xw(n.popFirst(5));return r.isEqual(t)||xw("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function FD(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var UD=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this)).firestore=e,r}return A(n,[{key:"convertBytes",value:function(e){return new UR(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kR(this.firestore,null,t)}}]),n}(MD);var VD=function(){function e(t,n){T(this,e),this.hasPendingWrites=t,this.fromCache=n}return A(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),jD=function(e){N(n,e);var t=L(n);function n(e,r,i,a,o,u){var s;return T(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return A(n,[{key:"exists",value:function(){return nu(R(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new BD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(mD("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(pD),BD=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nu(R(n.prototype),"data",this).call(this,e)}}]),n}(jD),zD=function(){function e(t,n,r,i){T(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new VD(i.hasPendingWrites,i.fromCache),this.query=r}return A(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new BD(n._firestore,n._userDataWriter,r.key,r,new VD(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Aw(Cw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new BD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new BD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:qD(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function qD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tw()}}function GD(e,t){return e instanceof jD&&t instanceof jD?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof zD&&t instanceof zD&&e._firestore===t._firestore&&ER(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var HD=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this)).firestore=e,r}return A(n,[{key:"convertBytes",value:function(e){return new UR(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kR(this.firestore,null,t)}}]),n}(MD);function KD(e){e=dR(e,kR);var t=dR(e.firestore,CR),n=AR(t),r=new HD(t);return function(e,t){var n=new Pw;return e.asyncQueue.enqueueAndForget(lu(su().mark((function r(){return su().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Iw(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Aw(Cw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=hP(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,JN(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new jD(t,r,e._key,n,new VD(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function WD(e){e=dR(e,gR);var t=dR(e.firestore,CR),n=AR(t),r=new HD(t);return yD(e._query),aR(n,e._query).then((function(n){return new zD(t,r,e,n)}))}function QD(e){e=dR(e,gR);var t=dR(e.firestore,CR),n=AR(t),r=new HD(t);return function(e,t){var n=new Pw;return e.asyncQueue.enqueueAndForget(lu(su().mark((function r(){return su().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=lu(su().mark((function e(t,n,r){var i,a,o,u,s;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zC(t,n,!0);case 3:i=e.sent,a=new RP(n,i.ss),o=a.sa(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=hP(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,JN(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new zD(t,r,e,n)}))}function YD(e){e=dR(e,gR);var t=dR(e.firestore,CR),n=AR(t),r=new HD(t);return aR(n,e._query,{source:"server"}).then((function(n){return new zD(t,r,e,n)}))}function XD(e,t,n){e=dR(e,kR);var r=dR(e.firestore,CR),i=FD(e.converter,t,n);return eO(r,[YR(QR(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kT.none())])}function $D(e,t,n){e=dR(e,kR);for(var r=dR(e.firestore,CR),i=QR(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return eO(r,[("string"==typeof(t=Hu(t))||t instanceof VR?rD(i,"updateDoc",e._key,t,n,o):nD(i,"updateDoc",e._key,t)).toMutation(e._key,kT.exists(!0))])}function JD(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Hu(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||SR(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(SR(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof kR)l=dR(e.firestore,CR),f=SE(e._key.path),c={next:function(t){n[s]&&n[s](tO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=dR(e,gR);l=dR(p.firestore,CR),f=p._query;var v=new HD(l);c={next:function(e){n[s]&&n[s](new zD(l,v,p,e))},error:n[s+1],complete:n[s+2]},yD(e._query)}return function(e,t,n,r){var i=new FN(r),a=new TP(t,i,n);return e.asyncQueue.enqueueAndForget(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gP,t.next=3,nR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ca(),e.asyncQueue.enqueueAndForget(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=bP,t.next=3,nR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(AR(l),f,h,c)}function ZD(e,t){return function(e,t){var n=new FN(t);return e.asyncQueue.enqueueAndForget(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Iw(e).O_.add(t),t.next()},t.next=3,nR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ca(),e.asyncQueue.enqueueAndForget(lu(su().mark((function t(){return su().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Iw(e).O_.delete(t)},t.next=3,nR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(AR(e=dR(e,CR)),SR(t)?t:{next:t})}function eO(e,t){return function(e,t){var n=new Pw;return e.asyncQueue.enqueueAndForget(lu(su().mark((function r(){return su().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=zP,r.next=3,eR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(AR(e),t)}function tO(e,t,n){var r=n.docs.get(t._key),i=new HD(e);return new jD(e,i,t._key,r,new VD(n.hasPendingWrites,n.fromCache),t.converter)}var nO={maxAttempts:5},rO=function(){function e(t,n){T(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=QR(t)}return A(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=iO(e,this._firestore),i=FD(r.converter,t,n),a=YR(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,kT.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=iO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Hu(t))||t instanceof VR?rD(this._dataReader,"WriteBatch.update",i._key,t,n,o):nD(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,kT.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=iO(e,this._firestore);return this._mutations=this._mutations.concat(new OT(t._key,kT.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Aw(Cw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function iO(e,t){if((e=Hu(e)).firestore!==t)throw new Aw(Cw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var aO=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r))._firestore=e,i}return A(n,[{key:"get",value:function(e){var t=this,r=iO(e,this._firestore),i=new HD(this._firestore);return nu(R(n.prototype),"get",this).call(this,e).then((function(e){return new jD(t._firestore,i,r._key,e._document,new VD(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){T(this,e),this._firestore=t,this._transaction=n,this._dataReader=QR(t)}return A(e,[{key:"get",value:function(e){var t=this,n=iO(e,this._firestore),r=new UD(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Tw();var i=e[0];if(i.isFoundDocument())return new pD(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pD(t._firestore,r,n._key,null,n.converter);throw Tw()}))}},{key:"set",value:function(e,t,n){var r=iO(e,this._firestore),i=FD(r.converter,t,n),a=YR(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=iO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Hu(t))||t instanceof VR?rD(this._dataReader,"Transaction.update",i._key,t,n,o):nD(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=iO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function oO(e,t,n){e=dR(e,CR);var r=Object.assign(Object.assign({},nO),n);return function(e){if(e.maxAttempts<1)throw new Aw(Cw.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Pw;return e.asyncQueue.enqueueAndForget(lu(su().mark((function i(){var a;return su().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,tR(e);case 2:a=i.sent,new jN(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(AR(e),(function(n){return t(new aO(e,n))}),r)}function uO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZR("arrayUnion",t)}function sO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eD("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gw=e}(js),Ds(new Ku("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new CR(new Ow(e.getProvider("auth-internal")),new Uw(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Aw(Cw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new w_(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ks(mw,"4.1.0",e),Ks(mw,"4.1.0","esm2017")}();function cO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Aw("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function lO(){if("undefined"===typeof Uint8Array)throw new Aw("unimplemented","Uint8Arrays are not available in this environment.")}function fO(){if("undefined"==typeof atob)throw new Aw("unimplemented","Blobs are unavailable in Firestore in this environment.")}var hO=function(){function e(t){T(this,e),this._delegate=t}return A(e,[{key:"toBase64",value:function(){return fO(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return lO(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return fO(),new e(UR.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return lO(),new e(UR.fromUint8Array(t))}}]),e}();function dO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=x(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var pO=function(){function e(){T(this,e)}return A(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){FR(e=dR(e,CR));var n=AR(e);if(n._uninitializedComponentsProvider)throw new Aw(Cw.FAILED_PRECONDITION,"SDK cache is already specified.");_w("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new LN;return NR(n,i,new DN(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){FR(e=dR(e,CR));var t=AR(e);if(t._uninitializedComponentsProvider)throw new Aw(Cw.FAILED_PRECONDITION,"SDK cache is already specified.");_w("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new LN;return NR(t,r,new ON(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Aw(Cw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Pw;return e._queue.enqueueAndForgetEvenWhileRestricted(lu(su().mark((function n(){return su().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hx.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,hx.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(IC(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),vO=function(){function e(t,n,r){var i=this;T(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof w_||(this._appCompat=t)}return A(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||_w("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yR(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return DR(this._delegate)}},{key:"disableNetwork",value:function(){return OR(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&cR("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return RR(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return ZD(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Aw("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new AO(this,wR(this._delegate,e))}catch(t){throw wO(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new bO(this,xR(this._delegate,e))}catch(t){throw wO(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new SO(this,function(e,t){if(e=dR(e,mR),sR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Aw(Cw.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new gR(e,null,function(e){return new EE(Ww.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw wO(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return oO(this._delegate,(function(n){return e(new yO(t,n))}))}},{key:"batch",value:function(){var e=this;return AR(this._delegate),new gO(new rO(this._delegate,(function(t){return eO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return LR(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return MR(this._delegate,e).then((function(e){return e?new SO(t,e):null}))}}]),e}(),mO=function(e){N(n,e);var t=L(n);function n(e){var r;return T(this,n),(r=t.call(this)).firestore=e,r}return A(n,[{key:"convertBytes",value:function(e){return new hO(new UR(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return bO.forKey(t,this.firestore,null)}}]),n}(MD);var yO=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new mO(t)}return A(e,[{key:"get",value:function(e){var t=this,n=PO(e);return this._delegate.get(n).then((function(e){return new EO(t._firestore,new jD(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=PO(e);return n?(cO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PO(e);return this._delegate.delete(t),this}}]),e}(),gO=function(){function e(t){T(this,e),this._delegate=t}return A(e,[{key:"set",value:function(e,t,n){var r=PO(e);return n?(cO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PO(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),kO=function(){function e(t,n,r){T(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return A(e,[{key:"fromFirestore",value:function(e,t){var n=new BD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TO(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new mO(t),n),i.set(n,a)),a}}]),e}();kO.INSTANCES=new WeakMap;var bO=function(){function e(t,n){T(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new mO(t)}return A(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new AO(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new AO(this.firestore,wR(this._delegate,e))}catch(t){throw wO(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Hu(e))instanceof kR&&_R(this._delegate,e)}},{key:"set",value:function(e,t){t=cO("DocumentReference.set",t);try{return t?XD(this._delegate,e,t):XD(this._delegate,e)}catch(n){throw wO(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?$D(this._delegate,e):$D.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw wO(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return eO(dR((e=this._delegate).firestore,CR),[new OT(e._key,kT.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=xO(n),a=_O(n,(function(t){return new EO(e.firestore,new jD(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return JD(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?KD(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=dR(e,kR);var t=dR(e.firestore,CR);return iR(AR(t),e._key,{source:"server"}).then((function(n){return tO(t,e,n)}))}(this._delegate):function(e){e=dR(e,kR);var t=dR(e.firestore,CR);return iR(AR(t),e._key).then((function(n){return tO(t,e,n)}))}(this._delegate)).then((function(e){return new EO(t.firestore,new jD(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(kO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Aw("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new kR(n._delegate,r,new Xw(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new kR(n._delegate,r,t))}}]),e}();function wO(e,t,n){return e.message=e.message.replace(t,n),e}function xO(e){var t,n=x(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!dO(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function _O(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=dO(e[0])?e[0]:dO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var EO=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n}return A(e,[{key:"ref",get:function(){return new bO(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return GD(this._delegate,e._delegate)}}]),e}(),TO=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Tw(),t}}]),n}(EO),SO=function(){function e(t,n){T(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new mO(t)}return A(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,bD(this._delegate,function(e,t,n){var r=t,i=mD("where",e);return wD._create(i,r,n)}(t,n,r)))}catch(i){throw wO(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,bD(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=mD("orderBy",e);return _D._create(n,t)}(t,n)))}catch(r){throw wO(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,bD(this._delegate,(pR("limit",n=t),ED._create("limit",n,"F"))))}catch(n){throw wO(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,bD(this._delegate,(pR("limitToLast",n=t),ED._create("limitToLast",n,"L"))))}catch(n){throw wO(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,bD(this._delegate,SD.apply(void 0,arguments)))}catch(t){throw wO(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,bD(this._delegate,ID.apply(void 0,arguments)))}catch(t){throw wO(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,bD(this._delegate,AD.apply(void 0,arguments)))}catch(t){throw wO(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,bD(this._delegate,PD.apply(void 0,arguments)))}catch(t){throw wO(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return ER(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?QD(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?YD(this._delegate):WD(this._delegate)).then((function(e){return new CO(t.firestore,new zD(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=xO(n),a=_O(n,(function(t){return new CO(e.firestore,new zD(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return JD(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(kO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),IO=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n}return A(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new TO(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),CO=function(){function e(t,n){T(this,e),this._firestore=t,this._delegate=n}return A(e,[{key:"query",get:function(){return new SO(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new TO(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new IO(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new TO(n._firestore,r))}))}},{key:"isEqual",value:function(e){return GD(this._delegate,e._delegate)}}]),e}(),AO=function(e){N(n,e);var t=L(n);function n(e,r){var i;return T(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return A(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new bO(this.firestore,e):null}},{key:"doc",value:function(e){try{return new bO(this.firestore,void 0===e?xR(this._delegate):xR(this._delegate,e))}catch(t){throw wO(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=dR(e.firestore,CR),r=xR(e),i=FD(e.converter,t);return eO(n,[YR(QR(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kT.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new bO(t.firestore,e)}))}},{key:"isEqual",value:function(e){return _R(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(kO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(SO);function PO(e){return dR(e,kR)}var NO=function(){function e(){T(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=hu(VR,n)}return A(e,[{key:"isEqual",value:function(e){return(e=Hu(e))instanceof VR&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Yw.keyField().canonicalString())}}]),e}(),RO=function(){function e(t){T(this,e),this._delegate=t}return A(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new JR("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new XR("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=uO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=sO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new tD("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),DO={Firestore:vO,GeoPoint:BR,Timestamp:Gw,Blob:hO,Transaction:yO,WriteBatch:gO,DocumentReference:bO,DocumentSnapshot:EO,Query:SO,QueryDocumentSnapshot:TO,QuerySnapshot:CO,CollectionReference:AO,FieldPath:NO,FieldValue:RO,setLogLevel:function(e){var t;t=e,kw.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ku("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},DO)))}(e,(function(e,t){return new vO(e,t,new pO)})),e.registerVersion("@firebase/firestore-compat","0.3.14")}(gc);var OO,LO="firebasestorage.googleapis.com",MO="storageBucket",FO=function(e){N(n,e);var t=L(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return T(this,n),(i=t.call(this,UO(e),"Firebase Storage: ".concat(r," (").concat(UO(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(O(i),n.prototype),i}return A(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return UO(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ru);function UO(e){return"storage/"+e}function VO(){return new FO(OO.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function jO(){return new FO(OO.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BO(){return new FO(OO.CANCELED,"User canceled the upload/download.")}function zO(){return new FO(OO.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qO(e){return new FO(OO.INVALID_ARGUMENT,e)}function GO(){return new FO(OO.APP_DELETED,"The Firebase app was deleted.")}function HO(e){return new FO(OO.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function KO(e,t){return new FO(OO.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function WO(e){throw new FO(OO.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(OO||(OO={}));var QO,YO=function(){function e(t,n){T(this,e),this.bucket=t,this.path_=n}return A(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new FO(OO.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===LO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new FO(OO.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),XO=function(){function e(t){T(this,e),this.promise_=Promise.reject(t)}return A(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function $O(e){return"string"===typeof e||e instanceof String}function JO(e){return ZO()&&e instanceof Blob}function ZO(){return"undefined"!==typeof Blob&&!Iu()}function eL(e,t,n,r){if(r<t)throw qO("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw qO("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function tL(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function nL(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function rL(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(QO||(QO={}));var iL=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];T(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return A(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=VO();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?GO():BO());else i(jO())}};this.canceled_?t(0,new aL(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new aL(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===QO.NO_ERROR,a=r.getStatus();if(!n||rL(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===QO.ABORT;t(!1,new aL(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new aL(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),aL=A((function e(t,n,r){T(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function oL(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function uL(){for(var e=oL(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(ZO())return new Blob(n);throw new FO(OO.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function sL(e){if("undefined"===typeof atob)throw t="base-64",new FO(OO.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var cL={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},lL=A((function e(t,n){T(this,e),this.data=t,this.contentType=n||null}));function fL(e,t){switch(e){case cL.RAW:return new lL(hL(t));case cL.BASE64:case cL.BASE64URL:return new lL(dL(e,t));case cL.DATA_URL:return new lL(function(e){var t=new pL(e);return t.base64?dL(cL.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw KO(cL.DATA_URL,"Malformed data URL.")}return hL(t)}(t.rest)}(t),new pL(t).contentType)}throw VO()}function hL(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function dL(e,t){switch(e){case cL.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw KO(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case cL.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw KO(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=sL(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw KO(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var pL=A((function e(t){T(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw KO(cL.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var vL=function(){function e(t,n){T(this,e);var r=0,i="";JO(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return A(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(JO(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(ZO()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(uL.apply(null,i))}var a=n.map((function(e){return $O(e)?fL(cL.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function mL(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function yL(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function gL(e,t){return t}var kL=A((function e(t,n,r,i){T(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||gL})),bL=null;function wL(){if(bL)return bL;var e=[];e.push(new kL("bucket")),e.push(new kL("generation")),e.push(new kL("metageneration")),e.push(new kL("name","fullPath",!0));var t=new kL("name");t.xform=function(e,t){return function(e){return!$O(e)||e.length<2?e:yL(e)}(t)},e.push(t);var n=new kL("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new kL("timeCreated")),e.push(new kL("updated")),e.push(new kL("md5Hash",null,!0)),e.push(new kL("cacheControl",null,!0)),e.push(new kL("contentDisposition",null,!0)),e.push(new kL("contentEncoding",null,!0)),e.push(new kL("contentLanguage",null,!0)),e.push(new kL("contentType",null,!0)),e.push(new kL("metadata","customMetadata",!0)),bL=e}function xL(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new YO(n,r);return t._makeStorageReference(i)}})}(r,e),r}function _L(e,t,n){var r=mL(t);return null===r?null:xL(e,r,n)}function EL(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var TL="prefixes",SL="items";function IL(e,t,n){var r=mL(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[TL]){var i,a=x(n[TL]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new YO(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[SL]){var s,c=x(n[SL]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new YO(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var CL=A((function e(t,n,r,i){T(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function AL(e){if(!e)throw VO()}function PL(e,t){return function(n,r){var i=_L(e,r,t);return AL(null!==i),i}}function NL(e,t){return function(n,r){var i=_L(e,r,t);return AL(null!==i),function(e,t,n,r){var i=mL(t);if(null===i)return null;if(!$O(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return tL("/b/"+o(i)+"/o/"+o(a),n,r)+nL({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function RL(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new FO(OO.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new FO(OO.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new FO(OO.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new FO(OO.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function DL(e){var t=RL(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new FO(OO.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function OL(e,t,n){var r=tL(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CL(r,"GET",PL(e,n),i);return a.errorHandler=DL(t),a}function LL(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=tL(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new CL(o,"GET",function(e,t){return function(n,r){var i=IL(e,t,r);return AL(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=RL(t),s}function ML(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function FL(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=ML(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+EL(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=vL.getBlob(c,r,l);if(null===f)throw zO();var h={name:s.fullPath},d=tL(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new CL(d,"POST",PL(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=RL(t),v}var UL=A((function e(t,n,r,i){T(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function VL(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){AL(!1)}return AL(!!n&&-1!==(t||["active"]).indexOf(n)),n}var jL=262144;function BL(e,t,n,r,i,a,o,u){var s=new UL(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new FO(OO.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw zO();var v=t.maxUploadRetryTime,m=new CL(n,"POST",(function(e,n){var i,o=VL(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?PL(t,a)(e,n):null,new UL(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=RL(e),m}var zL={STATE_CHANGED:"state_changed"},qL={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GL(e){switch(e){case"running":case"pausing":case"canceling":return qL.RUNNING;case"paused":return qL.PAUSED;case"success":return qL.SUCCESS;case"canceled":return qL.CANCELED;default:return qL.ERROR}}var HL=A((function e(t,n,r){T(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function KL(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var WL=null,QL=function(){function e(){var t=this;T(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=QO.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=QO.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=QO.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return A(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw WO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw WO("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw WO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw WO("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw WO("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),YL=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(QL);function XL(){return WL?WL():new YL}var $L=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;T(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=wL(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(OO.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(rL(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=jO()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(OO.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return A(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=ML(t,r,i),u={name:o.fullPath},s=tL(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=EL(o,n),f=e.maxUploadRetryTime,h=new CL(s,"POST",(function(e){var t;VL(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){AL(!1)}return AL($O(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=RL(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,XL,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new CL(n,"POST",(function(e){var t=VL(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){AL(!1)}n||AL(!1);var i=Number(n);return AL(!isNaN(i)),new UL(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=RL(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,XL,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=jL*this._chunkMultiplier,n=new UL(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=BL(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,XL,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(jL*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=OL(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,XL,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=FL(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,XL,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=BO(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=GL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new HL(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(GL(this._state)){case qL.SUCCESS:KL(this._resolve.bind(null,this.snapshot))();break;case qL.CANCELED:case qL.ERROR:KL(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(GL(this._state)){case qL.RUNNING:case qL.PAUSED:e.next&&KL(e.next.bind(e,this.snapshot))();break;case qL.SUCCESS:e.complete&&KL(e.complete.bind(e))();break;default:e.error&&KL(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),JL=function(){function e(t,n){T(this,e),this._service=t,this._location=n instanceof YO?n:YO.makeFromUrl(n,t.host)}return A(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new YO(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return yL(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new YO(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw HO(e)}}]),e}();function ZL(e,t,n){return eM.apply(this,arguments)}function eM(){return(eM=lu(su().mark((function e(t,n,r){var i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,tM(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,f(u.prefixes)),(a=n.items).push.apply(a,f(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,ZL(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tM(e,t){null!=t&&"number"===typeof t.maxResults&&eL("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=LL(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,XL)}function nM(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=tL(t.fullServerUrl(),e.host,e._protocol),a=EL(n,r),o=e.maxOperationRetryTime,u=new CL(i,"PATCH",PL(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=DL(t),u}(e.storage,e._location,t,wL());return e.storage.makeRequestWithTokens(n,XL)}function rM(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=tL(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CL(r,"GET",NL(e,n),i);return a.errorHandler=DL(t),a}(e.storage,e._location,wL());return e.storage.makeRequestWithTokens(t,XL).then((function(e){if(null===e)throw new FO(OO.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function iM(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=tL(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new CL(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=DL(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,XL)}function aM(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new YO(e._location.bucket,n);return new JL(e.storage,r)}function oM(e,t){if(e instanceof cM){var n=e;if(null==n._bucket)throw new FO(OO.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MO+"' property when initializing the app?");var r=new JL(n,n._bucket);return null!=t?oM(r,t):r}return void 0!==t?aM(e,t):e}function uM(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof cM)return new JL(e,t);throw qO("To use ref(service, url), the first argument must be a Storage instance.")}return oM(e,t)}function sM(e,t){var n=null===t||void 0===t?void 0:t[MO];return null==n?null:YO.makeFromBucketSpec(n,e)}var cM=function(){function e(t,n,r,i,a){T(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=LO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?YO.makeFromBucketSpec(i,this._host):sM(this._host,this.app.options)}return A(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=YO.makeFromBucketSpec(this._url,e):this._bucket=sM(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){eL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){eL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=lu(su().mark((function e(){var t,n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=lu(su().mark((function e(){var t,n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new JL(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new XO(GO());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=nL(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new iL(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=lu(su().mark((function e(t,n){var r,i,a,o;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),lM="@firebase/storage",fM="0.11.2",hM="storage";function dM(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new $L(e,new vL(t),n)}(e=Hu(e),t,n)}function pM(e){return function(e){e._throwIfRoot("getMetadata");var t=OL(e.storage,e._location,wL());return e.storage.makeRequestWithTokens(t,XL)}(e=Hu(e))}function vM(e){return function(e){var t={prefixes:[],items:[]};return ZL(e,t).then((function(){return t}))}(e=Hu(e))}function mM(e,t){return uM(e=Hu(e),t)}function yM(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Tu(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function gM(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new cM(r,i,a,n,js)}Ds(new Ku(hM,gM,"PUBLIC").setMultipleInstances(!0)),Ks(lM,fM,""),Ks(lM,fM,"esm2017");var kM=function(){function e(t,n,r){T(this,e),this._delegate=t,this.task=n,this.ref=r}return A(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),bM=function(){function e(t,n){T(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return A(e,[{key:"snapshot",get:function(){return new kM(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new kM(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new kM(e,i,i._ref))}:{next:t.next?function(e){return t.next(new kM(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),wM=function(){function e(t,n){T(this,e),this._delegate=t,this._service=n}return A(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new xM(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new xM(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),xM=function(){function e(t,n){T(this,e),this._delegate=t,this.storage=n}return A(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return aM(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new bM(dM(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cL.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=fL(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new bM(new $L(this._delegate,new vL(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return vM(this._delegate).then((function(t){return new wM(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return tM(e=Hu(e),t)}(this._delegate,e||void 0).then((function(e){return new wM(e,t.storage)}))}},{key:"getMetadata",value:function(){return pM(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return nM(e=Hu(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return rM(Hu(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),iM(Hu(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw HO(e)}}]),e}(),_M=function(){function e(t,n){T(this,e),this.app=t,this._delegate=n}return A(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(EM(e))throw qO("ref() expected a child path but got a URL, use refFromURL instead.");return new xM(mM(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!EM(e))throw qO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{YO.makeFromUrl(e,this._delegate.host)}catch(t){throw qO("refFromUrl() expected a valid full URL but got an invalid one.")}return new xM(mM(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yM(this._delegate,e,t,n)}}]),e}();function EM(e){return/^[A-Za-z]+:\/\//.test(e)}var TM;function SM(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new _M(r,i)}function IM(){return gc.storage()}function CM(){return gc.firestore()}function AM(){return gc.auth()}function PM(){return AM().currentUser}function NM(){return RM.apply(this,arguments)}function RM(){return(RM=lu(su().mark((function e(){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,AM().signOut();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),cF(e.t0.code);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function DM(e,t){return OM.apply(this,arguments)}function OM(){return(OM=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qh(AM(),t,n);case 3:jM(e.sent.user.uid),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),cF(e.t0.code);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function LM(e,t){return MM.apply(this,arguments)}function MM(){return(MM=lu(su().mark((function e(t,n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hh(AM(),t,n);case 3:jM(e.sent.user.uid),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),cF(e.t0.code);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function FM(){return UM.apply(this,arguments)}function UM(){return(UM=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new gc.auth.GoogleAuthProvider,e.prev=1,e.next=4,AM().signInWithPopup(t);case 4:jM(e.sent.user.uid),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),cF(e.t0.code);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function VM(e){return CM().collection("Users").doc(e).collection("Memories")}function jM(e){var t=CM().collection("Users");t.doc(e).get().then((function(n){n.exists||t.doc(e).set({uid:e})})).catch((function(e){console.log(e)}))}function BM(e){return zM.apply(this,arguments)}function zM(){return zM=lu(su().mark((function e(t){var n,r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toLowerCase(),r=PM().uid,i='Memory with name "'.concat(t,'" already exists'),a=CM().collection("Users").doc(r).collection("Memories"),e.prev=4,e.next=7,a.doc(n).get();case 7:if(!e.sent.exists){e.next=10;break}throw i;case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(4),cF(e.t0);case 15:try{a.doc(t).set({Name:t})}catch(o){console.log(o)}case 16:case"end":return e.stop()}}),e,null,[[4,12]])}))),zM.apply(this,arguments)}function qM(e,t){return GM.apply(this,arguments)}function GM(){return GM=lu(su().mark((function e(t,n){var r,i;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=nF(t).doc(n),e.next=4,r.get();case 4:return i=e.sent,e.abrupt("return",i.data().Description);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),GM.apply(this,arguments)}function HM(e,t){try{return nF(e).doc(t).collection("Notes")}catch(n){throw cF(n)}}function KM(e,t,n){return WM.apply(this,arguments)}function WM(){return WM=lu(su().mark((function e(t,n,r){var i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=HM(t,n),e.prev=1,e.next=4,i.add({text:r});case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),cF(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),WM.apply(this,arguments)}function QM(e,t){return YM.apply(this,arguments)}function YM(){return YM=lu(su().mark((function e(t,n){var r,i,a,o,u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,XM(t,n);case 3:r=e.sent,i=[],a=r.items.length,o=0;case 7:if(!(o<a)){e.next=15;break}return e.next=10,JM(r.items[o]);case 10:u=e.sent,i.push(u);case 12:o++,e.next=7;break;case 15:return e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(0),cF(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),YM.apply(this,arguments)}function XM(e,t){return $M.apply(this,arguments)}function $M(){return $M=lu(su().mark((function e(t,n){var r,i,a;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PM(),i=IM().ref().child(r.uid),a=i.child("".concat(t,"/").concat(n)),e.abrupt("return",a.listAll());case 4:case"end":return e.stop()}}),e)}))),$M.apply(this,arguments)}function JM(e){return ZM.apply(this,arguments)}function ZM(){return(ZM=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getDownloadURL();case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),cF(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function eF(e,t,n,r){return tF.apply(this,arguments)}function tF(){return tF=lu(su().mark((function e(t,n,r,i){var a,o,u,s,c;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=PM(),o=IM().ref().child(a.uid),u=r.name.split(" ").join("_"),s=o.child("".concat(t,"/").concat(n,"/").concat(u)),e.prev=4,(c=s.put(r)).on("state_changed",(function(e){}),(function(e){throw cF(e)}),(function(){i()})),c.then((function(e){return"Success"})),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),cF(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])}))),tF.apply(this,arguments)}function nF(e){var t=PM();try{return VM(t.uid).doc(e).collection("Pages")}catch(n){throw cF(n)}}function rF(e,t){switch(e){case"memory":!function(e){iF.apply(this,arguments)}(t);break;case"page":aF(t);break;case"notecard":uF(t)}}function iF(){return iF=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nF(t.memory).get();case 2:return e.sent.forEach(function(){var e=lu(su().mark((function e(n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aF({memory:t.memory,page:n.id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,VM(PM().uid).doc(t.memory);case 6:return n=e.sent,e.next=9,n.delete();case 9:case"end":return e.stop()}}),e)}))),iF.apply(this,arguments)}function aF(e){return oF.apply(this,arguments)}function oF(){return oF=lu(su().mark((function e(t){var n;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HM(t.memory,t.page).get();case 2:return e.sent.forEach(function(){var e=lu(su().mark((function e(n){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uF({memory:t.memory,page:t.page,notecard:n.id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,XM(t.memory,t.page);case 6:return e.sent.items.forEach(function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=10,nF(t.memory).doc(t.page);case 10:return n=e.sent,e.next=13,n.delete();case 13:case"end":return e.stop()}}),e)}))),oF.apply(this,arguments)}function uF(e){return sF.apply(this,arguments)}function sF(){return(sF=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,HM(t.memory,t.page).doc(t.notecard);case 3:e.sent.delete();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cF(e){switch(e){case"auth/wrong-password":return"Email and Password Credentials don't match";case"auth/email-already-in-use":return"Email already exists, please sign in or create with different Email";case"auth/user-not-found":return"Email not recognised, please create account or try different Email";case"auth/popup-closed-by-user":return"Accidentally closed the pop up message, please sign in using the pop up!";case"auth/cancelled-popup-request":return"Error processing popup request due to too many calls. Please try again later.";default:return"Something went wrong: (".concat(e,")")}}function lF(){return lF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lF.apply(this,arguments)}!function(e){var t={TaskState:qL,TaskEvent:zL,StringFormat:cL,Storage:_M,Reference:xM};e.INTERNAL.registerComponent(new Ku("storage-compat",SM,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(gc),gc.apps.length||gc.initializeApp({apiKey:"AIzaSyDd5a5UZX0EC3q-0b3ErX2CySVeVN4wkCU",authDomain:"scrapbook-b08ae.firebaseapp.com",projectId:"scrapbook-b08ae",storageBucket:"scrapbook-b08ae.appspot.com",messagingSenderId:"888543369377",appId:"1:888543369377:web:8a7f9e1e79a041c23c38e0",measurementId:"G-LBKM2MW25B"}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(TM||(TM={}));var fF,hF="popstate";function dF(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function pF(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function vF(e,t){return{usr:e.state,key:e.key,idx:t}}function mF(e,t,n,r){return void 0===n&&(n=null),lF({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?gF(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function yF(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function gF(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function kF(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=TM.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=TM.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:yF(e);return dF(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(lF({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(hF,p),f=e,function(){o.removeEventListener(hF,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=TM.Push;var r=mF(m.location,e,t);n&&n(r,e);var i=vF(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=TM.Replace;var r=mF(m.location,e,t);n&&n(r,e);var i=vF(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(fF||(fF={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function bF(e,t,n){void 0===n&&(n="/");var r=OF(("string"===typeof t?gF(t):t).pathname||"/",n);if(null==r)return null;var i=wF(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=NF(i[o],DF(r));return a}function wF(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(dF(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=UF([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(dF(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),wF(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:PF(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=x(xF(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function xF(e){var t=e.split("/");if(0===t.length)return[];var n=kc(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=xF(i.join("/")),s=[];return s.push.apply(s,f(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,f(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var _F=/^:\w+$/,EF=3,TF=2,SF=1,IF=10,CF=-2,AF=function(e){return"*"===e};function PF(e,t){var n=e.split("/"),r=n.length;return n.some(AF)&&(r+=CF),t&&(r+=TF),n.filter((function(e){return!AF(e)})).reduce((function(e,t){return e+(_F.test(t)?EF:""===t?SF:IF)}),r)}function NF(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=RF({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:UF([i,l.pathname]),pathnameBase:VF(UF([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=UF([i,l.pathnameBase]))}return a}function RF(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);pF("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return pF(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:u,pathnameBase:s,pattern:e}}function DF(e){try{return decodeURI(e)}catch(t){return pF(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function OF(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function LF(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function MF(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function FF(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=gF(e):(dF(!(i=lF({},e)).pathname||!i.pathname.includes("?"),LF("?","pathname","search",i)),dF(!i.pathname||!i.pathname.includes("#"),LF("#","pathname","hash",i)),dF(!i.search||!i.search.includes("#"),LF("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?gF(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:jF(a),hash:BF(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var UF=function(e){return e.join("/").replace(/\/\/+/g,"/")},VF=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},jF=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},BF=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},zF=function(e){N(n,e);var t=L(n);function n(){return T(this,n),t.apply(this,arguments)}return A(n)}(du(Error));function qF(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var GF=["post","put","patch","delete"],HF=(new Set(GF),["get"].concat(GF));new Set(HF),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function KF(){return KF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KF.apply(this,arguments)}var WF=t.createContext(null);var QF=t.createContext(null);var YF=t.createContext(null);var XF=t.createContext(null);var $F=t.createContext(null);var JF=t.createContext({outlet:null,matches:[],isDataRoute:!1});var ZF=t.createContext(null);function eU(){return null!=t.useContext($F)}function tU(){return eU()||dF(!1),t.useContext($F).location}function nU(e){t.useContext(XF).static||t.useLayoutEffect(e)}function rU(){return t.useContext(JF).isDataRoute?function(){var e=hU(lU.UseNavigateStable).router,n=pU(fU.UseNavigateStable),r=t.useRef(!1);nU((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,KF({fromRouteId:n},i)))}),[e,n]);return i}():function(){eU()||dF(!1);var e=t.useContext(WF),n=t.useContext(XF),r=n.basename,i=n.navigator,a=t.useContext(JF).matches,o=tU().pathname,u=JSON.stringify(MF(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);return nU((function(){s.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=FF(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:UF([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e])}()}function iU(e,n,r){eU()||dF(!1);var i,a=t.useContext(XF).navigator,o=t.useContext(JF).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,tU());if(n){var f,h="string"===typeof n?gF(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||dF(!1),i=h}else i=l;var d=i.pathname||"/",p=bF(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=cU(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:UF([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:UF([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement($F.Provider,{value:{location:KF({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:TM.Pop}},v):v}function aU(){var e=function(){var e,n=t.useContext(ZF),r=dU(fU.UseRouteError),i=pU(fU.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=qF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var oU=t.createElement(aU,null),uU=function(e){N(r,e);var n=L(r);function r(e){var t;return T(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return A(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(JF.Provider,{value:this.props.routeContext},t.createElement(ZF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function sU(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(WF);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(JF.Provider,{value:n},i)}function cU(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||dF(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||oU);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(sU,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(uU,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var lU=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(lU||{}),fU=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fU||{});function hU(e){var n=t.useContext(WF);return n||dF(!1),n}function dU(e){var n=t.useContext(QF);return n||dF(!1),n}function pU(e){var n=function(e){var n=t.useContext(JF);return n||dF(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||dF(!1),r.route.id}r.startTransition;function vU(e){dF(!1)}function mU(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?TM.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;eU()&&dF(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=gF(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,E=void 0===_?"default":_,T=t.useMemo((function(){var e=OF(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:x,key:E},navigationType:s}}),[h,m,g,b,x,E,s]);return null==T?null:t.createElement(XF.Provider,{value:d},t.createElement($F.Provider,{children:a,value:T}))}function yU(e){var t=e.children,n=e.location;return iU(bU(t),n)}var gU=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(gU||{}),kU=new Promise((function(){}));t.Component;function bU(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(f(n),[i]);if(e.type!==t.Fragment){e.type!==vU&&dF(!1),e.props.index&&e.props.children&&dF(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=bU(e.props.children,a)),r.push(o)}else r.push.apply(r,bU(e.props.children,a))}})),r}var wU=n(184);var xU=function(e){var t=e.form,n=e.setErrorMessage,r=rU(),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),r("/")},a=function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,FM();case 4:i(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("error: ".concat(e.t0)),n("".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"container-login",children:[(0,wU.jsx)("h2",{className:"title",children:"Scrapbook"}),(0,wU.jsx)("div",{className:"login_box",children:t}),(0,wU.jsxs)("div",{className:"other_providers",children:[(0,wU.jsx)("h3",{children:"Or"}),(0,wU.jsxs)("button",{className:"google",onClick:a,children:[(0,wU.jsx)("span",{className:"logo",children:(0,wU.jsx)("img",{src:fu,alt:"Google Logo"})}),(0,wU.jsx)("p",{children:"Sign in with Google"})]})]})]})})};var _U=function(e){var t=e.creating,n=e.callback,r=(0,wU.jsxs)(wU.Fragment,{children:[(0,wU.jsx)("h1",{children:"Sign back in to start creating more memories!"}),(0,wU.jsx)("h1",{children:"Don't have an account?"}),(0,wU.jsx)("button",{onClick:n,children:"Create One"}),(0,wU.jsx)("h1",{children:"to start making memories!"})]}),i=(0,wU.jsxs)(wU.Fragment,{children:[(0,wU.jsx)("h1",{children:"Create an account to start creating memories"}),(0,wU.jsx)("h1",{children:"Alread have an account?"}),(0,wU.jsx)("button",{onClick:n,children:"Sign in"}),(0,wU.jsx)("h1",{children:"to add to your memories!"})]});return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"container-welcome",children:[(0,wU.jsx)("h1",{children:"Welcome back!"}),(0,wU.jsx)("div",{className:"create-container",children:t?i:r})]})})};var EU=function(e){var n=e.setErrorMessage,r=c((0,t.useState)(""),2),i=r[0],a=r[1],o=c((0,t.useState)(""),2),u=o[0],s=o[1];(0,t.useEffect)((function(){a(i)}),[i]),(0,t.useEffect)((function(){s(u)}),[u]);var l=rU(),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),l("/")},h=function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(i.length<8)){e.next=4;break}return n("Password is not valid"),e.abrupt("return");case 4:return e.prev=4,e.next=7,LM(u,i);case 7:f(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n("".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("form",{className:"login-form",onSubmit:h,children:[(0,wU.jsx)("input",{type:"email",placeholder:"Email",value:u,onChange:function(e){s(e.target.value)}}),(0,wU.jsx)("input",{type:"password",placeholder:"Password",value:i,onChange:function(e){a(e.target.value)}}),(0,wU.jsx)("button",{type:"submit",children:"Sign In"})]})})};var TU=n.p+"static/media/cross.a076358861dcb30d6eba930d7f5305f6.svg";var SU=n.p+"static/media/check-mark.8abcaa544382a780833b3f84ba00a915.svg";var IU=function(e){var t=e.passwordState,n=e.isDisabled;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)(uu.div,{transition:{type:"spring",stiffness:250,damping:50,duration:.2},initial:{scale:0},animate:{scale:1},className:"validation-container",disabled:n,children:(0,wU.jsxs)("ul",{className:"requirements",children:[(0,wU.jsxs)("li",{className:"requirement",children:[(0,wU.jsx)("span",{children:(0,wU.jsx)("img",{src:t.length?SU:TU,alt:t.length?"current validation: wrong":"current validation: correct"})}),(0,wU.jsx)("p",{children:"Longer than 8 characters"})]}),(0,wU.jsxs)("li",{className:"requirement",children:[(0,wU.jsx)("span",{children:(0,wU.jsx)("img",{src:t.upperCase?SU:TU,alt:t.upperCase?"current validation: wrong":"current validation: correct"})}),(0,wU.jsx)("p",{children:"Contains one uppercase letter"})]}),(0,wU.jsxs)("li",{className:"requirement",children:[(0,wU.jsx)("span",{children:(0,wU.jsx)("img",{src:t.lowerCase?SU:TU,alt:t.lowerCase?"current validation: wrong":"current validation: correct"})}),(0,wU.jsx)("p",{children:"Contains one lowercase letter"})]})]})})})};function CU(e,t){var n;switch(t.type){case"updateLength":n=W(W({},e),{},{length:t.value});break;case"updateLowerCase":n=W(W({},e),{},{lowerCase:t.value});break;case"updateUpperCase":n=W(W({},e),{},{upperCase:t.value});break;default:throw new Error("No case found for "+t.type)}return n}function AU(e,t,n){var r=[];return e||r.push((0,wU.jsxs)(wU.Fragment,{children:["Password is invalid!",(0,wU.jsx)("br",{})]})),t||r.push((0,wU.jsxs)(wU.Fragment,{children:["Passwords are not matching! ",(0,wU.jsx)("br",{})]})),n||r.push((0,wU.jsxs)(wU.Fragment,{children:["Email is not valid!",(0,wU.jsx)("br",{})]})),r}var PU=function(e){var n=e.setErrorMessage,r=c((0,t.useState)(!1),2),i=r[0],a=r[1],o=c((0,t.useState)(""),2),u=o[0],s=o[1],l=c((0,t.useState)(!1),2),f=l[0],h=l[1],d=c((0,t.useState)(""),2),p=d[0],v=d[1],m=c((0,t.useState)(!1),2),y=m[0],g=m[1],k=c((0,t.useState)(""),2),b=k[0],w=k[1],x=c((0,t.useState)(!1),2),_=x[0],E=x[1],T=c((0,t.useReducer)(CU,{length:!1,lowerCase:!1,upperCase:!1}),2),S=T[0],I=T[1],C=rU();(0,t.useEffect)((function(){h(function(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}(u))}),[u]),(0,t.useEffect)((function(){I({type:"updateLength",value:p.length>8}),I({type:"updateLowerCase",value:/^(?=.*[a-z])/.test(p)}),I({type:"updateUpperCase",value:/^(?=.*[A-Z])/.test(p)}),E(p===b)}),[p,b]),(0,t.useEffect)((function(){g(S.length&&S.lowerCase&&S.upperCase)}),[S]);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),C("/")},P=function(){var e=lu(su().mark((function e(t){var r;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(y&&_&&f)){e.next=15;break}return console.log("Creating account"),e.prev=3,e.next=6,DM(u,p);case 6:A(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),n("".concat(e.t0)),console.log("setting error message to ".concat(e.t0));case 13:e.next=17;break;case 15:r=AU(y,_,f),n(r);case 17:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("form",{className:"login-form",onSubmit:P,children:[(0,wU.jsx)("input",{type:"email",placeholder:"Email",value:u,onChange:function(e){s(e.target.value)}}),i&&(0,wU.jsx)(IU,{passwordState:S}),(0,wU.jsx)("input",{"data-valid":y,type:"password",placeholder:"Password",value:p,onChange:function(e){v(e.target.value)},onFocus:function(){a(!0)},onBlur:function(){a(!1)}}),(0,wU.jsx)("input",{"data-matching":_,type:"password",placeholder:"Confirm Password",value:b,onChange:function(e){w(e.target.value)}}),(0,wU.jsx)("button",{type:"submit",children:"Sign In"})]})})};var NU=function(e){var n=e.children,r=e.callback,i=(0,t.useRef)(null);return(0,t.useEffect)((function(){i.current.scrollIntoView({behavior:"smooth",block:"center"})}),[]),(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"parent",children:[(0,wU.jsx)("div",{className:"back-drop","data-testid":"backdrop",onClick:r}),(0,wU.jsx)("div",{className:"children",ref:i,children:n})]})})};var RU=function(e){var t=e.message,n=e.setMessage,r=function(e){e.stopPropagation(),n(null)};return(0,wU.jsxs)(uu.div,{className:"placeholder",variants:{hidden:{y:"-100vh",opacity:0},visible:{y:"0",opacity:1,transition:{duration:.1,type:"spring",damping:25,stiffness:500}},exit:{y:"100vh",opacity:0}},initial:"hidden",animate:"visible",exit:"exit",children:[(0,wU.jsxs)("div",{className:"error-container",children:[(0,wU.jsx)("button",{onClick:r,children:(0,wU.jsx)("img",{src:TU,alt:"close message"})}),(0,wU.jsx)("p",{"data-testid":"message",className:"message",children:t})]}),(0,wU.jsx)(NU,{callback:r})]})};var DU=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=c((0,t.useState)(),2),a=i[0],o=i[1],u=function(e){o(e)};return(0,wU.jsxs)(wU.Fragment,{children:[(0,wU.jsx)(G,{children:a&&(0,wU.jsx)(RU,{message:a,setMessage:u})}),(0,wU.jsxs)("div",{className:"container-login-page","data-creating":n,children:[(0,wU.jsx)(uu.div,{layout:!0,transition:{type:"spring",stiffness:700,damping:30},children:(0,wU.jsx)(xU,{form:n?(0,wU.jsx)(PU,{setErrorMessage:u}):(0,wU.jsx)(EU,{setErrorMessage:u}),setErrorMessage:u})}),(0,wU.jsx)(uu.div,{layout:!0,transition:{type:"spring",stiffness:300,damping:30},children:(0,wU.jsx)(_U,{creating:n,callback:function(){r(!n)}})})]})]})};var OU=function(){return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:"home-welcome-container",children:(0,wU.jsx)("h1",{children:"Welcome to scrapbooks"})})})};var LU=function(){return LU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},LU.apply(this,arguments)},MU=function(e){return{loading:void 0===e||null===e,value:e}},FU=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return LU(LU({},e),{error:t.error,loading:!1,value:void 0});case"reset":return MU(t.defaultValue);case"value":return LU(LU({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),MU(n)),i=r[0],a=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),u=(0,t.useCallback)((function(e){a({type:"error",error:e})}),[]),s=(0,t.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},UU=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},VU=function(e,t){var n=!e&&!t,r=!!e&&!!t&&ER(e,t);return n||r},jU=function(e,t){return UU(e,VU,t)},BU=function(e,n){var r=function(e,n){var r=FU(),i=r.error,a=r.loading,o=r.reset,u=r.setError,s=r.setValue,c=r.value,l=jU(e,o);return(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?JD(l.current,n.snapshotListenOptions,s,u):JD(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]),[c,a,i]}(e,n),i=r[0],a=r[1],o=r[2];return[zU(i,null===n||void 0===n?void 0:n.snapshotOptions,null===n||void 0===n?void 0:n.initialValue),a,o,i]},zU=function(e,n,r){return(0,t.useMemo)((function(){var t;return null!==(t=null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)})))&&void 0!==t?t:r}),[e,n])};var qU=function(e){var t=e.title,n=rU();return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("button",{"data-testid":"memory-card",onClick:function(e){e.preventDefault(),n("/memory/".concat(t))},className:"card-container",children:(0,wU.jsx)("h1",{"data-testid":"memory-title",className:"title",children:t})})})};var GU=function(){return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("h1",{"data-testid":"loading",children:"Loading"})})};var HU=n.p+"static/media/arrow-button.1214d3dbdaba829b3f15b6b4abb10dca.svg";var KU=function(e){var t=e.orientation,n=e.handleClick;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("img",{"data-testid":"navigation-button",onClick:n,className:1===t?"right navigation":"navigation",src:HU,alt:1===t?"Go to next page":"Go to previous page"})})};var WU=function(e){var t=e.active;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:t?"active carousel-item":"disabled carousel-item"})})};var QU=function(e){for(var t=e.numberOfPages,n=e.pageNumber,r=new Array(t),i=0;i<t;i++)r[i]=i;var a=r.map((function(e){return(0,wU.jsx)(WU,{active:e===n},e)}));return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:"carousel",children:a})})};var YU=function(e){var n=e.close,r=e.setMessage,i=c((0,t.useState)(""),2),a=i[0],o=i[1];(0,t.useEffect)((function(){o(a)}),[a]);var u=function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.length<3||a.length>75)){e.next=5;break}r("Name must be greater than 3 characters and less than 75!"),e.next=14;break;case 5:return e.prev=5,e.next=8,BM(a);case 8:n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),r("".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"add-memory-container",children:[(0,wU.jsx)("h1",{children:"New Memory"}),(0,wU.jsxs)("form",{onSubmit:u,className:"add-memory",children:[(0,wU.jsx)("input",{type:"text",placeholder:"Name",onChange:function(e){o(e.target.value)}}),(0,wU.jsxs)("div",{className:"form-buttons",children:[(0,wU.jsx)("button",{type:"submit",className:"create",children:"Create"}),(0,wU.jsx)("button",{onClick:n,className:"cancel",children:"Cancel"})]})]})]})})};var XU=function(e){var n=e.close,r=c((0,t.useState)(),2),i=r[0],a=r[1];return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)(NU,{callback:n,children:[(0,wU.jsx)(G,{children:i&&(0,wU.jsx)(RU,{message:i,setMessage:a})}),(0,wU.jsx)(YU,{close:n,setMessage:a})]})})};var $U=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,wU.jsxs)(wU.Fragment,{children:[n&&(0,wU.jsx)(XU,{close:function(){r(!1)}}),(0,wU.jsx)("button",{onClick:function(){r(!0)},className:"add-memory-button",children:(0,wU.jsx)("h1",{children:"Add New Memories"})})]})};var JU={enter:function(e){return{x:e>0?1e3:-1e3,opacity:0}},center:{zIndex:1,x:0,opacity:1},exit:function(e){return{x:e<0?1e3:-1e3,opacity:0}}},ZU=function(e){var n=e.uid,r=e.page,i=c(BU(VM(n),{idField:"id"}),2),a=i[0],o=i[1],u=c((0,t.useState)(r),2),s=u[0],l=u[1],f=c((0,t.useState)(),2),h=f[0],d=f[1],p=c((0,t.useState)(1),2),v=p[0],m=p[1],y=c((0,t.useState)({x:window.innerWidth,y:window.innerHeight}),2),g=y[0],k=y[1],b=c((0,t.useState)(0),2),w=b[0],x=b[1];if((0,t.useEffect)((function(){a&&d(function(e,t,n){if(e.length<1)return null;var r=t*n,i=r+n,a=e.slice(r,i);return a}(a,s,v))}),[s,a,v]),(0,t.useEffect)((function(){var e=function(){k({x:window.innerWidth,y:window.innerHeight})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}})),(0,t.useEffect)((function(){var e=g.x>875&&g.x>885?4:1;a&&Math.ceil(a.length/e)<s&&l(0),m(e)}),[g,a,s]),o)return(0,wU.jsx)(GU,{});var _=Math.ceil(a.length/v),E=function(e){e.preventDefault(),s+1<_&&(l(s+1),x(1))},T=function(e){e.preventDefault(),s-1>=0&&(l(s-1),x(-1))};return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"memory-component",children:[(0,wU.jsxs)("div",{className:"memories-container",children:[(0,wU.jsx)(KU,{orientation:0,handleClick:T}),(0,wU.jsx)(G,{children:(0,wU.jsx)(uu.div,{className:"memory-list",variants:JU,custom:w,initial:"enter",exit:"exit",animate:"center",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:function(e,t){var n=t.offset,r=t.velocity,i=function(e,t){return Math.abs(e)*t}(n.x,r.x);i<-1e4?E(e):i>1e4&&T(e)},children:null!=h?h.map((function(e){return(0,wU.jsx)(qU,{title:e.Name},e.Name)})):(0,wU.jsx)("h1",{className:"no-memories",children:"No memories, click below to add"})})}),(0,wU.jsx)(KU,{orientation:1,handleClick:E})]}),(0,wU.jsxs)("div",{className:"other-items",children:[(0,wU.jsx)(QU,{pageNumber:s,numberOfPages:_}),(0,wU.jsx)($U,{})]})]})})};var eV=n.p+"static/media/avi-icon.64cd939c36b8a6f4a959ec1112b1fd02.svg";var tV=function(e){var t=e.message,n=e.confirmCallback,r=e.closeCallback;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)(NU,{callback:r,children:(0,wU.jsxs)("div",{className:"confirm-container",children:[(0,wU.jsxs)("h1",{"data-testid":"confirm-message",children:["Confirm ",t]}),(0,wU.jsxs)("div",{className:"buttons",children:[(0,wU.jsx)("button",{onClick:r,children:(0,wU.jsx)("img",{src:TU,alt:"Cancel"})}),(0,wU.jsx)("button",{onClick:n,children:(0,wU.jsx)("img",{src:SU,alt:"Confirm"})})]})]})})})};var nV=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=c((0,t.useState)(!1),2),a=i[0],o=i[1];return(0,wU.jsxs)(wU.Fragment,{children:[a&&(0,wU.jsx)(tV,{message:"Sign out",confirmCallback:NM,closeCallback:function(){o(!1)}}),(0,wU.jsx)(uu.button,{whileHover:{scale:1.25},whileTap:{scale:.9},onHoverStart:function(){return r(!0)},onHoverEnd:function(){return r(!1)},transition:{ease:"linear",stiffness:400,damping:10},id:"sign-out",onClick:function(){o(!0)},children:n?(0,wU.jsx)("h1",{className:"sign-out",children:"Sign out"}):(0,wU.jsx)("img",{src:eV,alt:"sign out button"})})]})};var rV=function(){var e=PM();return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"home-container",children:[(0,wU.jsx)(nV,{}),(0,wU.jsxs)("div",{className:"main-components",children:[(0,wU.jsx)(OU,{}),(0,wU.jsx)(ZU,{uid:e.uid,page:0})]}),(0,wU.jsx)("div",{className:"triangle-container"})]})})};var iV=function(e){var t=e.url,n=e.className;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:"single-image-container ".concat(n),children:(0,wU.jsx)("img",{className:"firebase-image",src:t,alt:t})})})};var aV=function(e){var n=e.images,r=(0,t.useRef)(null);return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{onWheel:function(e){var t=r.current,n=5*e.deltaY;t.scrollTo({top:0,left:t.scrollLeft+n,behavior:"smooth"})},ref:r,className:"image-carousel","data-testid":"image-coursel",children:n.map((function(e,t){return(0,wU.jsx)(iV,{url:e},t)}))})})};var oV=n.p+"static/media/upload.ade2542d75a2b6b296103eaf70dfc348.svg";function uV(e){var t=e.name.split(".").pop();return/(jpg|jpeg|png)/i.test(t)}var sV=function(e){var n=e.memory,r=e.page,i=e.load,a=e.setMessage,o=e.clear,u=c((0,t.useState)(),2),s=u[0],l=u[1];(0,t.useEffect)((function(){l(s)}),[s]);var f=function(){var e=lu(su().mark((function e(t){var u;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=14;break}u=0;case 2:if(!(u<s.length)){e.next=13;break}if(!uV(s[u])){e.next=9;break}return e.next=7,eF(n,r,s[u],i);case 7:e.next=10;break;case 9:a("Error: Only the following file formats are accepted: {.jpg : .png : .jpeg }");case 10:u++,e.next=2;break;case 13:o();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"upload-container",children:[(0,wU.jsx)("input",{className:"upload-input",type:"file",accept:"image/*",multiple:!0,onChange:function(e){e.preventDefault(),e.target.files&&e.target.files[0]&&l(e.target.files)}}),(0,wU.jsx)("button",{className:"upload-btn",onClick:f,children:(0,wU.jsx)("img",{src:oV,alt:"Upload"})})]})})};var cV=function(e){var n=e.memory,r=e.page,i=c((0,t.useState)([]),2),a=i[0],o=i[1],u=c((0,t.useState)(!1),2),s=u[0],l=u[1],f=c((0,t.useState)(!1),2),h=f[0],d=f[1],p=c((0,t.useState)([]),2),v=p[0],m=p[1],y=c((0,t.useState)(),2),g=y[0],k=y[1],b=function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,QM(n,r);case 3:t=e.sent,o(t),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=(0,t.useCallback)(b,[n,r]);(0,t.useEffect)((function(){w()}),[w]),(0,t.useEffect)((function(){for(var e=[],t=0;t<3&&t<a.length;t++){var n=(0,wU.jsx)(iV,{className:"favourite-".concat(t),url:a[t]},t);e.push(n)}m(e)}),[a]);var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),d(!1)};return(0,wU.jsxs)(wU.Fragment,{children:[s?(0,wU.jsx)(GU,{}):(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:"image-placeholder-container",children:(0,wU.jsxs)("div",{className:"image-container",children:[a.length>0?v.map((function(e){return e})):(0,wU.jsx)("h1",{children:"No Images click view all to add some"}),(0,wU.jsx)("button",{className:"view-all-btn",onClick:function(e){e.preventDefault(),d(!0)},children:"View all"})]})})}),h&&(0,wU.jsxs)(NU,{callback:x,children:[(0,wU.jsx)(aV,{images:a}),(0,wU.jsx)(sV,{setMessage:k,memory:n,page:r,load:b,clear:x})]}),g&&(0,wU.jsx)(G,{children:(0,wU.jsx)(RU,{message:g,setMessage:k})})]})};var lV=function(e){var t=e.desc;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:"description-container",children:(0,wU.jsx)("p",{"data-testid":"description",className:"desc",children:""!==t&&t?t:"Error: no description found"})})})};var fV=function(e){var t=e.text;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:t%2===0?"notecard-container purple":"notecard-container pink",children:(0,wU.jsx)("p",{"data-testid":"notecard-text",className:"text",children:t})})})};var hV=function(e){var t=e.notecards;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("div",{className:"notecard-list",children:t.map((function(e,t){return(0,wU.jsx)(fV,{text:e.text},t)}))})})};var dV=function(e){var n=e.memory,r=e.page,i=e.exit,a=c((0,t.useState)(""),2),o=a[0],u=a[1],s=c((0,t.useState)(null),2),l=s[0],f=s[1];(0,t.useEffect)((function(){u(o)}),[o]);var h=function(){var e=lu(su().mark((function e(t){return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(o.length<1)){e.next=5;break}f("Text cannot be empty"),e.next=14;break;case 5:return e.prev=5,e.next=8,KM(n,r,o);case 8:i(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),f(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,wU.jsxs)(wU.Fragment,{children:[l&&(0,wU.jsx)(RU,{message:l,setMessage:function(){f(null)}}),(0,wU.jsxs)("form",{className:"add-form",onSubmit:h,children:[(0,wU.jsx)("input",{type:"text",placeholder:"Note",value:o,onChange:function(e){return u(e.target.value)}}),(0,wU.jsx)("button",{children:"Add Notecard"})]})]})};var pV={enter:function(e){return{x:e>0?1e3:-1e3,opacity:0}},center:{zIndex:1,x:0,opacity:1},exit:function(e){return{zIndex:0,x:e<0?1e3:-1e3,opacity:0}}},vV=function(e){var n=e.memory,r=e.page,i=c(BU(HM(n,r)),2),a=i[0],o=i[1],u=c((0,t.useState)(),2),s=u[0],l=u[1],f=c((0,t.useState)(1),2),h=f[0],d=f[1],p=c((0,t.useState)({x:window.innerWidth,y:window.innerHeight}),2),v=p[0],m=p[1],y=c((0,t.useState)(0),2),g=y[0],k=y[1],b=c((0,t.useState)(0),2),w=b[0],x=b[1],_=c((0,t.useState)(0),2),E=_[0],T=_[1],S=c((0,t.useState)(!1),2),I=S[0],C=S[1];(0,t.useEffect)((function(){a&&l(function(e,t){var n=0,r=e.length,i=[];for(;n<r;){var a=e.slice(n,n+t);i.push((0,wU.jsx)(hV,{notecards:a})),n+=t}return i}(a,h))}),[a,h]),(0,t.useEffect)((function(){s&&k(s.length)}),[s]),(0,t.useEffect)((function(){var e=function(){m({x:window.innerWidth,y:window.innerHeight})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}})),(0,t.useEffect)((function(){var e=v.x>725&&v.x>735?3:1;a&&Math.ceil(a.length/e)<w&&x(0),d(e)}),[v,a,w]);for(var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),C(!1)};o;)return(0,wU.jsx)(GU,{});return(0,wU.jsxs)("div",{className:"notecard-component",children:[(0,wU.jsx)("div",{className:"notecard-list-container",children:s&&s.length>0?(0,wU.jsx)(uu.div,{custom:E,variants:pV,initial:"enter",exit:"exit",animate:"center",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:function(e,t){var n=t.offset,r=t.velocity,i=function(e,t){return Math.abs(e)*t}(n.x,r.x);i<-1e3?w<g-1?(x(w+1),T(1)):(x(0),T(1)):i>1e3&&(w>0?(x(w-1),T(-1)):(x(g-1),T(-1)))},"data-testid":"notecard-section",children:s[w]},w):(0,wU.jsx)("h2",{className:"empty-notecard",children:"No notecards on this page, add one by clicking below!"})}),(0,wU.jsx)(QU,{numberOfPages:g,pageNumber:w}),(0,wU.jsx)("button",{className:"add-btn",onClick:function(e){return C(!0)},children:"Add Notecard"}),I&&(0,wU.jsx)(NU,{callback:A,children:(0,wU.jsx)(dV,{memory:n,page:r,exit:A})})]})};var mV=function(e){var n=e.memory,r=e.page,i=c((0,t.useState)(),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){var e=function(){var e=lu(su().mark((function e(){var t;return su().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qM(n,r);case 2:t=e.sent,o(null==t?"":t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n,r]),(0,wU.jsx)(wU.Fragment,{children:null==a?(0,wU.jsx)(GU,{}):(0,wU.jsx)("div",{className:"note-desc-placeholder-container",children:(0,wU.jsxs)("div",{"data-testid":"note-description-div",className:"note-desc-comp",children:[(0,wU.jsx)(vV,{memory:n,page:r}),(0,wU.jsx)(lV,{desc:a})]})})})};var yV=function(e){var t=e.memory,n=e.page;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsxs)("div",{className:"page-container",children:[(0,wU.jsx)(cV,{memory:t,page:n},n),(0,wU.jsx)(mV,{memory:t,page:n})]})})};var gV=function(e){var n=e.memory,r=e.close,i=c((0,t.useState)(""),2),a=i[0],o=i[1],u=c((0,t.useState)(""),2),s=u[0],l=u[1],f=c((0,t.useState)(),2),h=f[0],d=f[1];return(0,t.useEffect)((function(){o(a)}),[a]),(0,t.useEffect)((function(){l(s)}),[s]),(0,wU.jsxs)(wU.Fragment,{children:[h&&(0,wU.jsx)(RU,{message:h,setMessage:d}),(0,wU.jsxs)("form",{className:"add-page",onSubmit:function(e){if(e.preventDefault(),a.length<1)d("Name cannot be empty");else if(s.length<5)d("Description must be at least 5 characters long");else try{!function(e,t,n){var r=nF(e);try{r.doc(t).set({name:t,Description:n})}catch(i){throw cF(i)}}(n,a,s),r()}catch(t){d(t)}},children:[(0,wU.jsx)("input",{type:"text",name:"page-name",id:"page-name",placeholder:"Page Name",value:a,onChange:function(e){return o(e.target.value)}}),(0,wU.jsx)("textarea",{name:"page-description",id:"page-description",cols:"30",rows:"5",placeholder:"Page Description",value:s,onChange:function(e){return l(e.target.value)}}),(0,wU.jsx)("button",{className:"add-page-btn",type:"submit",children:"Add Page"})]})]})};var kV=function(){var e=rU();return(0,wU.jsx)("button",{className:"go-home",onClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.preventDefault(),e("/")},children:"Go Home"})};var bV=n.p+"static/media/trash.168c3a3e36b9d4358d399d45edf4bb7b.svg";var wV=function(e){var n=e.type,r=e.options,i=c((0,t.useState)(!1),2),a=i[0],o=i[1];return(0,wU.jsxs)(wU.Fragment,{children:[a&&(0,wU.jsx)("div",{className:"confirm-message-placeholder",children:(0,wU.jsx)(G,{children:(0,wU.jsx)(tV,{message:"Delete ".concat(n,"?"),confirmCallback:function(){rF(n,r),o(!1)},closeCallback:function(){return o(!1)}})})}),(0,wU.jsx)("button",{onClick:function(){o(!0)},className:"delete-icon",children:(0,wU.jsx)("img",{src:bV,alt:"delete content"})})]})};var xV=function(e){var n=e.memory,r=e.pages,i=e.goToPage,a=c((0,t.useState)(!1),2),o=a[0],u=a[1],s=c((0,t.useState)(!1),2),l=s[0],f=s[1],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),u(!1)};return(0,wU.jsxs)(wU.Fragment,{children:[o&&(0,wU.jsx)(NU,{callback:h,children:(0,wU.jsx)(gV,{memory:n,close:h})}),l&&(0,wU.jsx)(tV,{message:"Sign out",confirmCallback:NM,closeCallback:function(){f(!1)}}),(0,wU.jsxs)("div",{className:"table-of-contents",children:[(0,wU.jsx)("h1",{children:n}),(0,wU.jsx)("ul",{children:r.map((function(e,t){return(0,wU.jsxs)("li",{className:"pages-list",children:[(0,wU.jsx)("button",{onClick:function(e){e.preventDefault(),i(t)},className:"page-toc",children:e.name}),(0,wU.jsx)(wV,{type:"page",options:{memory:n,page:e.name}})]},t)}))}),(0,wU.jsx)("button",{onClick:function(e){e.preventDefault(),u(!0)},className:"toggle-add",children:"Add new page"}),(0,wU.jsxs)("div",{className:"navigation-buttons",children:[(0,wU.jsx)(kV,{}),(0,wU.jsx)("button",{onClick:function(){f(!0)},className:"sign-out",children:"Sign out"})]})]})]})};var _V=n.p+"static/media/menu.56b7da2022c227cef835c456cab3d4a4.svg";var EV=function(e){var t=e.clicked;return(0,wU.jsx)(wU.Fragment,{children:(0,wU.jsx)("button",{className:"table-of-content-btn",onClick:t,children:(0,wU.jsx)("img",{src:_V,alt:"table of contents"})})})};var TV=function(e){var t=e.title;return(0,wU.jsx)("div",{className:"page-title",children:(0,wU.jsx)("h1",{children:t})})};var SV=function(e){var t=e.memory;return(0,wU.jsxs)("div",{className:"no-page",children:[(0,wU.jsx)("h1",{className:"title",children:"No pages in this memory yet, click below to add one"}),(0,wU.jsx)(gV,{memory:t,close:function(){}}),(0,wU.jsx)("br",{}),(0,wU.jsx)("h1",{className:"title",children:"Or"}),(0,wU.jsx)("br",{}),(0,wU.jsx)(kV,{})]})};var IV=function(){var e=function(){var e=t.useContext(JF).matches,n=e[e.length-1];return n?n.params:{}}().memory,n=c(BU(nF(e)),2),r=n[0],i=n[1],a=c((0,t.useState)(0),2),o=a[0],u=a[1],s=c((0,t.useState)(0),2),l=s[0],f=s[1],h=c((0,t.useState)(!1),2),d=h[0],p=h[1];for((0,t.useEffect)((function(){r&&f(r.length)}),[r]),(0,t.useEffect)((function(){o<0&&u(l-1),o>=l&&u(0)}),[o,l]);i;)return(0,wU.jsx)(GU,{});return(0,wU.jsx)("div",{className:"memory-container",children:r.length>0?(0,wU.jsxs)(wU.Fragment,{children:[(0,wU.jsxs)("section",{className:"header",children:[d&&(0,wU.jsx)(NU,{callback:function(e){e.preventDefault(),p(!1)},children:(0,wU.jsx)(xV,{memory:e,pages:r,goToPage:function(e){u(e),p(!1)}})}),(0,wU.jsx)("div",{className:"child1",children:(0,wU.jsx)(EV,{clicked:function(e){e.preventDefault(),p(!0)}})}),(0,wU.jsx)("div",{className:"child2",children:(0,wU.jsx)(TV,{title:r[o].name})})]}),(0,wU.jsx)(yV,{memory:e,page:r[o].name}),(0,wU.jsxs)("section",{className:"carousel",children:[(0,wU.jsx)(KU,{orientation:0,handleClick:function(e){e.preventDefault(),o-1>=0&&u(o-1)}}),(0,wU.jsx)(QU,{numberOfPages:l,pageNumber:o}),(0,wU.jsx)(KU,{orientation:1,handleClick:function(e){e.preventDefault(),o+1<l&&u(o+1)}})]})]}):(0,wU.jsx)(SV,{memory:e})})};function CV(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function AV(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var PV=function(){return PV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},PV.apply(this,arguments)},NV=function(e){return{loading:void 0===e||null===e,value:e}},RV=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return PV(PV({},e),{error:t.error,loading:!1,value:void 0});case"reset":return NV(t.defaultValue);case"value":return PV(PV({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),NV(n)),i=r[0],a=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),u=(0,t.useCallback)((function(e){a({type:"error",error:e})}),[]),s=(0,t.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},DV=function(e,n){var r=RV((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;return(0,t.useEffect)((function(){var t=function(e,t,n,r){return Hu(e).onAuthStateChanged(t,n,r)}(e,(function(e){return CV(void 0,void 0,void 0,(function(){var t;return AV(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]),[s,a,i]};var OV=function(e){var t=e.component,n=c(DV(AM()),1)[0],r=rU();if(n)return t;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault(),r("/login")}()};var LV=function(){return(0,wU.jsxs)(yU,{children:[(0,wU.jsx)(vU,{path:"/login",element:(0,wU.jsx)(DU,{})}),(0,wU.jsx)(vU,{path:"/",element:(0,wU.jsx)(OV,{component:(0,wU.jsx)(rV,{})})}),(0,wU.jsx)(vU,{path:"/memory/:memory",element:(0,wU.jsx)(OV,{component:(0,wU.jsx)(IV,{})})})]})};new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var MV=r.startTransition;function FV(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),kF((function(e,t){var n=e.location;return mF("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:yF(t)}),null,n)));var s=u.current,l=c(t.useState({action:s.action,location:s.location}),2),f=l[0],h=l[1],d=(a||{}).v7_startTransition,p=t.useCallback((function(e){d&&MV?MV((function(){return h(e)})):h(e)}),[h,d]);return t.useLayoutEffect((function(){return s.listen(p)}),[s,p]),t.createElement(mU,{basename:r,children:i,location:f.location,navigationType:f.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var UV,VV;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(UV||(UV={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(VV||(VV={}));i.createRoot(document.getElementById("root")).render((0,wU.jsx)(t.StrictMode,{children:(0,wU.jsx)(FV,{children:(0,wU.jsx)(LV,{})})}))}()}();
//# sourceMappingURL=main.8b931099.js.map